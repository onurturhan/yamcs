"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[687],{687:(Dl,tt,_)=>{_.r(tt),_.d(tt,{AdminModule:()=>wl});var et=_(7573),u=_(1083),at=_(4375),ee=_(9322),ae=_(5297),l=_(3075),s=_(8279),Z=_(1135),ne=_(8372),d=_(381),C=_(2134),t=_(5e3),b=_(2313);const ie=[[["app-admin-toolbar"]],[["app-detail-pane"]],"*"],oe=["app-admin-toolbar","app-detail-pane","*"];let A=(()=>{class e{constructor(){this.noscroll=!1}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-page"]],inputs:{noscroll:"noscroll"},ngContentSelectors:oe,decls:4,vars:2,consts:[[1,"page-content"]],template:function(a,i){1&a&&(t.F$t(ie),t.Hsn(0),t.TgZ(1,"div",0),t.Hsn(2,1),t.Hsn(3,2),t.qZA()),2&a&&(t.xp6(1),t.Udp("overflow",i.noscroll?"hidden":"auto"))},styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto}"],changeDetection:0}),e})();var nt=_(8991),L=_(4594),p=_(9808),U=_(7423);function se(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).showDetailPane(!0)}),t._uU(1," SHOW INFO PANEL "),t.qZA()}}function re(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).showDetailPane(!1)}),t._uU(1," HIDE INFO PANEL "),t.qZA()}}function ce(e,n){if(1&e&&(t.ynx(0),t.YNc(1,se,2,0,"button",3),t.ALo(2,"async"),t.YNc(3,re,2,0,"button",3),t.ALo(4,"async"),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!t.lcZ(2,2,a.showDetailPane$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,4,a.showDetailPane$))}}const le=["*"];let x=(()=>{class e{constructor(a){this.preferenceStore=a,this.hasDetailPane=!1,this.showDetailPane$=a.detailPane$}showDetailPane(a){this.preferenceStore.setShowDetailPane(a)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(nt.V))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-toolbar"]],inputs:{hasDetailPane:"hasDetailPane"},ngContentSelectors:le,decls:5,vars:1,consts:[[1,"top"],[2,"flex","1 1 auto"],[4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"]],template:function(a,i){1&a&&(t.F$t(),t.TgZ(0,"mat-toolbar",0),t.TgZ(1,"mat-toolbar-row"),t.Hsn(2),t._UZ(3,"span",1),t.YNc(4,ce,5,6,"ng-container",2),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",i.hasDetailPane))},directives:[L.Ye,L.rD,p.O5,U.lW],pipes:[p.Ov],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#f7f7f7;box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0}),e})();var P=_(9971),it=_(141),pe=_(4071),y=_(3874),N=_(5632),me=_(5869);const ue=["intervalSelect"];function _e(e,n){if(1&e){const a=t.EpF();t.ynx(0),t._UZ(1,"app-date-time-input",8),t._UZ(2,"app-date-time-input",9),t.TgZ(3,"button",10),t.NdJ("click",function(){return t.CHM(a),t.oxw().applyCustomDates()}),t._uU(4,"Apply"),t.qZA(),t.BQk()}if(2&e){const a=t.oxw();t.xp6(3),t.Q6J("disabled",a.filterForm.invalid)}}function de(e,n){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){return t.CHM(a),t.oxw().jumpToNow()}),t._uU(2," Jump to now "),t.qZA(),t.BQk()}}function ge(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.item.time.substring(11,16)," ")}}function fe(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.item.user||"-"," ")}}function he(e,n){if(1&e&&(t.TgZ(0,"td",27),t._UZ(1,"span",28),t.ALo(2,"actionLogFormat"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,a.item.summary)||"-",t.oJD)}}function Te(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_more"),t.qZA())}function Ze(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_less"),t.qZA())}function be(e,n){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,Te,2,0,"mat-icon",6),t.YNc(2,Ze,2,0,"mat-icon",6),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",!a.expanded),t.xp6(1),t.Q6J("ngIf",a.expanded)}}function Ae(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"dt",32),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.key),t.xp6(2),t.Oqu(a.value||"")}}function xe(e,n){if(1&e&&(t.TgZ(0,"td",30),t.TgZ(1,"dl",31),t.TgZ(2,"dt"),t._uU(3,"Service"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Method"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.YNc(10,Ae,5,2,"ng-container",7),t.qZA(),t.qZA()),2&e){const a=n.$implicit,i=t.oxw(2);t.uIk("colspan",i.displayedColumns.length),t.xp6(5),t.Oqu(a.item.service),t.xp6(4),t.Oqu(a.item.method),t.xp6(1),t.Q6J("ngForOf",a.requestOptions)}}function ye(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return r.expanded=!r.expanded}),t.qZA()}2&e&&t.ekj("expanded",n.$implicit.expanded)}function Ue(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return r.expanded=!r.expanded}),t.qZA()}2&e&&t.ekj("expanded",n.$implicit.expanded)}const ve=function(){return["detail"]};function qe(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"table",12),t.ynx(4,13),t.YNc(5,ge,2,1,"td",14),t.BQk(),t.ynx(6,15),t.YNc(7,fe,2,1,"td",16),t.BQk(),t.ynx(8,17),t.YNc(9,he,3,3,"td",18),t.BQk(),t.ynx(10,19),t.YNc(11,be,3,2,"td",20),t.BQk(),t.ynx(12,21),t.YNc(13,xe,11,4,"td",22),t.BQk(),t.YNc(14,ye,1,2,"tr",23),t.YNc(15,Ue,1,2,"tr",24),t.qZA(),t.BQk()),2&e){const a=n.$implicit,i=n.first,o=t.oxw();t.xp6(1),t.ekj("first",i),t.xp6(1),t.Oqu(a.grouper),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(11),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,ve))}}function Ce(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No activity for the current filter criteria. "),t.qZA())}const M="NO_LIMIT";let ot=(()=>{class e{constructor(a,i,o,r){this.yamcs=a,this.router=i,this.route=o,this.filterForm=new l.cw({filter:new l.NI,interval:new l.NI(M),customStart:new l.NI(null),customStop:new l.NI(null)}),this.displayedColumns=["time","user","summary","actions"],this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}],this.rowGroups$=new Z.X([]),r.setTitle("Admin Area"),this.initializeOptions(),this.loadData(),this.filterForm.get("filter").valueChanges.pipe((0,ne.b)(400)).forEach(c=>{this.filter=c,this.loadData()}),this.filterForm.get("interval").valueChanges.forEach(c=>{if("CUSTOM"===c){const m=new Date,h=this.validStart||m,f=this.validStop||m;this.filterForm.get("customStart").setValue(C.Y6(h)),this.filterForm.get("customStop").setValue(C.Y6(f))}else"NO_LIMIT"===c?(this.validStart=null,this.validStop=null,this.appliedInterval=c,this.loadData()):(this.validStop=new Date,this.validStart=(0,C.rV)(this.validStop,c),this.appliedInterval=c,this.loadData())})}initializeOptions(){const a=this.route.snapshot.queryParamMap;if(a.has("filter")&&(this.filter=a.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),a.has("interval"))if(this.appliedInterval=a.get("interval"),this.filterForm.get("interval").setValue(this.appliedInterval),"CUSTOM"===this.appliedInterval){const i=a.get("customStart");this.filterForm.get("customStart").setValue(i),this.validStart=C.ZU(i);const o=a.get("customStop");this.filterForm.get("customStop").setValue(o),this.validStop=C.ZU(o)}else"NO_LIMIT"===this.appliedInterval?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=(0,C.rV)(this.validStop,this.appliedInterval));else this.appliedInterval=M,this.validStop=null,this.validStart=null}jumpToNow(){const a=this.filterForm.value.interval;"NO_LIMIT"===a||"CUSTOM"===a?this.filterForm.get("interval").setValue(M):(this.validStop=new Date,this.validStart=(0,C.rV)(this.validStop,a),this.loadData())}applyCustomDates(){this.validStart=C.ZU(this.filterForm.value.customStart),this.validStop=C.ZU(this.filterForm.value.customStop),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();const a={};this.validStart&&(a.start=this.validStart.toISOString()),this.validStop&&(a.stop=this.validStop.toISOString()),this.filter&&(a.q=this.filter);const i=(new Date).toISOString().substr(0,10),o=C.rV(new Date,"P1D").toISOString().substr(0,10);this.yamcs.yamcsClient.getAuditRecords("_global",a).then(r=>{const c=this.groupByDay(r.records||[]).map(m=>{const h=new s.by;h.data=m.map(S=>{const q=[{key:"Request",value:""}];return S.request&&this.flatten(S.request,q,"    "),{item:S,expanded:!1,requestOptions:q}});let f=m[0].time.substr(0,10);return f===i?f="Today":f===o&&(f="Yesterday"),{grouper:f,dataSource:h}});this.rowGroups$.next(c)})}loadMoreData(){}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filter||null,interval:this.appliedInterval,customStart:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStart:null,customStop:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStop:null},queryParamsHandling:"merge"})}groupByDay(a){const i=[];let o,r=[];for(const c of a){const m=c.time.substr(0,10);m!==o&&(o=m,r.length&&(i.push(r),r=[])),r.push(c)}return r.length&&i.push(r),i}flatten(a,i,o=""){for(const r in a){const c=a[r];if(Array.isArray(c)){i.push({key:o+r,value:""});for(let m=0;m<c.length;m++)i.push({key:o+"    "+r+" "+(m+1),value:c[m]})}else"object"==typeof c?(i.push({key:o+r,value:""}),this.flatten(c,i,o+"    ")):i.push({key:o+r,value:""+c})}}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(u.F0),t.Y36(u.gz),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(ue,5),2&a){let o;t.iGM(o=t.CRH())&&(i.intervalSelect=o.first)}},decls:15,vars:10,consts:[[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","filter","placeholder","Filter by text search"],["icon","access_time","formControlName","interval",3,"options"],["intervalSelect",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","customStart"],["formControlName","customStop"],[1,"ya-button",3,"disabled","click"],[1,"ya-button",3,"click"],["mat-table","","multiTemplateDataRows","",1,"ya-data-table",2,"border-top","1px solid rgba(0, 0, 0, 0.1)",3,"dataSource"],["matColumnDef","time"],["mat-cell","","style","width: 100px",4,"matCellDef"],["matColumnDef","user"],["mat-cell","","style","width: 200px",4,"matCellDef"],["matColumnDef","summary"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","style","width: 20px; text-align: right;",4,"matCellDef"],["matColumnDef","detail"],["mat-cell","",4,"matCellDef"],["mat-row","","class","item-row",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","100px"],["mat-cell","",2,"width","200px"],["mat-cell","",2,"width","400px"],[3,"innerHTML"],["mat-cell","",2,"width","20px","text-align","right"],["mat-cell",""],[1,"dl-horizontal"],[2,"white-space","pre"],["mat-row","",1,"item-row",3,"click"],["mat-row","",1,"item-detail",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Activity "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"form",1),t.TgZ(5,"div",2),t._UZ(6,"app-search-filter",3),t._UZ(7,"app-select",4,5),t.YNc(9,_e,5,1,"ng-container",6),t.YNc(10,de,3,0,"ng-container",6),t.qZA(),t.qZA(),t.YNc(11,qe,16,7,"ng-container",7),t.ALo(12,"async"),t.YNc(13,Ce,2,0,"app-empty-message",6),t.ALo(14,"async"),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("formGroup",i.filterForm),t.xp6(3),t.Q6J("options",i.intervalOptions),t.xp6(2),t.Q6J("ngIf","CUSTOM"===i.filterForm.value.interval),t.xp6(1),t.Q6J("ngIf","CUSTOM"!==i.filterForm.value.interval),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,6,i.rowGroups$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(14,8,i.rowGroups$).length))},directives:[A,x,l._Y,l.JL,l.sg,P.a,l.JJ,l.u,it.P,p.O5,pe.Y,p.sg,s.BZ,s.w1,s.Dz,s.ev,y.Hw,s.nj,s.Gk,N.M],pipes:[p.Ov,me.N],styles:["h4[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:.5em;font-size:12px}h4.first[_ngcontent-%COMP%]{margin-top:0}tr.item-row.expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}tr.item-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:40px!important}.mat-row[_ngcontent-%COMP%]{cursor:pointer}tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{line-height:20px}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{min-height:20px}.ya-data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]:hover{background:inherit}"],changeDetection:0}),e})();var st=_(9300),k=_(3251);const rt=function(e){return["/admin/databases",e,"tables"]};function we(e,n){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Tables "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,rt,a.name))}}const ct=function(e){return["/admin/databases",e,"streams"]};function De(e,n){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Streams "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,ct,a.name))}}function Se(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",2),t._uU(2,"navigate_next"),t.qZA(),t.YNc(3,we,2,3,"a",6),t.YNc(4,De,2,3,"a",6),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t._uU(7),t.BQk()),2&e){const a=n.ngIf;t.xp6(3),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type),t.xp6(3),t.hij(" ",a.name," ")}}const Pe=function(e){return["/admin/databases",e,"shell"]};function Ne(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"a",7,8),t._uU(3," Tables "),t.qZA(),t.TgZ(4,"a",7,9),t._uU(6," Streams "),t.qZA(),t.TgZ(7,"a",7,10),t._uU(9," DB Shell "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),i=t.MAs(5),o=t.MAs(8),r=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(6,rt,r.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(8,ct,r.name))("active",i.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(10,Pe,r.name))("active",o.isActive)}}const Ye=function(e,n){return["/admin/databases",e,"tables",n,"info"]},ke=function(e,n){return["/admin/databases",e,"tables",n,"data"]},Qe=function(e,n){return["/admin/databases",e,"tables",n,"script"]};function Ie(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"a",7,11),t._uU(3," Info "),t.qZA(),t.TgZ(4,"a",7,12),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",7,13),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),i=t.MAs(5),o=t.MAs(8),r=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,Ye,c.name,r.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,ke,c.name,r.name))("active",i.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,Qe,c.name,r.name))("active",o.isActive)}}const Oe=function(e,n){return["/admin/databases",e,"streams",n,"columns"]},Re=function(e,n){return["/admin/databases",e,"streams",n,"data"]},Je=function(e,n){return["/admin/databases",e,"streams",n,"script"]};function $e(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"a",7,14),t._uU(3," Columns "),t.qZA(),t.TgZ(4,"a",7,15),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",7,16),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),i=t.MAs(5),o=t.MAs(8),r=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,Oe,c.name,r.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,Re,c.name,r.name))("active",i.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,Je,c.name,r.name))("active",o.isActive)}}function Le(e,n){if(1&e&&(t.ynx(0),t.YNc(1,Ie,10,15,"ng-container",0),t.YNc(2,$e,10,15,"ng-container",0),t.BQk()),2&e){const a=n.ngIf;t.xp6(1),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type)}}const Me=function(e){return["/admin/databases",e]};function Be(e,n){if(1&e&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",1),t.TgZ(3,"mat-icon"),t._uU(4,"account_tree"),t.qZA(),t.qZA(),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t.TgZ(7,"a",3),t._uU(8),t.qZA(),t.YNc(9,Se,8,3,"ng-container",0),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"nav",4),t.YNc(12,Ne,10,12,"ng-container",0),t.ALo(13,"async"),t.YNc(14,Le,3,2,"ng-container",0),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"div",5),t._UZ(17,"router-outlet"),t.qZA(),t.qZA()),2&e){const a=n.ngIf,i=t.oxw();t.xp6(7),t.Q6J("routerLink",t.VKq(11,Me,a.name)),t.xp6(1),t.hij(" ",a.name," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,5,i.object$)),t.xp6(3),t.Q6J("ngIf",!t.lcZ(13,7,i.object$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,9,i.object$))}}let lt=(()=>{class e{constructor(a,i,o,r){this.yamcs=o,this.object$=new Z.X(null),this.routerSubscription=a.events.pipe((0,st.h)(m=>m instanceof u.m2)).subscribe(m=>{const h=i.snapshot.firstChild;let f=h.paramMap.get("table");f?this.object$.next({type:"table",name:f}):(f=h.paramMap.get("stream"),this.object$.next(f?{type:"stream",name:f}:null))});const c=i.snapshot.paramMap.get("database");r.setTitle(c),this.database$=o.yamcsClient.getDatabase(c)}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.F0),t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/databases"],[1,"icon14","sep"],[1,"ya-link","ya-header-link",3,"routerLink"],["mat-tab-nav-bar","",1,"secondary"],[1,"outlet-wrapper"],["class","ya-link ya-header-link",3,"routerLink",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["rlb","routerLinkActive"],["rlc","routerLinkActive"],["rla1","routerLinkActive"],["rla2","routerLinkActive"],["rla3","routerLinkActive"],["rlb1","routerLinkActive"],["rlb2","routerLinkActive"],["rlb3","routerLinkActive"]],template:function(a,i){1&a&&(t.YNc(0,Be,18,13,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.database$))},directives:[p.O5,A,x,U.zs,u.yS,y.Hw,k.BU,k.Nj,u.Od,u.lC],pipes:[p.Ov],styles:[".outlet-wrapper[_ngcontent-%COMP%]{overflow:auto;position:absolute;inset:37px 0 0}.sep[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"],changeDetection:0}),e})();class pt{constructor(n=""){this.text=n,this.edited=n}backspace(n){if(n>0){const a=this.edited.split("");a.splice(n-1,1),this.edited=a.join("")}}insert(n,a){const i=this.edited.split("");i.splice(n,0,a),this.edited=i.join("")}get value(){return this.edited}commit(){this.text=this.edited}revert(){this.edited=this.text}}class He{constructor(n){this.shell=n,this.history=[],this.pointer=-1,this.lastItem=new pt,this.cursor=0,this.history.push(this.lastItem),this.pointer=0}consume(n){switch(n){case"Backspace":this.history[this.pointer].backspace(this.cursor),this.cursor=Math.max(0,this.cursor-1);break;case"ArrowUp":this.pointer=Math.max(0,this.pointer-1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowDown":this.pointer=Math.min(this.history.length-1,this.pointer+1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowLeft":this.cursor=Math.max(0,this.cursor-1);break;case"ArrowRight":this.cursor=Math.min(this.history[this.pointer].value.length,this.cursor+1);break;default:this.history[this.pointer].insert(this.cursor,n),this.cursor+=n.length}this.notifyChange()}notifyChange(){this.shell.repaintCommandLine()}abort(){const n=this.history[this.pointer].value;for(const a of this.history)a.revert();return this.cursor=0,this.pointer=this.history.length-1,this.notifyChange(),n}peek(){return this.history[this.pointer].value}take(){const n=this.history[this.pointer].value;for(let a=0;a<this.history.length;a++)a===this.pointer||a===this.history.length-1?this.history[a].revert():this.history[a].commit();if(n){const a=new pt(n);this.history.splice(this.history.length-1,0,a),this.pointer=this.history.length-1}return this.cursor=0,this.notifyChange(),n}moveCursorToHome(){this.cursor=0,this.notifyChange()}moveCursorToEnd(){this.cursor=this.history[this.pointer].value.length,this.notifyChange()}}class Fe{constructor(n){this.dirty=!1,this.pointer=0,this.buffer=Array(n).fill(void 0)}add(n){this.buffer[this.pointer]=n,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const n=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(n).filter(i=>void 0!==i)}}}var Ee=_(729);const Ge=["shell"],je=["bottom"];function ze(e,n){1&e&&t._UZ(0,"app-dots",8)}function Ve(e,n){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a)}}function Xe(e,n){if(1&e&&(t.TgZ(0,"pre"),t._uU(1,"    "),t.TgZ(2,"code"),t._uU(3,"\n      "),t.TgZ(4,"span",9),t.YNc(5,Ve,3,1,"ng-container",10),t.ALo(6,"async"),t.qZA(),t._uU(7),t.ALo(8,"async"),t._UZ(9,"span",11),t.ALo(10,"async"),t._uU(11,"\n      "),t.qZA(),t._uU(12,"\n  "),t.qZA()),2&e){const a=t.oxw();t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,3,a.lines$)),t.xp6(2),t.hij("\n      ",t.lcZ(8,5,a.prompt$),"\n      "),t.xp6(2),t.Q6J("innerHTML",t.lcZ(10,7,a.commandLineHTML$),t.oJD)}}let mt=(()=>{class e{constructor(a){this.sanitizer=a,this.scrollBuffer=new Fe(500),this.lines$=new Z.X([]),this.ready$=new Z.X(!1),this.prompt$=new Z.X(""),this.focused$=new Z.X(!1),this.commandLineHTML$=new Z.X(""),this.command=new t.vpe,this.commandLine=new He(this),this.repaintCommandLine()}ngAfterViewInit(){this.shellEl.nativeElement.focus()}onFocus(){this.focused$.next(!0)}onFocusOut(){this.focused$.next(!1)}onPaste(a){var i;const o=null===(i=a.clipboardData)||void 0===i?void 0:i.getData("Text");o&&this.commandLine.consume(o),a.preventDefault()}printLines(a){for(const i of a)this.scrollBuffer.add(i);this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}printLine(a=""){this.scrollBuffer.add(a),this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}setPrompt(a){this.prompt$.next(a)}handleKeyDownEvent(a){if(a.ctrlKey)switch(a.key){case"a":this.commandLine.moveCursorToHome(),a.preventDefault();break;case"c":const i=this.commandLine.abort();this.printLine(this.prompt$.value+i),a.preventDefault();break;case"e":this.commandLine.moveCursorToEnd(),a.preventDefault();break;case"h":this.commandLine.consume("Backspace"),a.preventDefault();break;case"l":this.scrollBuffer.reset(),this.lines$.next(this.scrollBuffer.snapshot()),a.preventDefault()}else if(!a.shiftKey&&!a.metaKey)switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Backspace":this.commandLine.consume(a.key),a.preventDefault()}}handleKeyboardEvent(a){if(this.focused$.value&&!(a.ctrlKey||a.altKey||a.metaKey))if("Enter"===a.key){const i=this.commandLine.take();this.printLine(this.prompt$.value+i),this.command.next(i.trim()),a.preventDefault()}else 1===a.key.length&&(this.scrollToBottom(),this.commandLine.consume(a.key),a.preventDefault())}repaintCommandLine(){let a="",i=!1;const o=this.commandLine.peek(),r=this.commandLine.cursor;for(let c=0;c<o.length;c++)r===c?(a+='<span class="cursor">'+o[c]+"</span>",i=!0):a+=o[c];i||(a+='<span class="cursor"> </span>'),this.commandLineHTML$.next(this.sanitizer.bypassSecurityTrustHtml(a))}scrollToBottom(){window.setTimeout(()=>{this.bottomAnchor.nativeElement.scrollIntoView()})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(b.H7))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-shell"]],viewQuery:function(a,i){if(1&a&&(t.Gf(Ge,5),t.Gf(je,5)),2&a){let o;t.iGM(o=t.CRH())&&(i.shellEl=o.first),t.iGM(o=t.CRH())&&(i.bottomAnchor=o.first)}},hostBindings:function(a,i){1&a&&t.NdJ("keydown",function(r){return i.handleKeyDownEvent(r)},!1,t.evT)("keypress",function(r){return i.handleKeyboardEvent(r)},!1,t.evT)},outputs:{command:"command"},decls:11,vars:10,consts:[["tabindex","0","contenteditable","true","spellcheck","false",1,"shell",3,"focus","focusout","paste"],["shell",""],[1,"top"],["top",""],["color","#3f0",4,"ngIf"],[4,"ngIf"],[1,"bottom"],["bottom",""],["color","#3f0"],[1,"preserved"],[4,"ngFor","ngForOf"],[1,"preserved",3,"innerHTML"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0,1),t.NdJ("focus",function(){return i.onFocus()})("focusout",function(){return i.onFocusOut()})("paste",function(r){return i.onPaste(r)}),t.ALo(2,"async"),t._UZ(3,"div",2,3),t.YNc(5,ze,1,0,"app-dots",4),t.ALo(6,"async"),t.YNc(7,Xe,13,9,"pre",5),t.ALo(8,"async"),t._UZ(9,"div",6,7),t.qZA()),2&a&&(t.ekj("focused",t.lcZ(2,4,i.focused$)),t.xp6(5),t.Q6J("ngIf",!t.lcZ(6,6,i.ready$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,8,i.ready$)))},directives:[p.O5,Ee.b,p.sg],pipes:[p.Ov],styles:[".shell[_ngcontent-%COMP%]{position:absolute;inset:0;padding:5px;background-color:#24292e;overflow:auto;outline:none;caret-color:transparent}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{visibility:hidden;line-height:0}pre[_ngcontent-%COMP%], code[_ngcontent-%COMP%]{white-space:normal;font-family:Roboto Mono,monospace;font-size:12px;line-height:14px}pre[_ngcontent-%COMP%]{background:#24292e;border:none;overflow:auto;border-radius:0;margin:0;padding:0;color:#3f0}.preserved[_ngcontent-%COMP%]{white-space:pre}code[_ngcontent-%COMP%]{padding:0;background:0 0}.shell.focused[_ngcontent-%COMP%]     .cursor{background-color:#3f0;color:#24292e}"],changeDetection:0}),e})();class We{constructor(n){this.columns=n,this.widths=[],this.pendingRows=[],this.printedRowCount=0;for(const a of n)this.widths.push(a.name.length)}add(n){const a=[];for(let i=0;i<n.values.length;i++){const o=C.c7(n.values[i])||"";a.push(o),this.widths[i]=Math.max(o.length,this.widths[i])}this.pendingRows.push(a)}printPending(){const n=[],a=this.columns.map(i=>i.name);0===this.printedRowCount&&(n.push(this.generateSeparator()),n.push(this.printRow(a)),n.push(this.generateSeparator()));for(const i of this.pendingRows)n.push(this.printRow(i)),this.printedRowCount++;return n}printRow(n){let a="";for(let i=0;i<this.columns.length;i++)a+="| ",a+=n[i],a+=" ".repeat(this.widths[i]-n[i].length),a+=" ";return a+"|"}printSummary(){const n=[];return n.push(this.generateSeparator()),n.push(1===this.printedRowCount?"1 row in set":`${this.printedRowCount} rows in set`),n.push(""),n}generateSeparator(){let n="";for(const a of this.widths)n+="+-"+"-".repeat(a)+"-";return n+="+",n}}let ut=(()=>{class e{constructor(a,i){this.yamcs=i;const r=a.snapshot.parent.paramMap.get("database");this.changeDatabase(r)}ngAfterViewInit(){this.shell.printLine("Yamcs DB Shell"),this.shell.printLine("Type help or ? for help.\n")}handleCommand(a){if(!a)return;const i=a.split(";").map(o=>o.trim());for(const o of i)o&&this.handleStatement(o)}changeDatabase(a){this.yamcs.yamcsClient.getDatabase(a).then(i=>{this.database=i,this.shell.ready$.next(!0),this.shell.setPrompt(i.name+"> ")})}handleStatement(a){if("?"===a||a.startsWith("help")){const i=a.split(/\s+/,2);i.length>1?this.shell.printLine("use"===i[1]?"Use another database, provided as argument.":"*** No help on "+i[1]):(this.shell.printLine(),this.shell.printLine("List of dbshell commands:"),this.shell.printLine("?        Show help."),this.shell.printLine('help     List available commands with "help" or detailed help with "help cmd".'),this.shell.printLine("use      Use another database, provided as argument."),this.shell.printLine())}else if(a.startsWith("use")){const i=a.split(/\s+/,2);1===i.length?this.shell.printLine("*** Missing argument"):this.changeDatabase(i[1])}else this.yamcs.yamcsClient.executeSQL(this.database.name,a).then(i=>{if(i.rows){const o=new We(i.columns||[]);for(const r of i.rows||[])o.add(r);this.shell.printLines(o.printPending()),this.shell.printLines(o.printSummary())}else this.shell.printLine("Empty set\n")}).catch(i=>{this.shell.printLine(`${i}`)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(mt,5),2&a){let o;t.iGM(o=t.CRH())&&(i.shell=o.first)}},decls:1,vars:0,consts:[[3,"command"]],template:function(a,i){1&a&&(t.TgZ(0,"app-shell",0),t.NdJ("command",function(r){return i.handleCommand(r)}),t.qZA())},directives:[mt],encapsulation:2,changeDetection:0}),e})();var w=_(5981);function Ke(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.type)}}function ta(e,n){if(1&e&&(t.TgZ(0,"div",1),t.TgZ(1,"table",2),t.TgZ(2,"tr"),t.TgZ(3,"th",3),t._uU(4,"Column"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Type"),t.qZA(),t.qZA(),t.YNc(7,Ke,5,2,"tr",4),t.qZA(),t.qZA()),2&e){const a=n.ngIf;t.xp6(7),t.Q6J("ngForOf",a.column)}}let _t=(()=>{class e{constructor(a,i){const o=a.snapshot.parent,r=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=i.yamcsClient.getStream(r,c)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable",""],["width","200"],[4,"ngFor","ngForOf"]],template:function(a,i){1&a&&(t.YNc(0,ta,8,1,"div",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.stream$))},directives:[p.O5,w.O,p.sg],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();var O=_(7587),ea=_(4e3),z=_(449);class aa{constructor(){this.dirty=!1,this.bufferSize=500,this.pointer=0,this.buffer=Array(this.bufferSize).fill(void 0)}add(n){this.buffer[this.pointer]=n,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const n=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(n).filter(i=>void 0!==i)}}}class na extends z.o2{constructor(n,a,i,o){super(),this.yamcs=n,this.database=i,this.stream=o,this.streamData$=new Z.X([]),this.loading$=new Z.X(!1),this.streaming$=new Z.X(!1),this.columns$=new Z.X([]),this.streamBuffer=new aa,this.syncSubscription=a.sync(()=>{this.streamBuffer.dirty&&!this.loading$.getValue()&&(this.streamData$.next(this.streamBuffer.snapshot().reverse()),this.streamBuffer.dirty=!1)})}connect(){return this.streamData$}startStreaming(){this.streaming$.next(!0),this.streamSubscription=this.yamcs.yamcsClient.createStreamSubscription({instance:this.database,stream:this.stream},n=>{if(!this.loading$.getValue()){n.animate=!0,this.streamBuffer.add(n);const a=this.columns$.value;for(const i of n.column)-1===a.indexOf(i.name)&&a.push(i.name);this.columns$.next([...a])}})}stopStreaming(){this.streamSubscription&&this.streamSubscription.cancel(),this.streaming$.next(!1)}disconnect(){this.streamSubscription&&this.streamSubscription.cancel(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.streamData$.complete(),this.loading$.complete(),this.streaming$.complete()}}var J=_(5328),V=_(3284),X=_(3156),dt=_(9177),B=_(496);function ia(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.BQk()),2&e){const a=t.oxw().index,i=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,i.streamData.column[a].value)||"-"," ")}}function oa(e,n){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",4),t.BQk()),2&e){const a=t.oxw().index,i=t.oxw();t.xp6(1),t.Q6J("base64String",i.streamData.column[a].value.binaryValue)}}function sa(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,ia,3,3,"ng-container",3),t.YNc(5,oa,2,1,"ng-container",3),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.value.type),t.xp6(1),t.Q6J("ngIf","BINARY"===a.value.type)}}let ra=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-stream-data"]],inputs:{streamData:"streamData"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"block-title"],[1,"block"],[4,"ngIf"],[3,"base64String"]],template:function(a,i){1&a&&t.YNc(0,sa,6,3,"ng-container",0),2&a&&t.Q6J("ngForOf",i.streamData.column)},directives:[p.sg,p.O5,dt.p],pipes:[B.V],encapsulation:2,changeDetection:0}),e})(),H=(()=>{class e{transform(a,i){if(!a||0===a.length)return null;for(const o of a)if(o.name===i)return o.value;return null}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275pipe=t.Yjl({name:"columnValue",type:e,pure:!0}),e})();function ca(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"app-detail-toolbar"),t._uU(2," Tuple "),t.qZA(),t.TgZ(3,"div",12),t._UZ(4,"app-stream-data",13),t.qZA(),t.BQk()),2&e){const a=n.ngIf;t.xp6(4),t.Q6J("streamData",a)}}function la(e,n){1&e&&(t.TgZ(0,"app-detail-toolbar"),t._uU(1," Select a tuple "),t.qZA())}function pa(e,n){if(1&e&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a)}}function ma(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=n.$implicit,i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,a.column,i))||"-"," ")}}function ua(e,n){1&e&&(t.ynx(0,14),t.YNc(1,pa,2,1,"th",15),t.YNc(2,ma,4,6,"td",9),t.BQk()),2&e&&t.Q6J("cdkColumnDef",n.$implicit)}function _a(e,n){1&e&&t._UZ(0,"th",18)}function da(e,n){1&e&&t._UZ(0,"td",17)}function ga(e,n){1&e&&t._UZ(0,"tr",19)}const fa=function(e){return{selected:e}};function ha(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw().selectStreamData(r)}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw();t.Q6J("@rowAnimation",a.animate)("ngClass",t.VKq(4,fa,a===t.lcZ(1,2,i.selectedStreamData$)))}}let gt=(()=>{class e{constructor(a,i,o){this.displayedColumns=["actions"],this.selectedStreamData$=new Z.X(null);const r=a.snapshot.parent,c=r.parent.paramMap.get("database"),m=r.paramMap.get("stream");this.dataSource=new na(i,o,c,m),this.availableColumns$=this.dataSource.columns$}ngAfterViewInit(){this.columnDefinitionsSubscription=this.columnDefinitions.changes.subscribe(()=>{this.columnDefinitions.forEach(a=>{-1===this.displayedColumns.indexOf(a.name)&&this.displayedColumns.splice(this.displayedColumns.length-1,0,a.name)})}),this.dataSource.startStreaming()}selectStreamData(a){this.selectedStreamData$.next(a)}ngOnDestroy(){this.columnDefinitionsSubscription&&this.columnDefinitionsSubscription.unsubscribe(),this.dataSource&&this.dataSource.stopStreaming()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(J.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(O.fo,5),2&a){let o;t.iGM(o=t.CRH())&&(i.columnDefinitions=o)}},decls:16,vars:10,consts:[[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["table",""],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"padding","0 16px"],[3,"streamData"],[3,"cdkColumnDef"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(a,i){if(1&a&&(t.TgZ(0,"app-detail-pane"),t.YNc(1,ca,5,1,"ng-container",0),t.ALo(2,"async"),t.YNc(3,la,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"table",4,5),t.YNc(9,ua,3,1,"ng-container",6),t.ALo(10,"async"),t.ynx(11,7),t.YNc(12,_a,1,0,"th",8),t.YNc(13,da,1,0,"td",9),t.BQk(),t.YNc(14,ga,1,0,"tr",10),t.YNc(15,ha,2,6,"tr",11),t.qZA(),t.qZA(),t.qZA()),2&a){const o=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,6,i.selectedStreamData$))("ngIfElse",o),t.xp6(6),t.Q6J("dataSource",i.dataSource),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,8,i.availableColumns$)),t.xp6(5),t.Q6J("cdkHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("cdkRowDefColumns",i.displayedColumns)}},directives:[V.Z,p.O5,X.j,ra,s.BZ,p.sg,O.fo,O.D5,s.ge,O.O_,s.ev,s.w1,O.s$,s.XQ,O.Sq,s.Gk,p.mk],pipes:[p.Ov,B.V,H],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[ea.q]},changeDetection:0}),e})();function Ta(e,n){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let ft=(()=>{class e{constructor(a,i,o){this.yamcs=i;const r=a.snapshot,c=r.parent.paramMap.get("database"),m=r.paramMap.get("stream");o.setTitle(m),this.stream$=i.yamcsClient.getStream(c,m)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(a,i){1&a&&(t.YNc(0,Ta,2,0,"ng-container",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.stream$))},directives:[p.O5,u.lC],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();const ht="&nbsp;&nbsp;&nbsp;&nbsp;",F=/[()]|(, ")/;function Tt(e){if(!e)return e;const n=[];let a="",i=e.search(F);for(;-1!==i;)"("===e[i]?(n.push(e.substring(0,i+1)),a+=ht,n.push("<br>",a),i=(e=e.substring(i+1)).search(F)):")"===e[i]?(n.push(e.substring(0,i)),a=a.replace(ht,""),n.push("<br>",a),n.push(")"),i=(e=e.substring(i+1)).search(F)):(n.push(e.substring(0,i+1)),n.push("<br>",a),n.push('"'),i=(e=e.substring(i+3)).search(F));let o=n.join("")+e;return o=o.replace(/(engine|histogram|partition|primary|table_format)/g,"<br>$1"),function Za(e){return e.replace(/(BINARY|ENUM|HRES_TIMESTAMP|INT|LONG|PARAMETER_VALUE|PROTOBUF|STRING|TIMESTAMP)/g,'<span class="dtype">$1</span>').replace(/([(),]+)/g,'<span class="paren">$1</span>').replace(/(auto_increment|create|compressed|histogram|engine|primary key|table(_format)?|stream)/g,'<span class="kw">$1</span>').replace(/(partition by time(_and_value)?|partition by value)/g,'<span class="kw">$1</span>')}(o)}function ba(e,n){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("innerHTML",i.formatSQL(a.script),t.oJD)}}let Zt=(()=>{class e{constructor(a,i){const o=a.snapshot.parent,r=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=i.yamcsClient.getStream(r,c)}formatSQL(a){return Tt(a)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(a,i){1&a&&(t.YNc(0,ba,2,1,"div",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.stream$))},directives:[p.O5],pipes:[p.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0}),e})();var g=_(4847);function Aa(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function xa(e,n){if(1&e&&(t.TgZ(0,"td",12),t.TgZ(1,"a",13),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function ya(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data count"),t.qZA())}function Ua(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.dataCount)," ")}}function va(e,n){1&e&&t._UZ(0,"th",15)}function qa(e,n){1&e&&t._UZ(0,"td",12)}function Ca(e,n){1&e&&t._UZ(0,"tr",16)}function wa(e,n){1&e&&t._UZ(0,"tr",17)}let bt=(()=>{class e{constructor(a,i){this.yamcs=i,this.displayedColumns=["name","dataCount","actions"],this.dataSource=new s.by,this.itemsByName={},this.database=a.snapshot.parent.paramMap.get("database")}ngAfterViewInit(){this.dataSource.sort=this.sort,this.streamStatisticsSubscription=this.yamcs.yamcsClient.createStreamStatisticsSubscription({instance:this.database},a=>{this.processStreamEvent(a)})}processStreamEvent(a){switch(a.type){case"CREATED":case"UPDATED":this.itemsByName[a.name]={name:a.name,dataCount:a.dataCount},this.updateDataSource();break;case"DELETED":delete this.itemsByName[a.name],this.updateDataSource();break;default:console.error("Unexpected stream update of type "+a.type)}}updateDataSource(){const a=Object.values(this.itemsByName);a.sort((i,o)=>i.name.localeCompare(o.name)),this.dataSource.data=a}ngOnDestroy(){this.streamStatisticsSubscription&&this.streamStatisticsSubscription.cancel()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:13,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataCount"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,Aa,2,0,"th",3),t.YNc(4,xa,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,ya,2,0,"th",3),t.YNc(7,Ua,3,3,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,va,1,0,"th",8),t.YNc(10,qa,1,0,"td",4),t.BQk(),t.YNc(11,Ca,1,0,"tr",9),t.YNc(12,wa,1,0,"tr",10),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,s.as,s.XQ,s.nj,s.Gk],pipes:[p.JJ],encapsulation:2,changeDetection:0}),e})();var D=_(7238);function Da(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2),t.TgZ(2,"mat-icon",3),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.ALo(7,"value"),t.ALo(8,"columnValue"),t.qZA(),t.BQk()),2&e){const a=n.$implicit,i=t.oxw();t.xp6(4),t.hij(" ",a.name," "),t.xp6(2),t.hij(" ",t.lcZ(7,2,t.xi3(8,4,i.record.column,a.name))||"-"," ")}}function Sa(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,i.record.column,a.name))||"-"," ")}}function Pa(e,n){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",7),t.BQk()),2&e){const a=n.ngIf;t.xp6(1),t.Q6J("base64String",a.binaryValue)}}function Na(e,n){if(1&e&&(t.ynx(0),t.YNc(1,Pa,2,1,"ng-container",6),t.ALo(2,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,i=t.oxw(),o=t.MAs(5);t.xp6(1),t.Q6J("ngIf",t.xi3(2,2,i.record.column,a.name))("ngIfElse",o)}}function Ya(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,Sa,4,6,"ng-container",5),t.YNc(5,Na,3,5,"ng-container",5),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.type&&("PROTOBUF(com.google.protobuf.Struct)"===a.type||!a.type.startsWith("PROTOBUF"))),t.xp6(1),t.Q6J("ngIf","BINARY"===a.type||"PROTOBUF(com.google.protobuf.Struct)"!==a.type&&a.type.startsWith("PROTOBUF"))}}function ka(e,n){1&e&&t._uU(0,"-")}let Qa=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-record"]],inputs:{table:"table",record:"record"},decls:6,vars:2,consts:[[4,"ngFor","ngForOf"],["dash",""],[1,"block-title"],["matTooltip","Key Column",1,"icon12",2,"color","gold"],[1,"block"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"base64String"]],template:function(a,i){1&a&&(t.YNc(0,Da,9,7,"ng-container",0),t.YNc(1,Ya,6,3,"ng-container",0),t.TgZ(2,"p"),t._uU(3,"\xa0"),t.qZA(),t.YNc(4,ka,1,0,"ng-template",null,1,t.W1O)),2&a&&(t.Q6J("ngForOf",i.table.keyColumn),t.xp6(1),t.Q6J("ngForOf",i.table.valueColumn))},directives:[p.sg,y.Hw,D.gM,p.O5,dt.p],pipes:[B.V,H],encapsulation:2,changeDetection:0}),e})();function Ia(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"app-detail-toolbar"),t._uU(2," Record "),t.qZA(),t.TgZ(3,"div",6),t._UZ(4,"app-record",7),t.qZA(),t.BQk()),2&e){const a=n.ngIf,i=t.oxw().ngIf;t.xp6(4),t.Q6J("table",i)("record",a)}}function Oa(e,n){1&e&&(t.TgZ(0,"app-detail-toolbar"),t._uU(1," Select a record "),t.qZA())}function Ra(e,n){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.name)}}function Ja(e,n){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.name)}}function $a(e,n){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=n.$implicit,i=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,i.column,a.name))||"-"," ")}}function La(e,n){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=n.$implicit,i=t.oxw().$implicit;t.ekj("mono","BINARY"===a.type),t.xp6(1),t.hij(" ",t.lcZ(2,3,t.xi3(3,5,i.column,a.name))||"-"," ")}}const Ma=function(e){return{selected:e}};function Ba(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",12),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(4).selectRecord(r)}),t.ALo(1,"async"),t.YNc(2,$a,4,6,"td",10),t.YNc(3,La,4,8,"td",13),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw(3).ngIf,o=t.oxw();t.Q6J("ngClass",t.VKq(5,Ma,a===t.lcZ(1,3,o.selectedRecord$))),t.xp6(2),t.Q6J("ngForOf",i.keyColumn),t.xp6(1),t.Q6J("ngForOf",i.valueColumn)}}function Ha(e,n){if(1&e&&(t.TgZ(0,"table",9),t.TgZ(1,"tr"),t.YNc(2,Ra,2,1,"th",10),t.YNc(3,Ja,2,1,"th",10),t.qZA(),t.YNc(4,Ba,4,7,"tr",11),t.qZA()),2&e){const a=t.oxw().ngIf,i=t.oxw().ngIf;t.xp6(2),t.Q6J("ngForOf",i.keyColumn),t.xp6(1),t.Q6J("ngForOf",i.valueColumn),t.xp6(1),t.Q6J("ngForOf",a)}}function Fa(e,n){if(1&e&&(t.ynx(0),t.YNc(1,Ha,5,3,"table",8),t.BQk()),2&e){const a=n.ngIf;t.oxw(2);const i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.length)("ngIfElse",i)}}function Ea(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"app-detail-pane"),t.YNc(2,Ia,5,2,"ng-container",2),t.ALo(3,"async"),t.YNc(4,Oa,2,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.YNc(8,Fa,2,2,"ng-container",2),t.ALo(9,"async"),t.qZA(),t.qZA(),t.BQk()),2&e){const a=t.MAs(5),i=t.oxw(),o=t.MAs(3);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,i.selectedRecord$))("ngIfElse",a),t.xp6(6),t.Q6J("ngIf",t.lcZ(9,6,i.records$))("ngIfElse",o)}}function Ga(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," Empty table. "),t.qZA())}let At=(()=>{class e{constructor(a,i){this.selectedRecord$=new Z.X(null);const o=a.snapshot.parent,r=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=i.yamcsClient.getTable(r,c),this.records$=i.yamcsClient.getTableData(r,c)}selectRecord(a){this.selectedRecord$.next(a)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:3,consts:[[4,"ngIf"],["nodata",""],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],[2,"padding","0 16px"],[3,"table","record"],["yaDataTable","",4,"ngIf","ngIfElse"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"mono",4,"ngFor","ngForOf"]],template:function(a,i){1&a&&(t.YNc(0,Ea,10,8,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ga,2,0,"ng-template",null,1,t.W1O)),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.table$))},directives:[p.O5,V.Z,X.j,Qa,w.O,p.sg,p.mk,N.M],pipes:[p.Ov,B.V,H],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#fafafa;cursor:pointer}"],changeDetection:0}),e})();var T=_(8966);function ja(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.value),t.xp6(2),t.Oqu(a.label)}}let za=(()=>{class e{constructor(a){this.data=a}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-show-enum-dialog"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["yaDataTable","",1,"mat-typography",2,"width","100%"],[4,"ngFor","ngForOf"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(a,i){1&a&&(t.TgZ(0,"h2",0),t._uU(1,"Enum States"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.TgZ(3,"table",1),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Label"),t.qZA(),t.qZA(),t.YNc(9,ja,5,2,"tr",2),t.qZA(),t.qZA(),t.TgZ(10,"mat-dialog-actions",3),t.TgZ(11,"button",4),t._uU(12,"Close"),t.qZA(),t.qZA()),2&a&&(t.xp6(9),t.Q6J("ngForOf",i.data.column.enumValue))},directives:[T.uh,T.xY,w.O,p.sg,T.H8,T.ZT],encapsulation:2}),e})();function Va(e,n){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit;return t.oxw(2).showEnum(o)}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function Xa(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Wa(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Va,3,1,"ng-container",6),t.YNc(5,Xa,2,1,"ng-container",6),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type)}}function Ka(e,n){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit;return t.oxw(2).showEnum(o)}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function tn(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function en(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Ka,3,1,"ng-container",6),t.YNc(5,tn,2,1,"ng-container",6),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type)}}function an(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function nn(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,an,2,0,"span",6),t.BQk()),2&e){const a=n.$implicit,i=n.last;t.xp6(1),t.hij(" ",a,""),t.xp6(1),t.Q6J("ngIf",!i)}}function on(e,n){if(1&e&&(t.ynx(0),t.YNc(1,nn,3,2,"ng-container",4),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.histogramColumn)}}function sn(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function rn(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Time partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.AsE(" ",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn,"('",null==a.partitioningInfo?null:a.partitioningInfo.timePartitionSchema,"') ")}}function cn(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Value partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.hij(" ",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn," ")}}function ln(e,n){if(1&e&&(t.TgZ(0,"div",1),t.TgZ(1,"h3"),t._uU(2,"Key"),t.qZA(),t.TgZ(3,"table",2),t.TgZ(4,"tr"),t.TgZ(5,"th",3),t._uU(6,"Column"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type"),t.qZA(),t.qZA(),t.YNc(9,Wa,6,3,"tr",4),t.qZA(),t.TgZ(10,"p"),t._uU(11,"\xa0"),t.qZA(),t.TgZ(12,"h3"),t._uU(13,"Value"),t.qZA(),t.TgZ(14,"table",2),t.TgZ(15,"tr"),t.TgZ(16,"th",3),t._uU(17,"Column"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Type"),t.qZA(),t.qZA(),t.YNc(20,en,6,3,"tr",4),t.qZA(),t.TgZ(21,"p"),t._uU(22,"\xa0"),t.qZA(),t.TgZ(23,"h3"),t._uU(24,"Options"),t.qZA(),t.TgZ(25,"dl",5),t.TgZ(26,"dt"),t._uU(27,"Format version"),t.qZA(),t.TgZ(28,"dd"),t._uU(29),t.qZA(),t.TgZ(30,"dt"),t._uU(31,"Storage engine"),t.qZA(),t.TgZ(32,"dd"),t._uU(33),t.qZA(),t.TgZ(34,"dt"),t._uU(35,"Tablespace"),t.qZA(),t.TgZ(36,"dd"),t._uU(37),t.qZA(),t.TgZ(38,"dt"),t._uU(39,"Compressed"),t.qZA(),t.TgZ(40,"dd"),t._uU(41),t.qZA(),t.TgZ(42,"dt"),t._uU(43,"Histogram"),t.qZA(),t.TgZ(44,"dd"),t.YNc(45,on,2,1,"ng-container",6),t.YNc(46,sn,2,0,"ng-container",6),t.qZA(),t.TgZ(47,"dt"),t._uU(48,"Partition by"),t.qZA(),t.TgZ(49,"dd"),t._uU(50),t.ALo(51,"lowercase"),t.qZA(),t.YNc(52,rn,5,2,"ng-container",6),t.YNc(53,cn,5,1,"ng-container",6),t.qZA(),t.qZA()),2&e){const a=n.ngIf;t.xp6(9),t.Q6J("ngForOf",a.keyColumn),t.xp6(11),t.Q6J("ngForOf",a.valueColumn),t.xp6(9),t.Oqu(a.formatVersion),t.xp6(4),t.Oqu(a.storageEngine),t.xp6(4),t.Oqu(a.tablespace||"-"),t.xp6(4),t.Oqu(a.compressed?"yes":"no"),t.xp6(4),t.Q6J("ngIf",a.histogramColumn),t.xp6(1),t.Q6J("ngIf",!a.histogramColumn),t.xp6(4),t.Oqu(t.lcZ(51,11,null==a.partitioningInfo?null:a.partitioningInfo.type)||"-"),t.xp6(2),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn),t.xp6(1),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn)}}let xt=(()=>{class e{constructor(a,i,o){this.dialog=o;const r=a.snapshot.parent,c=r.parent.paramMap.get("database"),m=r.paramMap.get("table");this.table$=i.yamcsClient.getTable(c,m)}showEnum(a){this.dialog.open(za,{width:"400px",data:{column:a}})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(T.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable",""],["width","200"],[4,"ngFor","ngForOf"],[1,"dl-horizontal"],[4,"ngIf"],[2,"white-space","nowrap"],["matTooltip","Show enum states",1,"enum",3,"click"]],template:function(a,i){1&a&&(t.YNc(0,ln,54,13,"div",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.table$))},directives:[p.O5,w.O,p.sg,D.gM],pipes:[p.Ov,p.i8],styles:[".enum[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0}),e})();function pn(e,n){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let yt=(()=>{class e{constructor(a,i,o){this.yamcs=i;const r=a.snapshot.parent.paramMap.get("database"),c=a.snapshot.paramMap.get("table");o.setTitle(c),this.table$=i.yamcsClient.getTable(r,c)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(a,i){1&a&&(t.YNc(0,pn,2,0,"ng-container",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.table$))},directives:[p.O5,u.lC],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function mn(e,n){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("innerHTML",i.formatSQL(a.script),t.oJD)}}let Ut=(()=>{class e{constructor(a,i){const o=a.snapshot.parent,r=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=i.yamcsClient.getTable(r,c)}formatSQL(a){return Tt(a)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(a,i){1&a&&(t.YNc(0,mn,2,1,"div",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.table$))},directives:[p.O5],pipes:[p.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0}),e})();function un(e,n){1&e&&(t.TgZ(0,"th",9),t._uU(1,"Name"),t.qZA())}function _n(e,n){if(1&e&&(t.TgZ(0,"td",10),t.TgZ(1,"a",11),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function dn(e,n){1&e&&t._UZ(0,"th",12)}function gn(e,n){1&e&&t._UZ(0,"td",10)}function fn(e,n){1&e&&t._UZ(0,"tr",13)}function hn(e,n){1&e&&t._UZ(0,"tr",14)}let vt=(()=>{class e{constructor(a,i){this.yamcs=i,this.displayedColumns=["name","actions"],this.dataSource=new s.by;const r=a.snapshot.parent.paramMap.get("database");i.yamcsClient.getTables(r).then(c=>{this.dataSource.data=c})}ngAfterViewInit(){this.dataSource.sort=this.sort}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,un,2,0,"th",3),t.YNc(4,_n,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,dn,1,0,"th",6),t.YNc(7,gn,1,0,"td",4),t.BQk(),t.YNc(8,fn,1,0,"tr",7),t.YNc(9,hn,1,0,"tr",8),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})();function Tn(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function Zn(e,n){if(1&e&&(t.TgZ(0,"td",12),t.TgZ(1,"a",13),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function bn(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function An(e,n){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.tablespace," ")}}function xn(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Path"),t.qZA())}function yn(e,n){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.path," ")}}function Un(e,n){1&e&&t._UZ(0,"th",14)}function vn(e,n){1&e&&t._UZ(0,"td",12)}function qn(e,n){1&e&&t._UZ(0,"tr",15)}function Cn(e,n){1&e&&t._UZ(0,"tr",16)}let qt=(()=>{class e{constructor(a,i){this.yamcs=a,this.displayedColumns=["name","tablespace","path","actions"],this.dataSource=new s.by,i.setTitle("Databases"),a.yamcsClient.getDatabases().then(o=>{this.dataSource.data=o})}ngAfterViewInit(){this.dataSource.sort=this.sort}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tablespace"],["matColumnDef","path"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2,"Databases"),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,Tn,2,0,"th",3),t.YNc(7,Zn,3,2,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,bn,2,0,"th",3),t.YNc(10,An,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,xn,2,0,"th",3),t.YNc(13,yn,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,Un,1,0,"th",8),t.YNc(16,vn,1,0,"td",4),t.BQk(),t.YNc(17,qn,1,0,"tr",9),t.YNc(18,Cn,1,0,"tr",10),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[A,x,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})();var Q=_(6087),I=_(4834),Ct=_(5682),wn=_(3329);function Dn(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"dl",21),t.TgZ(2,"dt"),t._uU(3,"Cumulative Read"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.ALo(6,"formatBytes"),t.qZA(),t.TgZ(7,"dt"),t._uU(8,"Cumulative Written"),t.qZA(),t.TgZ(9,"dd"),t._uU(10),t.ALo(11,"formatBytes"),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Rx"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.ALo(16,"dataRate"),t.qZA(),t.TgZ(17,"dt"),t._uU(18,"Tx"),t.qZA(),t.TgZ(19,"dd"),t._uU(20),t.ALo(21,"dataRate"),t.qZA(),t.qZA(),t.BQk()),2&e){const a=n.ngIf;t.xp6(5),t.Oqu(t.lcZ(6,4,a.readBytes)),t.xp6(5),t.Oqu(t.lcZ(11,6,a.writtenBytes)),t.xp6(5),t.Oqu(t.lcZ(16,8,8*a.readThroughput)),t.xp6(5),t.Oqu(t.lcZ(21,10,8*a.writeThroughput))}}function Sn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Id"),t.qZA())}function Pn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.id)}}function Nn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"User Agent"),t.qZA())}function Yn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu((null==a.httpRequest?null:a.httpRequest.userAgent)||"-")}}function kn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Protocol"),t.qZA())}function Qn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu((null==a.httpRequest?null:a.httpRequest.protocol)||"-")}}function In(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Remote Address"),t.qZA())}function On(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.remoteAddress||"-")}}function Rn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Read"),t.qZA())}function Jn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.readBytes)||"-")}}function $n(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Written"),t.qZA())}function Ln(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.writtenBytes)||"-")}}function Mn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Rx"),t.qZA())}function Bn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.readThroughput))}}function Hn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Tx"),t.qZA())}function Fn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.writeThroughput))}}function En(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Request"),t.qZA())}function Gn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.AsE(" ",null==a.httpRequest?null:a.httpRequest.method," ",null==a.httpRequest?null:a.httpRequest.uri," ")}}function jn(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Authorization"),t.qZA())}function zn(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.username||"-"," ")}}function Vn(e,n){1&e&&t._UZ(0,"th",24)}function Xn(e,n){1&e&&t._UZ(0,"td",23)}function Wn(e,n){1&e&&t._UZ(0,"tr",25)}function Kn(e,n){1&e&&t._UZ(0,"tr",26)}let wt=(()=>{class e{constructor(a,i,o){this.yamcs=a,this.displayedColumns=["id","protocol","remoteAddress","readBytes","writtenBytes","readThroughput","writeThroughput","request","authorization","actions"],this.tableTrackerFn=(r,c)=>c.id,this.traffic$=new Z.X(null),this.dataSource=new s.by,i.setTitle("HTTP traffic"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getHttpTraffic().then(a=>{this.traffic$.next(a),this.dataSource.data=a.connections||[]})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(J.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&(t.Gf(g.YE,5),t.Gf(Q.NW,5)),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},decls:47,vars:10,consts:[[1,"panel-content"],[4,"ngIf"],[1,"section-divider"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userAgent"],["matColumnDef","protocol"],["matColumnDef","remoteAddress"],["matColumnDef","readBytes"],["matColumnDef","writtenBytes"],["matColumnDef","readThroughput"],["matColumnDef","writeThroughput"],["matColumnDef","request"],["matColumnDef","authorization"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],[1,"dl-horizontal","no-lead"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," HTTP traffic "),t.qZA(),t.TgZ(3,"div",0),t.YNc(4,Dn,22,12,"ng-container",1),t.ALo(5,"async"),t.TgZ(6,"div",2),t._UZ(7,"mat-divider"),t.qZA(),t.TgZ(8,"h4"),t._uU(9,"Current Connections"),t.qZA(),t.TgZ(10,"table",3),t.ynx(11,4),t.YNc(12,Sn,2,0,"th",5),t.YNc(13,Pn,2,1,"td",6),t.BQk(),t.ynx(14,7),t.YNc(15,Nn,2,0,"th",5),t.YNc(16,Yn,2,1,"td",6),t.BQk(),t.ynx(17,8),t.YNc(18,kn,2,0,"th",5),t.YNc(19,Qn,2,1,"td",6),t.BQk(),t.ynx(20,9),t.YNc(21,In,2,0,"th",5),t.YNc(22,On,2,1,"td",6),t.BQk(),t.ynx(23,10),t.YNc(24,Rn,2,0,"th",5),t.YNc(25,Jn,3,3,"td",6),t.BQk(),t.ynx(26,11),t.YNc(27,$n,2,0,"th",5),t.YNc(28,Ln,3,3,"td",6),t.BQk(),t.ynx(29,12),t.YNc(30,Mn,2,0,"th",5),t.YNc(31,Bn,3,3,"td",6),t.BQk(),t.ynx(32,13),t.YNc(33,Hn,2,0,"th",5),t.YNc(34,Fn,3,3,"td",6),t.BQk(),t.ynx(35,14),t.YNc(36,En,2,0,"th",5),t.YNc(37,Gn,2,2,"td",6),t.BQk(),t.ynx(38,15),t.YNc(39,jn,2,0,"th",5),t.YNc(40,zn,2,1,"td",6),t.BQk(),t.ynx(41,16),t.YNc(42,Vn,1,0,"th",17),t.YNc(43,Xn,1,0,"td",6),t.BQk(),t.YNc(44,Wn,1,0,"tr",18),t.YNc(45,Kn,1,0,"tr",19),t.qZA(),t._UZ(46,"mat-paginator",20),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,8,i.traffic$)),t.xp6(6),t.Q6J("dataSource",i.dataSource)("trackBy",i.tableTrackerFn),t.xp6(34),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},directives:[A,x,p.O5,I.d,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,Q.NW],pipes:[p.Ov,Ct.b,wn.z],encapsulation:2,changeDetection:0}),e})();function ti(e,n){1&e&&t._UZ(0,"th",21)}function ei(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"td",22),t.TgZ(1,"input",23),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,m=t.oxw(2);return o?m.selection.toggle(c):null}),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(a))}}function ai(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Type"),t.qZA())}function ni(e,n){1&e&&(t.TgZ(0,"mat-icon",27),t._uU(1,"person"),t.qZA())}function ii(e,n){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,ni,2,0,"mat-icon",26),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.user)}}function oi(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Member"),t.qZA())}function si(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function ri(e,n){1&e&&t._UZ(0,"tr",29)}function ci(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",30),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(2).toggleOne(r)}),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw(2);t.ekj("selected",i.selection.isSelected(a))}}function li(e,n){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,ti,1,0,"th",12),t.YNc(3,ei,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,ai,2,0,"th",15),t.YNc(6,ii,2,1,"td",16),t.BQk(),t.ynx(7,17),t.YNc(8,oi,2,0,"th",18),t.YNc(9,si,2,1,"td",16),t.BQk(),t.YNc(10,ri,1,0,"tr",19),t.YNc(11,ci,1,2,"tr",20),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function pi(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Dt=(()=>{class e{constructor(a,i,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","type","name"],this.filterControl=new l.NI,this.dataSource=new s.by,this.selection=new z.Ov(!0,[]);const c=o.items.filter(m=>m.user).map(m=>m.user.name);i.yamcsClient.getUsers().then(m=>{const h=(m||[]).filter(f=>-1===c.indexOf(f.name)).map(f=>({label:f.displayName||f.name,user:f}));this.dataSource.data=h})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,i)=>a.label.toLowerCase().indexOf(i)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.so),t.Y36(d.C),t.Y36(T.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-members-dialog"]],viewQuery:function(a,i){if(1&a&&t.Gf(Q.NW,7),2&a){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter users",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","width","1"],["mat-cell",""],["matTooltip","User","style","vertical-align: middle",4,"ngIf"],["matTooltip","User",2,"vertical-align","middle"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"h2",0),t._uU(1,"Add members"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"div",2),t._UZ(4,"app-search-filter",3),t.qZA(),t.YNc(5,li,12,3,"table",4),t.YNc(6,pi,2,0,"app-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7),t.TgZ(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return i.save()}),t._uU(12,"ADD"),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("ngIf",i.dataSource),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",i.selection.isEmpty()))},directives:[T.uh,T.xY,P.a,l.JJ,l.oH,p.O5,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,y.Hw,D.gM,s.as,s.XQ,s.nj,s.Gk,N.M,Q.NW,T.H8,T.ZT],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),e})();var Y=_(4454),E=_(1711);function mi(e,n){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",13),t._uU(2,"No rows to display"),t.qZA(),t.qZA())}function ui(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"mat-icon",14),t._uU(3,"person"),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15),t.TgZ(7,"app-text-action",16),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(2).deleteItem(r)}),t._uU(8,"DELETE"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(5),t.Oqu(a.label)}}function _i(e,n){if(1&e&&(t.TgZ(0,"table",9),t.TgZ(1,"tr"),t.TgZ(2,"th",10),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,mi,3,0,"tr",11),t.YNc(8,ui,9,1,"tr",12),t.qZA()),2&e){const a=n.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}let St=(()=>{class e{constructor(a,i,o,r,c,m,h,f){this.router=o,this.route=r,this.yamcs=c,this.dialog=m,this.messageService=h,this.location=f,this.memberItems$=new Z.X([]),i.setTitle("Create a Group"),this.form=a.group({name:new l.NI("",[l.kI.required]),description:new l.NI})}showAddMembersDialog(){this.dialog.open(Dt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(i=>{i&&this.updateMemberItems([...this.memberItems$.value,...i])})}updateMemberItems(a){a.sort((i,o)=>i.label<o.label?-1:i.label>o.label?1:0),this.memberItems$.next(a)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(i=>i!==a))}onConfirm(){const a={name:this.form.value.name,description:this.form.value.description,users:this.memberItems$.value.filter(i=>i.user).map(i=>i.user.name)};this.yamcs.yamcsClient.createGroup(a).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(i=>this.messageService.showError(i))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b.Dx),t.Y36(u.F0),t.Y36(u.gz),t.Y36(d.C),t.Y36(T.uw),t.Y36(Y.e),t.Y36(p.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:33,vars:5,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],[1,"ya-button",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",0),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5," Create group "),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t.TgZ(8,"label"),t._uU(9," Group name"),t._UZ(10,"br"),t._UZ(11,"input",3),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t._UZ(15,"textarea",4),t.qZA(),t.qZA(),t.TgZ(16,"p"),t._uU(17,"\xa0"),t.qZA(),t.TgZ(18,"button",5),t.NdJ("click",function(){return i.showAddMembersDialog()}),t.TgZ(19,"mat-icon"),t._uU(20,"add_circle_outline"),t.qZA(),t._uU(21," ADD MEMBERS "),t.qZA(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.YNc(24,_i,9,2,"table",6),t.ALo(25,"async"),t.TgZ(26,"p"),t._uU(27,"\xa0"),t.qZA(),t.TgZ(28,"div",7),t.TgZ(29,"button",5),t.NdJ("click",function(){return i.location.back()}),t._uU(30,"Cancel"),t.qZA(),t.TgZ(31,"button",8),t.NdJ("click",function(){return i.onConfirm()}),t._uU(32,"CREATE"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(7),t.Q6J("formGroup",i.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(25,3,i.memberItems$)),t.xp6(7),t.Q6J("disabled",!i.form.valid))},directives:[A,x,U.zs,u.yS,y.Hw,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.O5,w.O,p.sg,D.gM,E.l],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})(),di=(()=>{class e{constructor(a){this.data=a}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-application-credentials-dialog"]],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"dl-horizontal"],["align","end"],["mat-dialog-close","",1,"ya-button","primary"]],template:function(a,i){1&a&&(t.TgZ(0,"h2",0),t._uU(1,"Service account created"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"dl",2),t.TgZ(6,"dt"),t._uU(7,"Application ID"),t.qZA(),t.TgZ(8,"dd"),t.TgZ(9,"pre"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"dt"),t._uU(12,"Application Secret"),t.qZA(),t.TgZ(13,"dd"),t.TgZ(14,"pre"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"strong"),t._uU(17,"Important: "),t.qZA(),t._uU(18," Take note of these application credentials. It is not possible to display them after closing this dialog.\n"),t.qZA(),t.TgZ(19,"mat-dialog-actions",3),t.TgZ(20,"button",4),t._uU(21,"CLOSE"),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.hij("The service account '",i.data.name,"' was created successfully. You can use this account to connect an application to Yamcs."),t.xp6(6),t.Oqu(i.data.applicationId),t.xp6(5),t.Oqu(i.data.applicationSecret))},directives:[T.uh,T.xY,T.H8,T.ZT],encapsulation:2,changeDetection:0}),e})(),Pt=(()=>{class e{constructor(a,i,o,r,c,m,h,f){this.router=o,this.route=r,this.yamcs=c,this.messageService=m,this.location=h,this.dialog=f,i.setTitle("Create service account"),this.form=a.group({name:new l.NI("",[l.kI.required])})}onConfirm(){this.yamcs.yamcsClient.createServiceAccount({name:this.form.value.name}).then(i=>this.onServerConfirm(i)).catch(i=>this.messageService.showError(i))}onServerConfirm(a){this.dialog.open(di,{disableClose:!0,closeOnNavigation:!1,data:a,width:"550px"}).afterClosed().subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b.Dx),t.Y36(u.F0),t.Y36(u.gz),t.Y36(d.C),t.Y36(Y.e),t.Y36(p.Ye),t.Y36(T.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:29,vars:4,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],[2,"margin-top","32px"],["type","checkbox",3,"disabled","checked"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",0),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5," Create service account "),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t.TgZ(8,"label"),t._uU(9," Service account name "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br"),t._UZ(13,"input",4),t.qZA(),t.TgZ(14,"h2",5),t._uU(15,"Scopes"),t.qZA(),t.TgZ(16,"label"),t._UZ(17,"input",6),t._uU(18," Impersonation"),t._UZ(19,"br"),t.TgZ(20,"span",3),t._uU(21,"Grants permission to access the API on behalf of any user in the system."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.TgZ(24,"div",7),t.TgZ(25,"button",8),t.NdJ("click",function(){return i.location.back()}),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",9),t.NdJ("click",function(){return i.onConfirm()}),t._uU(28,"CREATE"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(7),t.Q6J("formGroup",i.form),t.xp6(10),t.Q6J("disabled",!0)("checked",!0),t.xp6(10),t.Q6J("disabled",!i.form.valid))},directives:[A,x,U.zs,u.yS,y.Hw,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],encapsulation:2,changeDetection:0}),e})(),Nt=(()=>{class e{constructor(a,i,o,r,c){this.router=o,this.yamcs=r,this.messageService=c,i.setTitle("Create a User"),this.form=a.group({name:new l.NI("",[l.kI.required]),displayName:new l.NI("",[l.kI.required]),email:new l.NI("",[l.kI.required]),password:new l.NI,passwordConfirmation:new l.NI})}onConfirm(){const a=this.form.value,i={name:a.name,displayName:a.displayName,email:a.email};if(a.password){if(a.password!==a.passwordConfirmation)return void alert("Password confirmation does not match password");i.password=a.password}this.yamcs.yamcsClient.createUser(i).then(()=>this.router.navigateByUrl(`/admin/iam/users/${a.name}`)).catch(o=>this.messageService.showError(o))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b.Dx),t.Y36(u.F0),t.Y36(d.C),t.Y36(Y.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:53,vars:2,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],["formControlName","displayName","type","text"],["formControlName","email","type","text"],[1,"section-divider"],["formControlName","password","type","password"],["formControlName","passwordConfirmation","type","password"],[1,"action-bar"],["routerLink","..",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",0),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5," Create user "),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t.TgZ(8,"label"),t._uU(9," Username "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br"),t._UZ(13,"input",4),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"label"),t._uU(16," Display name "),t.TgZ(17,"span",3),t._uU(18,"(required)"),t.qZA(),t._UZ(19,"br"),t._UZ(20,"input",5),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"label"),t._uU(23," Email "),t.TgZ(24,"span",3),t._uU(25,"(required)"),t.qZA(),t._UZ(26,"br"),t._UZ(27,"input",6),t.qZA(),t.TgZ(28,"p"),t._uU(29,"\xa0"),t.qZA(),t.TgZ(30,"div",7),t._UZ(31,"mat-divider"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"label"),t._uU(34," Password "),t.TgZ(35,"span",3),t._uU(36,"(optional)"),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"span",3),t._uU(39,"User without a password may still be able to login if an external identity provider is configured."),t.qZA(),t._UZ(40,"input",8),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"label"),t._uU(43," Password confirmation"),t._UZ(44,"br"),t._UZ(45,"input",9),t.qZA(),t.qZA(),t.TgZ(46,"p"),t._uU(47,"\xa0"),t.qZA(),t.TgZ(48,"div",10),t.TgZ(49,"button",11),t._uU(50,"Cancel"),t.qZA(),t.TgZ(51,"button",12),t.NdJ("click",function(){return i.onConfirm()}),t._uU(52,"CREATE"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(7),t.Q6J("formGroup",i.form),t.xp6(44),t.Q6J("disabled",!i.form.valid))},directives:[A,x,U.zs,u.yS,y.Hw,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,I.d,u.rH],encapsulation:2,changeDetection:0}),e})();function gi(e,n){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",13),t._uU(2,"No rows to display"),t.qZA(),t.qZA())}function fi(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"mat-icon",14),t._uU(3,"person"),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15),t.TgZ(7,"app-text-action",16),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(3).deleteItem(r)}),t._uU(8,"DELETE"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(5),t.Oqu(a.label)}}function hi(e,n){if(1&e&&(t.TgZ(0,"table",10),t.TgZ(1,"tr"),t.TgZ(2,"th",11),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,gi,3,0,"tr",0),t.YNc(8,fi,9,1,"tr",12),t.qZA()),2&e){const a=n.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function Ti(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"label"),t._uU(6," Name"),t._UZ(7,"br"),t._UZ(8,"input",3),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"label"),t._uU(11," Description "),t._UZ(12,"textarea",4),t.qZA(),t.qZA(),t.TgZ(13,"p"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"button",5),t.NdJ("click",function(){return t.CHM(a),t.oxw().showAddMembersDialog()}),t.TgZ(16,"mat-icon"),t._uU(17,"add_circle_outline"),t.qZA(),t._uU(18," ADD MEMBERS "),t.qZA(),t.TgZ(19,"p"),t._uU(20,"\xa0"),t.qZA(),t.YNc(21,hi,9,2,"table",6),t.ALo(22,"async"),t.TgZ(23,"p"),t._uU(24,"\xa0"),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"button",8),t.NdJ("click",function(){return t.CHM(a),t.oxw().location.back()}),t._uU(27,"Cancel"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){return t.CHM(a),t.oxw().onConfirm()}),t.ALo(29,"async"),t._uU(30,"SAVE CHANGES"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.ngIf,i=t.oxw();t.xp6(2),t.hij(" Edit Group: ",a.name," "),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(22,4,i.memberItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(29,6,i.dirty$)||!i.form.valid)}}let Yt=(()=>{class e{constructor(a,i,o,r,c,m,h,f){this.router=o,this.yamcs=c,this.messageService=m,this.dialog=h,this.location=f,this.memberItems$=new Z.X([]),this.dirty$=new Z.X(!1),i.setTitle("Edit Group");const S=r.snapshot.paramMap.get("name");this.group$=c.yamcsClient.getGroup(S),this.group$.then(q=>{this.group=q,this.form=a.group({name:new l.NI(q.name),description:new l.NI(q.description)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const $=[];if(q.users)for(const R of q.users)$.push({label:R.displayName||R.name,user:R});this.updateMemberItems($,!1)})}showAddMembersDialog(){this.dialog.open(Dt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(i=>{i&&this.updateMemberItems([...this.memberItems$.value,...i])})}updateMemberItems(a,i=!0){a.sort((o,r)=>o.label<r.label?-1:o.label>r.label?1:0),this.memberItems$.next(a),this.dirty$.next(i)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(i=>i!==a))}onConfirm(){const a=this.form.value,i={newName:a.name,description:a.description,memberInfo:{users:this.memberItems$.value.filter(r=>r.user).map(r=>r.user.name)}},o=a.name;this.yamcs.yamcsClient.editGroup(this.group.name,i).then(()=>this.router.navigateByUrl(`/admin/iam/groups/${o}`)).catch(r=>this.messageService.showError(r))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b.Dx),t.Y36(u.F0),t.Y36(u.gz),t.Y36(d.C),t.Y36(Y.e),t.Y36(T.uw),t.Y36(p.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,i){1&a&&(t.YNc(0,Ti,31,8,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.group$))},directives:[p.O5,A,x,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,U.lW,y.Hw,w.O,p.sg,D.gM,E.l],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function Zi(e,n){1&e&&t._UZ(0,"th",19)}function bi(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"input",21),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,m=t.oxw(2);return o?m.selection.toggle(c):null}),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("checked",i.selection.isSelected(a))}}function Ai(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Role"),t.qZA())}function xi(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function yi(e,n){1&e&&t._UZ(0,"tr",24)}function Ui(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(2).toggleOne(r)}),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw(2);t.ekj("selected",i.selection.isSelected(a))}}function vi(e,n){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,Zi,1,0,"th",12),t.YNc(3,bi,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,Ai,2,0,"th",15),t.YNc(6,xi,2,1,"td",16),t.BQk(),t.YNc(7,yi,1,0,"tr",17),t.YNc(8,Ui,1,2,"tr",18),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function qi(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Ci=(()=>{class e{constructor(a,i,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","name"],this.filterControl=new l.NI,this.dataSource=new s.by,this.selection=new z.Ov(!0,[]);const c=o.items.filter(m=>m.role).map(m=>m.role.name);i.yamcsClient.getRoles().then(m=>{const h=(m||[]).filter(f=>-1===c.indexOf(f.name)).map(f=>({label:f.name,role:f}));this.dataSource.data=h})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,i)=>a.label.toLowerCase().indexOf(i)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.so),t.Y36(d.C),t.Y36(T.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-roles-dialog"]],viewQuery:function(a,i){if(1&a&&t.Gf(Q.NW,7),2&a){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter roles",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(a,i){1&a&&(t.TgZ(0,"h2",0),t._uU(1,"Add roles"),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"div",2),t._UZ(4,"app-search-filter",3),t.qZA(),t.YNc(5,vi,9,3,"table",4),t.YNc(6,qi,2,0,"app-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7),t.TgZ(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return i.save()}),t._uU(12,"ADD"),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("ngIf",i.dataSource),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",i.selection.isEmpty()))},directives:[T.uh,T.xY,P.a,l.JJ,l.oH,p.O5,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,N.M,Q.NW,T.H8,T.ZT],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),e})();var wi=_(2368);function Di(e,n){1&e&&(t.TgZ(0,"span",8),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function Si(e,n){1&e&&(t.TgZ(0,"span",8),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function Pi(e,n){1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td",17),t._uU(2,"No rows to display"),t.qZA(),t.qZA())}function Ni(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t.TgZ(4,"app-text-action",19),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(3).deleteItem(r)}),t._uU(5,"DELETE"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.label)}}function Yi(e,n){if(1&e&&(t.TgZ(0,"table",15),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Role"),t.qZA(),t._UZ(4,"th"),t.qZA(),t.YNc(5,Pi,3,0,"tr",0),t.YNc(6,Ni,6,1,"tr",16),t.qZA()),2&e){const a=n.ngIf;t.xp6(5),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function ki(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"label"),t._uU(6," Username"),t._UZ(7,"br"),t._UZ(8,"input",3),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"label"),t._uU(11," Display name"),t._UZ(12,"br"),t._UZ(13,"input",4),t.YNc(14,Di,2,0,"span",5),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"label"),t._uU(17," Email"),t._UZ(18,"br"),t._UZ(19,"input",6),t.YNc(20,Si,2,0,"span",5),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"label"),t._uU(23," Active"),t._UZ(24,"br"),t._UZ(25,"mat-slide-toggle",7),t._UZ(26,"br"),t.TgZ(27,"span",8),t._uU(28,'Inactive users are considered "blocked". They are not or no longer able to login.'),t.qZA(),t.qZA(),t._UZ(29,"br"),t.TgZ(30,"label"),t._uU(31," Superuser"),t._UZ(32,"br"),t._UZ(33,"mat-slide-toggle",9),t._UZ(34,"br"),t.TgZ(35,"span",8),t._uU(36,"Superusers bypass any permission checks. This attribute is intended for system administrators only."),t.qZA(),t.qZA(),t.TgZ(37,"p"),t._uU(38,"\xa0"),t.qZA(),t.TgZ(39,"button",10),t.NdJ("click",function(){return t.CHM(a),t.oxw().showAddRolesDialog()}),t.TgZ(40,"mat-icon"),t._uU(41,"add_circle_outline"),t.qZA(),t._uU(42," ADD ROLES "),t.qZA(),t.TgZ(43,"p"),t._uU(44,"\xa0"),t.qZA(),t.YNc(45,Yi,7,2,"table",11),t.ALo(46,"async"),t.qZA(),t.TgZ(47,"p"),t._uU(48,"\xa0"),t.qZA(),t.TgZ(49,"div",12),t.TgZ(50,"button",13),t.NdJ("click",function(){return t.CHM(a),t.oxw().location.back()}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",14),t.NdJ("click",function(){return t.CHM(a),t.oxw().onConfirm()}),t.ALo(53,"async"),t._uU(54,"SAVE CHANGES"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.ngIf,i=t.oxw();t.xp6(2),t.hij(" Edit User: ",a.displayName||a.name," "),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("value",a.name),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(25),t.Q6J("ngIf",t.lcZ(46,7,i.roleItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(53,9,i.dirty$)||!i.form.valid)}}let kt=(()=>{class e{constructor(a,i,o,r,c,m,h,f){this.router=o,this.route=r,this.yamcs=c,this.messageService=m,this.dialog=h,this.location=f,this.roleItems$=new Z.X([]),this.dirty$=new Z.X(!1),i.setTitle("Edit User");const S=r.snapshot.paramMap.get("username");this.user$=c.yamcsClient.getUser(S),this.user$.then(q=>{this.user=q,this.form=a.group({displayName:new l.NI(q.displayName),email:new l.NI(q.email),active:new l.NI(q.active),superuser:new l.NI(q.superuser)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const $=[];if(q.roles)for(const R of q.roles)$.push({label:R.name,role:R});this.updateRoleItems($,!1)})}showAddRolesDialog(){this.dialog.open(Ci,{data:{items:this.roleItems$.value},width:"600px"}).afterClosed().subscribe(i=>{i&&this.updateRoleItems([...this.roleItems$.value,...i])})}updateRoleItems(a,i=!0){a.sort((o,r)=>o.label<r.label?-1:o.label>r.label?1:0),this.roleItems$.next(a),this.dirty$.next(i)}deleteItem(a){this.updateRoleItems(this.roleItems$.value.filter(i=>i!==a))}onConfirm(){const a=this.form.value,i={roleAssignment:{roles:this.roleItems$.value.filter(o=>o.role).map(o=>o.role.name)}};a.displayName!==this.user.displayName&&(i.displayName=a.displayName),a.email!==this.user.email&&(i.email=a.email),a.active!==this.user.active&&(i.active=a.active),a.superuser!==this.user.superuser&&(i.superuser=a.superuser),this.yamcs.yamcsClient.editUser(this.user.name,i).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(o=>this.messageService.showError(o))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b.Dx),t.Y36(u.F0),t.Y36(u.gz),t.Y36(d.C),t.Y36(Y.e),t.Y36(T.uw),t.Y36(p.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["disabled","","type","text",3,"value"],["formControlName","displayName","type","text"],["class","hint",4,"ngIf"],["formControlName","email","type","text"],["formControlName","active"],[1,"hint"],["formControlName","superuser"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","2"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,i){1&a&&(t.YNc(0,ki,55,11,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.user$))},directives:[p.O5,A,x,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,wi.Rr,U.lW,y.Hw,w.O,p.sg,E.l],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function Qi(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"Description"),t.qZA(),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(6),t.Oqu(a.description||"-")}}const Ii=function(e){return["/admin/iam/users",e]};function Oi(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"mat-icon",6),t._uU(2,"person"),t.qZA(),t.TgZ(3,"a",7),t._uU(4),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(2,Ii,a.name)),t.xp6(1),t.Oqu(a.displayName||a.name)}}function Ri(e,n){if(1&e&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2),t.TgZ(3,"a",1),t.TgZ(4,"mat-icon"),t._uU(5,"edit"),t.qZA(),t._uU(6," EDIT GROUP "),t.qZA(),t.qZA(),t.TgZ(7,"div",2),t.YNc(8,Qi,7,1,"ng-container",0),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13),t.qZA(),t.YNc(14,Oi,5,4,"div",4),t.qZA(),t.qZA()),2&e){const a=n.ngIf;t.xp6(2),t.hij(" ",a.name," \xa0\xa0\xa0 "),t.xp6(6),t.Q6J("ngIf",a.description),t.xp6(5),t.hij("",(null==a.users?null:a.users.length)||0," members"),t.xp6(1),t.Q6J("ngForOf",a.users)}}let Qt=(()=>{class e{constructor(a,i,o){this.yamcs=i,this.title=o,this.group$=new Z.X(null),a.paramMap.subscribe(r=>{const c=r.get("name");this.changeGroup(c)})}changeGroup(a){this.yamcs.yamcsClient.getGroup(a).then(i=>{this.group$.next(i),this.title.setTitle(i.name)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","color","primary","routerLink","edit"],[1,"panel-content","ya-link"],[1,"section-divider"],[4,"ngFor","ngForOf"],[2,"white-space","pre-wrap"],["matTooltip","User",1,"icon16",2,"vertical-align","middle"],[3,"routerLink"]],template:function(a,i){1&a&&(t.YNc(0,Ri,15,4,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.group$))},directives:[p.O5,A,x,U.zs,u.yS,y.Hw,I.d,p.sg,D.gM],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();var G=_(8493),j=_(2181);function Ji(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Group"),t.qZA())}function $i(e,n){if(1&e&&(t.TgZ(0,"td",15),t.TgZ(1,"a",16),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function Li(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Members"),t.qZA())}function Mi(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",18),t._uU(2,"person"),t.qZA(),t._uU(3),t._UZ(4,"br"),t.BQk()),2&e){const a=n.$implicit;t.xp6(3),t.hij(" ",a.displayName||a.name," ")}}function Bi(e,n){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,Mi,5,1,"ng-container",17),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.users)}}function Hi(e,n){1&e&&t._UZ(0,"th",19)}const Fi=function(e){return[e,"edit"]};function Ei(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"td",15),t.TgZ(1,"app-more"),t.TgZ(2,"a",20),t._uU(3," Edit group "),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw().deleteGroup(r.name)}),t._uU(5," Delete group "),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,Fi,a.name))}}function Gi(e,n){1&e&&t._UZ(0,"tr",22)}function ji(e,n){1&e&&t._UZ(0,"tr",23)}function zi(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display "),t.qZA())}let It=(()=>{class e{constructor(a,i,o,r,c){this.yamcs=a,this.route=o,this.router=r,this.messageService=c,this.filterControl=new l.NI,this.displayedColumns=["name","members","actions"],this.dataSource=new s.by,i.setTitle("Groups"),this.dataSource.filterPredicate=(m,h)=>m.name.toLowerCase().indexOf(h)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getGroups().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteGroup(a){confirm(`Are you sure you want to delete group ${a}`)&&this.yamcs.yamcsClient.deleteGroup(a).then(()=>this.refresh()).catch(i=>this.messageService.showError(i))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0),t.Y36(Y.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:23,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter groups",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[4,"ngFor","ngForOf"],[1,"icon16",2,"vertical-align","middle"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Groups \xa0\xa0\xa0 "),t.TgZ(3,"a",0),t.TgZ(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," CREATE GROUP "),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",2),t._UZ(9,"app-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Ji,2,0,"th",6),t.YNc(13,$i,3,2,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,Li,2,0,"th",6),t.YNc(16,Bi,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Hi,1,0,"th",10),t.YNc(19,Ei,6,3,"td",7),t.BQk(),t.YNc(20,Gi,1,0,"tr",11),t.YNc(21,ji,1,0,"tr",12),t.qZA(),t.YNc(22,zi,2,0,"app-empty-message",13),t.qZA(),t.qZA()),2&a&&(t.xp6(9),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length))},directives:[A,x,U.zs,u.yS,y.Hw,P.a,l.JJ,l.oH,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,p.sg,G.T,j.OP,s.as,s.XQ,s.nj,s.Gk,p.O5,N.M],encapsulation:2,changeDetection:0}),e})();function Vi(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a," ")}}function Xi(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.type),t.xp6(2),t.Oqu(a.object)}}function Wi(e,n){if(1&e&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"h4"),t._uU(5,"Description"),t.qZA(),t.TgZ(6,"div",2),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",3),t._UZ(10,"mat-divider"),t.qZA(),t.TgZ(11,"h4"),t._uU(12),t.qZA(),t.YNc(13,Vi,2,1,"div",4),t._UZ(14,"br"),t.TgZ(15,"div",3),t._UZ(16,"mat-divider"),t.qZA(),t.TgZ(17,"h4"),t._uU(18),t.qZA(),t.TgZ(19,"dl"),t.YNc(20,Xi,5,2,"ng-container",4),t.qZA(),t.qZA(),t.qZA()),2&e){const a=n.ngIf;t.xp6(2),t.hij(" ",a.name," "),t.xp6(5),t.Oqu(a.description||"-"),t.xp6(5),t.hij("",(null==a.systemPrivileges?null:a.systemPrivileges.length)||0," assigned system privileges"),t.xp6(1),t.Q6J("ngForOf",a.systemPrivileges),t.xp6(5),t.hij("",(null==a.objectPrivileges?null:a.objectPrivileges.length)||0," assigned object privileges"),t.xp6(2),t.Q6J("ngForOf",a.objectPrivileges)}}let Ot=(()=>{class e{constructor(a,i,o){this.yamcs=i,this.title=o,this.role$=new Z.X(null),a.paramMap.subscribe(r=>{const c=r.get("name");this.changeRole(c)})}changeRole(a){this.yamcs.yamcsClient.getRole(a).then(i=>{this.role$.next(i),this.title.setTitle(i.name)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"panel-content","ya-link"],[2,"white-space","pre-wrap"],[1,"section-divider"],[4,"ngFor","ngForOf"]],template:function(a,i){1&a&&(t.YNc(0,Wi,21,6,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.role$))},directives:[p.O5,A,x,I.d,p.sg],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function Ki(e,n){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Role"),t.qZA())}function to(e,n){if(1&e&&(t.TgZ(0,"td",15),t.TgZ(1,"a",16),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function eo(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Default"),t.qZA())}function ao(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function no(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"close"),t.qZA())}function io(e,n){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,ao,2,0,"mat-icon",13),t.YNc(2,no,2,0,"mat-icon",13),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.default),t.xp6(1),t.Q6J("ngIf",!a.default)}}function oo(e,n){1&e&&t._UZ(0,"th",18)}function so(e,n){1&e&&t._UZ(0,"td",15)}function ro(e,n){1&e&&t._UZ(0,"tr",19)}function co(e,n){1&e&&t._UZ(0,"tr",20)}function lo(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Rt=(()=>{class e{constructor(a,i,o,r){this.yamcs=a,this.route=o,this.router=r,this.filterControl=new l.NI,this.displayedColumns=["name","default","actions"],this.dataSource=new s.by,i.setTitle("Roles"),this.dataSource.filterPredicate=(c,m)=>c.name.toLowerCase().indexOf(m)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoles().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:19,vars:5,consts:[[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Roles "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"div",1),t._UZ(5,"app-search-filter",2),t.qZA(),t.TgZ(6,"table",3),t.ynx(7,4),t.YNc(8,Ki,2,0,"th",5),t.YNc(9,to,3,2,"td",6),t.BQk(),t.ynx(10,7),t.YNc(11,eo,2,0,"th",8),t.YNc(12,io,3,2,"td",6),t.BQk(),t.ynx(13,9),t.YNc(14,oo,1,0,"th",10),t.YNc(15,so,1,0,"td",6),t.BQk(),t.YNc(16,ro,1,0,"tr",11),t.YNc(17,co,1,0,"tr",12),t.qZA(),t.YNc(18,lo,2,0,"app-empty-message",13),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length))},directives:[A,x,P.a,l.JJ,l.oH,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,p.O5,y.Hw,s.as,s.XQ,s.nj,s.Gk,N.M],encapsulation:2,changeDetection:0}),e})();function po(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Service account"),t.qZA())}function mo(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function uo(e,n){1&e&&t._UZ(0,"th",15)}function _o(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"td",14),t.TgZ(1,"app-more"),t.TgZ(2,"button",16),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw().deleteServiceAccount(r.name)}),t._uU(3," Delete service account "),t.qZA(),t.qZA(),t.qZA()}}function go(e,n){1&e&&t._UZ(0,"tr",17)}function fo(e,n){1&e&&t._UZ(0,"tr",18)}function ho(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Jt=(()=>{class e{constructor(a,i,o,r,c){this.yamcs=a,this.route=o,this.router=r,this.messageService=c,this.filterControl=new l.NI,this.displayedColumns=["name","actions"],this.dataSource=new s.by,i.setTitle("Service accounts"),this.dataSource.filterPredicate=(m,h)=>m.name.toLowerCase().indexOf(h)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getServiceAccounts().then(a=>{this.dataSource.data=a.serviceAccounts||[]})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteServiceAccount(a){confirm(`Are you sure you want to delete service account ${a}`)&&this.yamcs.yamcsClient.deleteServiceAccount(a).then(()=>this.refresh()).catch(i=>this.messageService.showError(i))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0),t.Y36(Y.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:20,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter service accounts",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Service accounts \xa0\xa0\xa0 "),t.TgZ(3,"a",0),t.TgZ(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," CREATE SERVICE ACCOUNT "),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",2),t._UZ(9,"app-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,po,2,0,"th",6),t.YNc(13,mo,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,uo,1,0,"th",9),t.YNc(16,_o,4,0,"td",7),t.BQk(),t.YNc(17,go,1,0,"tr",10),t.YNc(18,fo,1,0,"tr",11),t.qZA(),t.YNc(19,ho,2,0,"app-empty-message",12),t.qZA(),t.qZA()),2&a&&(t.xp6(9),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length))},directives:[A,x,U.zs,u.yS,y.Hw,P.a,l.JJ,l.oH,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,G.T,j.OP,s.as,s.XQ,s.nj,s.Gk,p.O5,N.M],encapsulation:2,changeDetection:0}),e})();function To(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"Confirmation does not match password"),t.qZA())}const Zo=e=>{const n=e.get("password").value,a=e.get("passwordConfirmation").value;return n&&a&&n!==a?{passwordMismatch:!0}:null};let bo=(()=>{class e{constructor(a,i,o){this.data=a,this.yamcs=i,this.user=a.user,this.form=o.group({password:new l.NI(null,l.kI.required),passwordConfirmation:new l.NI(null,l.kI.required)},{validator:Zo})}changePassword(){this.yamcs.yamcsClient.editUser(this.user.name,{password:this.form.value.password})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(T.WI),t.Y36(d.C),t.Y36(l.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-change-user-password-dialog"]],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","password","formControlName","password"],["type","password","formControlName","passwordConfirmation"],[4,"ngIf"],["align","end"],["mat-dialog-close","",1,"ya-button"],["mat-dialog-close","",1,"ya-button","primary",3,"disabled","click"]],template:function(a,i){1&a&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"form",2),t.TgZ(4,"label"),t._uU(5," Password"),t._UZ(6,"br"),t._UZ(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Password confirmation"),t._UZ(11,"br"),t._UZ(12,"input",4),t.qZA(),t.qZA(),t.YNc(13,To,2,0,"p",5),t.qZA(),t.TgZ(14,"mat-dialog-actions",6),t.TgZ(15,"button",7),t._uU(16,"CANCEL"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return i.changePassword()}),t._uU(18,"OK"),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.hij("Change password of ",i.user.name,""),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(10),t.Q6J("ngIf",null==i.form.errors?null:i.form.errors.passwordMismatch),t.xp6(4),t.Q6J("disabled",!i.form.valid))},directives:[T.uh,T.xY,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,p.O5,T.H8,T.ZT],encapsulation:2,changeDetection:0}),e})();var W=_(119);const Ao=function(e){return[e]};function xo(e,n){if(1&e&&(t.TgZ(0,"a",9),t._uU(1),t.qZA()),2&e){const a=t.oxw().ngIf;t.Q6J("routerLink",t.VKq(2,Ao,"../"+a.createdBy.name)),t.xp6(1),t.Oqu(a.createdBy.name||"-")}}function yo(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Uo(e,n){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.name,"")}}function vo(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"app-text-action",11),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(3).deleteIdentity(r)}),t._uU(7,"DELETE"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.identity),t.xp6(2),t.Oqu(a.provider)}}function qo(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"External Identities"),t.qZA(),t.TgZ(5,"table",10),t.TgZ(6,"tr"),t.TgZ(7,"th"),t._uU(8,"Identity"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Provider"),t.qZA(),t._UZ(11,"th"),t.qZA(),t.YNc(12,vo,8,2,"tr",8),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(12),t.Q6J("ngForOf",a.identities)}}function Co(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",1),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5),t.TgZ(6,"a",2),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t._uU(9," EDIT USER "),t.qZA(),t.TgZ(10,"a",3),t.NdJ("click",function(){return t.CHM(a),t.oxw().showChangeUserPasswordDialog()}),t.TgZ(11,"mat-icon"),t._uU(12,"account_box"),t.qZA(),t._uU(13," CHANGE PASSWORD "),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"dl",5),t.TgZ(16,"dt"),t._uU(17,"Username"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA(),t.TgZ(20,"dt"),t._uU(21,"Display name"),t.qZA(),t.TgZ(22,"dd"),t._uU(23),t.qZA(),t.TgZ(24,"dt"),t._uU(25,"Email"),t.qZA(),t.TgZ(26,"dd"),t._uU(27),t.qZA(),t.TgZ(28,"dt"),t._uU(29,"Joined"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.ALo(32,"datetime"),t.qZA(),t.TgZ(33,"dt"),t._uU(34,"Confirmed at"),t.qZA(),t.TgZ(35,"dd"),t._uU(36),t.ALo(37,"datetime"),t.qZA(),t.TgZ(38,"dt"),t._uU(39,"Last login"),t.qZA(),t.TgZ(40,"dd"),t._uU(41),t.ALo(42,"datetime"),t.qZA(),t.TgZ(43,"dt"),t._uU(44,"Active"),t.qZA(),t.TgZ(45,"dd"),t._uU(46),t.qZA(),t.TgZ(47,"dt"),t._uU(48,"Superuser"),t.qZA(),t.TgZ(49,"dd"),t._uU(50),t.qZA(),t.TgZ(51,"dt"),t._uU(52,"Created by"),t.qZA(),t.TgZ(53,"dd"),t.YNc(54,xo,2,4,"a",6),t.YNc(55,yo,2,0,"ng-container",0),t.qZA(),t.qZA(),t.TgZ(56,"div",7),t._UZ(57,"mat-divider"),t.qZA(),t.TgZ(58,"h4"),t._uU(59),t.qZA(),t.YNc(60,Uo,3,1,"ng-container",8),t.YNc(61,qo,13,1,"ng-container",0),t.qZA(),t.qZA()}if(2&e){const a=n.ngIf;t.xp6(5),t.hij(" ",a.displayName||a.name," \xa0\xa0\xa0 "),t.xp6(5),t.Q6J("disabled",null==a.identities?null:a.identities.length),t.xp6(9),t.Oqu(a.name),t.xp6(4),t.Oqu(a.displayName||"-"),t.xp6(4),t.Oqu(a.email||"-"),t.xp6(4),t.Oqu(t.lcZ(32,15,a.creationTime)),t.xp6(5),t.Oqu(t.lcZ(37,17,a.confirmationTime)||"never"),t.xp6(5),t.Oqu(t.lcZ(42,19,a.lastLoginTime)||"never"),t.xp6(5),t.Oqu(a.active),t.xp6(4),t.Oqu(a.superuser),t.xp6(4),t.Q6J("ngIf",a.createdBy),t.xp6(1),t.Q6J("ngIf",!a.createdBy),t.xp6(4),t.hij("",(null==a.roles?null:a.roles.length)||"0"," assigned roles"),t.xp6(1),t.Q6J("ngForOf",a.roles),t.xp6(1),t.Q6J("ngIf",a.identities)}}let $t=(()=>{class e{constructor(a,i,o,r,c){this.yamcs=i,this.title=o,this.dialog=r,this.messageService=c,this.user$=new Z.X(null),a.paramMap.subscribe(m=>{const h=m.get("username");this.changeUser(h)})}changeUser(a){this.yamcs.yamcsClient.getUser(a).then(i=>{this.user$.next(i),this.title.setTitle(i.name)})}deleteIdentity(a){if(confirm(`Are you sure you want to delete the ${a.provider} identity?`)){const i=this.user$.value.name;this.yamcs.yamcsClient.deleteIdentity(i,a.provider).then(()=>this.changeUser(i)).catch(o=>this.messageService.showError(o))}}showChangeUserPasswordDialog(){this.dialog.open(bo,{data:{user:this.user$.value},width:"400px"})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx),t.Y36(T.uw),t.Y36(Y.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],["mat-button","","color","primary","routerLink","edit"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],[3,"routerLink",4,"ngIf"],[1,"section-divider"],[4,"ngFor","ngForOf"],[3,"routerLink"],["yaDataTable",""],["icon","delete",3,"click"]],template:function(a,i){1&a&&(t.YNc(0,Co,62,21,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.user$))},directives:[p.O5,A,x,U.zs,u.yS,y.Hw,I.d,p.sg,w.O,E.l],pipes:[p.Ov,W.i],encapsulation:2,changeDetection:0}),e})();var v=_(4004);function wo(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Username"),t.qZA())}function Do(e,n){if(1&e&&(t.TgZ(0,"td",16),t.TgZ(1,"a",17),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function So(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Display name"),t.qZA())}function Po(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.displayName||"-"," ")}}function No(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Groups"),t.qZA())}function Yo(e,n){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function ko(e,n){if(1&e&&(t.ynx(0),t.YNc(1,Yo,2,0,"ng-container",1),t._uU(2),t.BQk()),2&e){const a=n.$implicit,i=n.first;t.xp6(1),t.Q6J("ngIf",!i),t.xp6(1),t.hij("",a.name," ")}}function Qo(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Io(e,n){if(1&e&&(t.TgZ(0,"td",16),t.YNc(1,ko,3,2,"ng-container",19),t.YNc(2,Qo,2,0,"ng-container",1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.groups),t.xp6(1),t.Q6J("ngIf",!a.groups)}}function Oo(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Registered"),t.qZA())}function Ro(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.creationTime)||"never")}}function Jo(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Last Login"),t.qZA())}function $o(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.lastLoginTime)||"never")}}function Lo(e,n){1&e&&t._UZ(0,"th",20)}const Mo=function(e){return[e,"edit"]};function Bo(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"td",16),t.TgZ(1,"app-more"),t.TgZ(2,"a",21),t._uU(3," Edit user "),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw(2).deleteUser.next(r.name)}),t._uU(5," Delete user "),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,Mo,a.name))}}function Ho(e,n){1&e&&t._UZ(0,"tr",23)}function Fo(e,n){1&e&&t._UZ(0,"tr",24)}function Eo(e,n){if(1&e&&(t.TgZ(0,"table",2),t.ynx(1,3),t.YNc(2,wo,2,0,"th",4),t.YNc(3,Do,3,2,"td",5),t.BQk(),t.ynx(4,6),t.YNc(5,So,2,0,"th",4),t.YNc(6,Po,2,1,"td",5),t.BQk(),t.ynx(7,7),t.YNc(8,No,2,0,"th",8),t.YNc(9,Io,3,2,"td",5),t.BQk(),t.ynx(10,9),t.YNc(11,Oo,2,0,"th",4),t.YNc(12,Ro,3,3,"td",5),t.BQk(),t.ynx(13,10),t.YNc(14,Jo,2,0,"th",4),t.YNc(15,$o,3,3,"td",5),t.BQk(),t.ynx(16,11),t.YNc(17,Lo,1,0,"th",12),t.YNc(18,Bo,6,3,"td",5),t.BQk(),t.YNc(19,Ho,1,0,"tr",13),t.YNc(20,Fo,1,0,"tr",14),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function Go(e,n){1&e&&(t.TgZ(0,"app-empty-message"),t._uU(1," No rows to display\n"),t.qZA())}let jo=(()=>{class e{constructor(){this.displayedColumns=["name","displayName","groups","actions"],this.deleteUser=new t.vpe,this.dataSource=new s.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,i)=>a.name.toLowerCase().indexOf(i)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.users||[],this.dataSource.filter=this.filter}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users-table"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,5),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},inputs:{users:"users",filter:"filter"},outputs:{deleteUser:"deleteUser"},features:[t.TTD],decls:2,vars:2,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["matColumnDef","groups"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","registered"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.YNc(0,Eo,21,3,"table",0),t.YNc(1,Go,2,0,"app-empty-message",1)),2&a&&(t.Q6J("ngIf",i.dataSource),t.xp6(1),t.Q6J("ngIf",!i.dataSource.data.length))},directives:[p.O5,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,p.sg,G.T,j.OP,s.as,s.XQ,s.nj,s.Gk,N.M],pipes:[W.i],encapsulation:2,changeDetection:0}),e})();function zo(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ACTIVE (",t.lcZ(1,1,a.activeUserCount$),") ")}}function Vo(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" SUPERUSERS (",t.lcZ(1,1,a.superUserCount$),") ")}}function Xo(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" INTERNAL (",t.lcZ(1,1,a.internalUserCount$),") ")}}function Wo(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedUserCount$),") ")}}let Lt=(()=>{class e{constructor(a,i,o,r,c){this.yamcs=a,this.route=o,this.router=r,this.messageService=c,this.filterControl=new l.NI,this.filterValue$=new Z.X(null),this.users$=new Z.X([]),i.setTitle("Users")}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())}),this.activeUsers$=this.users$.pipe((0,v.U)(i=>i.filter(o=>o.active))),this.activeUserCount$=this.activeUsers$.pipe((0,v.U)(i=>i.length)),this.superUsers$=this.users$.pipe((0,v.U)(i=>i.filter(o=>o.superuser))),this.superUserCount$=this.superUsers$.pipe((0,v.U)(i=>i.length)),this.internalUsers$=this.users$.pipe((0,v.U)(i=>i.filter(o=>!o.identities))),this.internalUserCount$=this.internalUsers$.pipe((0,v.U)(i=>i.length)),this.blockedUsers$=this.users$.pipe((0,v.U)(i=>i.filter(o=>!o.active))),this.blockedUserCount$=this.blockedUsers$.pipe((0,v.U)(i=>i.length)),this.refresh()}refresh(){this.yamcs.yamcsClient.getUsers().then(a=>{this.users$.next(a)})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteUser(a){confirm(`Are you sure you want to delete the user account '${a}'`)&&this.yamcs.yamcsClient.deleteUser(a).then(()=>this.refresh()).catch(i=>this.messageService.showError(i))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0),t.Y36(Y.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:35,vars:25,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["animationDuration","0ms",1,"secondary"],["mat-tab-label",""],[3,"users","filter","deleteUser"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Users \xa0\xa0\xa0 "),t.TgZ(3,"a",0),t.TgZ(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," CREATE USER "),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",2),t._UZ(9,"app-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4),t.TgZ(11,"mat-tab"),t.YNc(12,zo,2,3,"ng-template",5),t._UZ(13,"br"),t.TgZ(14,"app-users-table",6),t.NdJ("deleteUser",function(r){return i.deleteUser(r)}),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA(),t.qZA(),t.TgZ(17,"mat-tab"),t.YNc(18,Vo,2,3,"ng-template",5),t._UZ(19,"br"),t.TgZ(20,"app-users-table",6),t.NdJ("deleteUser",function(r){return i.deleteUser(r)}),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA(),t.qZA(),t.TgZ(23,"mat-tab"),t.YNc(24,Xo,2,3,"ng-template",5),t._UZ(25,"br"),t.TgZ(26,"app-users-table",6),t.NdJ("deleteUser",function(r){return i.deleteUser(r)}),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA(),t.qZA(),t.TgZ(29,"mat-tab"),t.YNc(30,Wo,2,3,"ng-template",5),t._UZ(31,"br"),t.TgZ(32,"app-users-table",6),t.NdJ("deleteUser",function(r){return i.deleteUser(r)}),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(9),t.Q6J("formControl",i.filterControl),t.xp6(5),t.Q6J("users",t.lcZ(15,9,i.activeUsers$))("filter",t.lcZ(16,11,i.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(21,13,i.superUsers$))("filter",t.lcZ(22,15,i.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(27,17,i.internalUsers$))("filter",t.lcZ(28,19,i.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(33,21,i.blockedUsers$))("filter",t.lcZ(34,23,i.filterValue$)))},directives:[A,x,U.zs,u.yS,y.Hw,P.a,l.JJ,l.oH,k.SP,k.uX,k.uD,jo],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function Ko(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Valid period (at 0h UTC)"),t.qZA())}function ts(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.AsE(" ",t.xi3(2,2,a.start,"y-MM-dd")," \u2013 ",t.xi3(3,5,a.stop,"y-MM-dd")," ")}}function es(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Leap seconds"),t.qZA())}function as(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.leapSeconds)}}function ns(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"TAI - UTC"),t.qZA())}function is(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij("",a.taiDifference," s")}}function os(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"UTC - TAI"),t.qZA())}function ss(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij("",-a.taiDifference," s")}}function rs(e,n){1&e&&t._UZ(0,"th",14)}function cs(e,n){1&e&&t._UZ(0,"td",13)}function ls(e,n){1&e&&t._UZ(0,"tr",15)}function ps(e,n){1&e&&t._UZ(0,"tr",16)}let Mt=(()=>{class e{constructor(a,i){this.displayedColumns=["period","leap-seconds","tai-utc","utc-tai","actions"],this.dataSource=new s.by,i.setTitle("Leap seconds"),a.yamcsClient.getLeapSeconds().then(o=>{this.dataSource.data=o.ranges})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","period"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leap-seconds"],["matColumnDef","tai-utc"],["matColumnDef","utc-tai"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Leap seconds "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,Ko,2,0,"th",3),t.YNc(7,ts,4,8,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,es,2,0,"th",3),t.YNc(10,as,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,ns,2,0,"th",3),t.YNc(13,is,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,os,2,0,"th",3),t.YNc(16,ss,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,rs,1,0,"th",9),t.YNc(19,cs,1,0,"td",4),t.BQk(),t.YNc(20,ls,1,0,"tr",10),t.YNc(21,ps,1,0,"tr",11),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[A,x,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk],pipes:[p.uU],encapsulation:2,changeDetection:0}),e})();function ms(e,n){1&e&&(t.TgZ(0,"th",7),t._uU(1,"Name"),t.qZA())}function us(e,n){if(1&e&&(t.TgZ(0,"td",8),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a)}}function _s(e,n){1&e&&t._UZ(0,"tr",9)}function ds(e,n){1&e&&t._UZ(0,"tr",10)}let Bt=(()=>{class e{constructor(a,i){this.displayedColumns=["name"],this.dataSource=new s.by,i.setTitle("Processor types"),a.yamcsClient.getProcessorTypes().then(o=>{this.dataSource.data=o.types||[]})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Processor types "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,ms,2,0,"th",3),t.YNc(7,us,2,1,"td",4),t.BQk(),t.YNc(8,_s,1,0,"tr",5),t.YNc(9,ds,1,0,"tr",6),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[A,x,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})();function gs(e,n){1&e&&(t.TgZ(0,"mat-icon",2),t._uU(1," check_circle\n"),t.qZA())}function fs(e,n){1&e&&(t.TgZ(0,"mat-icon",3),t._uU(1," lens\n"),t.qZA())}let hs=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-replication-state"]],inputs:{connected:"connected"},decls:2,vars:2,consts:[["class","success",4,"ngIf"],["class","down",4,"ngIf"],[1,"success"],[1,"down"]],template:function(a,i){1&a&&(t.YNc(0,gs,2,0,"mat-icon",0),t.YNc(1,fs,2,0,"mat-icon",1)),2&a&&(t.Q6J("ngIf",!0===i.connected),t.xp6(1),t.Q6J("ngIf",!1===i.connected))},directives:[p.O5,y.Hw],encapsulation:2,changeDetection:0}),e})();function Ts(e,n){1&e&&t._UZ(0,"th",23)}function Zs(e,n){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"app-replication-state",25),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function bs(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Instance"),t.qZA())}function As(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.instance)}}function xs(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Streams"),t.qZA())}function ys(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu((null==a.streams?null:a.streams.join(", "))||"-")}}function Us(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Mode"),t.qZA())}function vs(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function qs(e,n){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Local Address"),t.qZA())}function Cs(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function ws(e,n){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Remote Address"),t.qZA())}function Ds(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function Ss(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Pull From"),t.qZA())}function Ps(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.pullFrom||"-")}}function Ns(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1,"TX"),t.qZA())}function Ys(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.tx)||"-")}}function ks(e,n){1&e&&t._UZ(0,"tr",32)}function Qs(e,n){1&e&&t._UZ(0,"tr",33)}function Is(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,Ts,1,0,"th",6),t.YNc(4,Zs,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,bs,2,0,"th",9),t.YNc(7,As,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,xs,2,0,"th",12),t.YNc(10,ys,2,1,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,Us,2,0,"th",14),t.YNc(13,vs,2,1,"td",15),t.BQk(),t.ynx(14,16),t.YNc(15,qs,2,0,"th",17),t.YNc(16,Cs,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,ws,2,0,"th",17),t.YNc(19,Ds,2,1,"td",10),t.BQk(),t.ynx(20,19),t.YNc(21,Ss,2,0,"th",9),t.YNc(22,Ps,2,1,"td",10),t.BQk(),t.ynx(23,20),t.YNc(24,Ns,2,0,"th",14),t.YNc(25,Ys,3,3,"td",10),t.BQk(),t.YNc(26,ks,1,0,"tr",21),t.YNc(27,Qs,1,0,"tr",22),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.slavesDataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.slaveColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.slaveColumns)}}function Os(e,n){1&e&&t._UZ(0,"th",23)}function Rs(e,n){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"app-replication-state",25),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function Js(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Instance"),t.qZA())}function $s(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.instance)}}function Ls(e,n){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Streams"),t.qZA())}function Ms(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu((null==a.streams?null:a.streams.join(", "))||"-")}}function Bs(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Mode"),t.qZA())}function Hs(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function Fs(e,n){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Local Address"),t.qZA())}function Es(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function Gs(e,n){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Remote Address"),t.qZA())}function js(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function zs(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1,"Push To"),t.qZA())}function Vs(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.pushTo||"-")}}function Xs(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Local\xa0TX"),t.qZA())}function Ws(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.localTx)||"-")}}function Ks(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Next\xa0TX"),t.qZA())}function tr(e,n){if(1&e&&(t.TgZ(0,"td",27),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.nextTx)||"-")}}function er(e,n){1&e&&t._UZ(0,"tr",32)}function ar(e,n){1&e&&t._UZ(0,"tr",33)}function nr(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,Os,1,0,"th",6),t.YNc(4,Rs,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,Js,2,0,"th",9),t.YNc(7,$s,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,Ls,2,0,"th",12),t.YNc(10,Ms,2,1,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,Bs,2,0,"th",14),t.YNc(13,Hs,2,1,"td",15),t.BQk(),t.ynx(14,16),t.YNc(15,Fs,2,0,"th",17),t.YNc(16,Es,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,Gs,2,0,"th",17),t.YNc(19,js,2,1,"td",10),t.BQk(),t.ynx(20,34),t.YNc(21,zs,2,0,"th",9),t.YNc(22,Vs,2,1,"td",10),t.BQk(),t.ynx(23,35),t.YNc(24,Xs,2,0,"th",14),t.YNc(25,Ws,3,3,"td",10),t.BQk(),t.ynx(26,36),t.YNc(27,Ks,2,0,"th",14),t.YNc(28,tr,3,3,"td",10),t.BQk(),t.YNc(29,er,1,0,"tr",21),t.YNc(30,ar,1,0,"tr",22),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.mastersDataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.masterColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.masterColumns)}}function ir(e,n){1&e&&(t.TgZ(0,"app-empty-message",37),t._uU(1,"Not configured"),t.qZA())}let Ht=(()=>{class e{constructor(a,i){this.slaveColumns=["state","instance","streams","mode","localAddress","remoteAddress","pullFrom","tx"],this.masterColumns=["state","instance","streams","mode","localAddress","remoteAddress","pushTo","localTx","nextTx"],this.slavesDataSource=new s.by,this.mastersDataSource=new s.by,this.hasSlaves$=new Z.X(!1),this.hasMasters$=new Z.X(!1),i.setTitle("Replication"),this.replicationInfoSubscription=a.yamcsClient.createReplicationInfoSubscription(o=>{this.slavesDataSource.data=o.slaves||[],this.mastersDataSource.data=o.masters||[],this.hasSlaves$.next(this.slavesDataSource.data.length>0),this.hasMasters$.next(this.mastersDataSource.data.length>0)})}ngOnDestroy(){this.replicationInfoSubscription&&this.replicationInfoSubscription.cancel()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:18,vars:8,consts:[[1,"panel-content"],[4,"ngIf","ngIfElse"],[1,"section-divider"],["nodata",""],["mat-table","",1,"ya-data-table",3,"dataSource"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","instance"],["mat-header-cell","","style","width: 130px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","streams"],["mat-header-cell","","style","width: 250px",4,"matHeaderCellDef"],["matColumnDef","mode"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","localAddress"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","remoteAddress"],["matColumnDef","pullFrom"],["matColumnDef","tx"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"connected"],["mat-header-cell","",2,"width","130px"],["mat-cell",""],["mat-header-cell","",2,"width","250px"],["mat-header-cell","","width","1"],["mat-cell","",2,"text-align","center"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],["matColumnDef","pushTo"],["matColumnDef","localTx"],["matColumnDef","nextTx"],["marginTop","0"]],template:function(a,i){if(1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Replication "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"h4"),t._uU(5,"Inbound"),t.qZA(),t.YNc(6,Is,28,3,"ng-container",1),t.ALo(7,"async"),t.TgZ(8,"p"),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"div",2),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13,"Outbound"),t.qZA(),t.YNc(14,nr,31,3,"ng-container",1),t.ALo(15,"async"),t.qZA(),t.qZA(),t.YNc(16,ir,2,0,"ng-template",null,3,t.W1O)),2&a){const o=t.MAs(17);t.xp6(6),t.Q6J("ngIf",t.lcZ(7,4,i.hasSlaves$))("ngIfElse",o),t.xp6(8),t.Q6J("ngIf",t.lcZ(15,6,i.hasMasters$))("ngIfElse",o)}},directives:[A,x,p.O5,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,hs,s.as,s.XQ,s.nj,s.Gk,I.d,N.M],pipes:[p.Ov,p.JJ],encapsulation:2,changeDetection:0}),e})();var or=_(7261);function sr(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",1),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5),t.TgZ(6,"button",2),t.NdJ("click",function(){return t.CHM(a),t.oxw().compact()}),t.TgZ(7,"mat-icon"),t._uU(8,"fullscreen_exit"),t.qZA(),t._uU(9," COMPACT "),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"dl",4),t.TgZ(12,"dt"),t._uU(13,"Tablespace"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"DB Path"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"pre",5),t._uU(21),t.qZA(),t.qZA(),t.qZA()}if(2&e){const a=n.ngIf,i=t.oxw();t.xp6(5),t.AsE(" ",i.tablespace,"://",i.dbPath," \xa0\xa0\xa0 "),t.xp6(10),t.Oqu(i.tablespace||"-"),t.xp6(4),t.Oqu(i.dbPath||"-"),t.xp6(2),t.Oqu(a)}}let Ft=(()=>{class e{constructor(a,i,o,r){this.yamcs=a,this.snackBar=r,this.tablespace=o.snapshot.paramMap.get("tablespace");const c=o.snapshot.url;this.dbPath=c.length?c.map(m=>m.path).join("/"):"",i.setTitle(this.tablespace+"://"+this.dbPath),this.properties$=a.yamcsClient.getRocksDbDatabaseProperties(this.tablespace,this.dbPath)}compact(){this.snackBar.open(`Compacting ${this.tablespace}://${this.dbPath}...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.compactRocksDbDatabase(this.tablespace,this.dbPath).then(()=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(a=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(or.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/rocksdb/databases","color","primary"],["mat-button","","color","primary",3,"click"],[1,"panel-content"],[1,"dl-horizontal"],[2,"font-size","10px","margin","0"]],template:function(a,i){1&a&&(t.YNc(0,sr,22,5,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.properties$))},directives:[p.O5,A,x,U.zs,u.yS,y.Hw,U.lW],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();function rr(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function cr(e,n){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.tablespace||"-")}}function lr(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data Dir"),t.qZA())}function pr(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij("/",a.dbPath,"")}}const mr=function(e,n){return[e,n]};function ur(e,n){if(1&e&&(t.TgZ(0,"td",12),t.TgZ(1,"a",13),t._uU(2),t.YNc(3,pr,2,1,"ng-container",14),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(3,mr,a.tablespace,a.dbPath)),t.xp6(1),t.hij(" ",a.dataDir,""),t.xp6(1),t.Q6J("ngIf",a.dbPath)}}function _r(e,n){1&e&&(t.TgZ(0,"th",11),t._uU(1,"DB Path"),t.qZA())}function dr(e,n){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.dbPath||"(root)")}}function gr(e,n){1&e&&t._UZ(0,"th",15)}function fr(e,n){1&e&&t._UZ(0,"td",12)}function hr(e,n){1&e&&t._UZ(0,"tr",16)}function Tr(e,n){1&e&&t._UZ(0,"tr",17)}let Et=(()=>{class e{constructor(a,i){this.displayedColumns=["dataDir","tablespace","dbPath","actions"],this.dataSource=new s.by,i.setTitle("Open Databases"),a.yamcsClient.getRocksDbDatabases().then(o=>{this.dataSource.data=o})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","tablespace"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataDir"],["matColumnDef","dbPath"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],[4,"ngIf"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Open databases "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,rr,2,0,"th",3),t.YNc(7,cr,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,lr,2,0,"th",3),t.YNc(10,ur,4,6,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,_r,2,0,"th",3),t.YNc(13,dr,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,gr,1,0,"th",8),t.YNc(16,fr,1,0,"td",4),t.BQk(),t.YNc(17,hr,1,0,"tr",9),t.YNc(18,Tr,1,0,"tr",10),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[A,x,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,u.yS,p.O5,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})(),Zr=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-route-detail"]],inputs:{route:"route"},decls:12,vars:3,consts:[[1,"block-title"],[1,"block"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0),t._uU(1,"Input Type"),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",0),t._uU(5,"Output Type"),t.qZA(),t.TgZ(6,"div",1),t._uU(7),t.qZA(),t.TgZ(8,"div",0),t._uU(9,"Log Format"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.qZA()),2&a&&(t.xp6(3),t.hij(" ",i.route.inputType,"\n"),t.xp6(4),t.hij(" ",i.route.outputType,"\n"),t.xp6(4),t.hij(" ",i.route.logFormat||"-","\n"))},encapsulation:2,changeDetection:0}),e})();function br(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"app-detail-toolbar"),t._uU(2," Route Detail "),t.qZA(),t.TgZ(3,"div",20),t._UZ(4,"app-route-detail",21),t.qZA(),t.BQk()),2&e){const a=n.ngIf;t.xp6(4),t.Q6J("route",a)}}function Ar(e,n){1&e&&(t.TgZ(0,"app-detail-toolbar"),t._uU(1," Select a route "),t.qZA())}function xr(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Service"),t.qZA())}function yr(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.service||"Other")}}function Ur(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Method"),t.qZA())}function vr(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.description||"-")}}function qr(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Requests"),t.qZA())}function Cr(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.requestCount)}}function wr(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Errors"),t.qZA())}function Dr(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.errorCount)}}function Sr(e,n){1&e&&(t.TgZ(0,"th",22),t._uU(1,"HTTP"),t.qZA())}function Pr(e,n){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.AsE("",a.httpMethod," ",a.url,"")}}function Nr(e,n){1&e&&t._UZ(0,"th",24)}function Yr(e,n){1&e&&t._UZ(0,"td",23)}function kr(e,n){1&e&&t._UZ(0,"tr",25)}const Qr=function(e){return{selected:e}};function Ir(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"tr",26),t.NdJ("click",function(){const r=t.CHM(a).$implicit;return t.oxw().selectRoute(r)}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=n.$implicit,i=t.oxw();t.ekj("deprecated",a.deprecated),t.Q6J("ngClass",t.VKq(5,Qr,a===t.lcZ(1,3,i.selectedRoute$)))}}let Gt=(()=>{class e{constructor(a,i,o,r){this.yamcs=a,this.route=o,this.router=r,this.filterControl=new l.NI,this.displayedColumns=["method","requestCount","errorCount","http","actions"],this.dataSource=new s.by,this.selectedRoute$=new Z.X(null),i.setTitle("API routes"),this.dataSource.filterPredicate=(c,m)=>c.url.toLowerCase().indexOf(m)>=0||c.description.toLowerCase().indexOf(m)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoutes().then(a=>{this.dataSource.data=a.routes||[]})}selectRoute(a){this.selectedRoute$.next(a)}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},decls:36,vars:9,consts:[[3,"hasDetailPane"],["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter routes",3,"formControl"],["mat-table","","matSort","","matSortActive","requestCount","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","requestCount"],["matColumnDef","errorCount"],["matColumnDef","http"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","deprecated","click",4,"matRowDef","matRowDefColumns"],[2,"padding","0 16px"],[3,"route"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(a,i){if(1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar",0),t._uU(2," API routes \xa0\xa0\xa0 "),t.TgZ(3,"button",1),t.NdJ("click",function(){return i.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"app-detail-pane"),t.YNc(7,br,5,1,"ng-container",2),t.ALo(8,"async"),t.YNc(9,Ar,2,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(11,"div",4),t.TgZ(12,"div",5),t.TgZ(13,"div",6),t._UZ(14,"app-search-filter",7),t.qZA(),t.TgZ(15,"table",8),t.ynx(16,9),t.YNc(17,xr,2,0,"th",10),t.YNc(18,yr,2,1,"td",11),t.BQk(),t.ynx(19,12),t.YNc(20,Ur,2,0,"th",10),t.YNc(21,vr,2,1,"td",11),t.BQk(),t.ynx(22,13),t.YNc(23,qr,2,0,"th",10),t.YNc(24,Cr,2,1,"td",11),t.BQk(),t.ynx(25,14),t.YNc(26,wr,2,0,"th",10),t.YNc(27,Dr,2,1,"td",11),t.BQk(),t.ynx(28,15),t.YNc(29,Sr,2,0,"th",10),t.YNc(30,Pr,2,2,"td",11),t.BQk(),t.ynx(31,16),t.YNc(32,Nr,1,0,"th",17),t.YNc(33,Yr,1,0,"td",11),t.BQk(),t.YNc(34,kr,1,0,"tr",18),t.YNc(35,Ir,2,7,"tr",19),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const o=t.MAs(10);t.xp6(1),t.Q6J("hasDetailPane",!0),t.xp6(6),t.Q6J("ngIf",t.lcZ(8,7,i.selectedRoute$))("ngIfElse",o),t.xp6(7),t.Q6J("formControl",i.filterControl),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns)}},directives:[A,x,U.lW,D.gM,y.Hw,V.Z,p.O5,X.j,Zr,P.a,l.JJ,l.oH,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,s.as,s.XQ,s.nj,s.Gk,p.mk],pipes:[p.Ov],styles:[".deprecated[_ngcontent-%COMP%]{text-decoration:line-through}.detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.mat-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),e})();function Or(e,n){if(1&e&&(t.TgZ(0,"mat-icon",4),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Rr(e,n){if(1&e&&(t.TgZ(0,"mat-icon",5),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Jr(e,n){if(1&e&&(t.TgZ(0,"mat-icon",6),t._uU(1," highlight_off\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function $r(e,n){if(1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1," lens\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}let Lr=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-service-state"]],inputs:{service:"service"},decls:4,vars:4,consts:[["style","color: lightgreen",3,"matTooltip",4,"ngIf"],["class","success",3,"matTooltip",4,"ngIf"],["class","alert",3,"matTooltip",4,"ngIf"],["class","down",3,"matTooltip",4,"ngIf"],[2,"color","lightgreen",3,"matTooltip"],[1,"success",3,"matTooltip"],[1,"alert",3,"matTooltip"],[1,"down",3,"matTooltip"]],template:function(a,i){1&a&&(t.YNc(0,Or,2,1,"mat-icon",0),t.YNc(1,Rr,2,1,"mat-icon",1),t.YNc(2,Jr,2,1,"mat-icon",2),t.YNc(3,$r,2,1,"mat-icon",3)),2&a&&(t.Q6J("ngIf","STARTING"===i.service.state),t.xp6(1),t.Q6J("ngIf","RUNNING"===i.service.state),t.xp6(1),t.Q6J("ngIf","STOPPING"===i.service.state||"FAILED"===i.service.state),t.xp6(1),t.Q6J("ngIf","TERMINATED"===i.service.state||"NEW"===i.service.state))},directives:[p.O5,y.Hw,D.gM],encapsulation:2,changeDetection:0}),e})();function Mr(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Name"),t.qZA())}function Br(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.name)}}function Hr(e,n){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Class"),t.qZA())}function Fr(e,n){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.className)}}function Er(e,n){1&e&&t._UZ(0,"th",14)}function Gr(e,n){if(1&e&&(t.TgZ(0,"td",15),t._UZ(1,"app-service-state",16),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("service",a)}}function jr(e,n){1&e&&t._UZ(0,"th",17)}function zr(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"app-more"),t.TgZ(1,"button",19),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit;return t.oxw().startService.emit(o.name)}),t._uU(2," Start service "),t.qZA(),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit;return t.oxw().stopService.emit(o.name)}),t._uU(4," Stop service "),t.qZA(),t.qZA()}if(2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled","TERMINATED"!==a.state&&"NEW"!==a.state),t.xp6(2),t.Q6J("disabled","RUNNING"!==a.state)}}function Vr(e,n){if(1&e&&(t.TgZ(0,"td",13),t.YNc(1,zr,5,2,"app-more",18),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.readonly)}}function Xr(e,n){1&e&&t._UZ(0,"tr",20)}function Wr(e,n){1&e&&t._UZ(0,"tr",21)}let Kr=(()=>{class e{constructor(){this.displayedColumns=["state","name","className","actions"],this.dataSource=new s.by,this.readonly=!1,this.startService=new t.vpe,this.stopService=new t.vpe}ngAfterViewInit(){this.dataSource.sort=this.sort}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-services-table"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,7),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},inputs:{dataSource:"dataSource",readonly:"readonly"},outputs:{startService:"startService",stopService:"stopService"},decls:15,vars:3,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","className"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"service"],["mat-header-cell","",1,"expand"],[4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,Mr,2,0,"th",2),t.YNc(3,Br,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,Hr,2,0,"th",2),t.YNc(6,Fr,2,1,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,Er,1,0,"th",6),t.YNc(9,Gr,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,jr,1,0,"th",9),t.YNc(12,Vr,2,1,"td",3),t.BQk(),t.YNc(13,Xr,1,0,"tr",10),t.YNc(14,Wr,1,0,"tr",11),t.qZA()),2&a&&(t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},directives:[s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,Lr,p.O5,G.T,j.OP,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})(),jt=(()=>{class e{constructor(a,i,o,r){this.yamcs=a,this.router=i,this.route=o,this.instance="_global",this.filterForm=new l.cw({instance:new l.NI("_global")}),this.instanceOptions$=new Z.X([{id:"_global",label:"_global"}]),this.dataSource=new s.by,r.setTitle("Services"),a.yamcsClient.getInstances({filter:"state=RUNNING"}).then(c=>{for(const m of c)this.instanceOptions$.next([...this.instanceOptions$.value,{id:m.name,label:m.name}])}),this.initializeOptions(),this.refresh(),this.filterForm.get("instance").valueChanges.forEach(c=>{this.instance=c,this.refresh()})}initializeOptions(){const a=this.route.snapshot.queryParamMap;a.has("instance")&&(this.instance=a.get("instance"),this.filterForm.get("instance").setValue(this.instance))}startService(a){if(confirm(`Are you sure you want to start ${a} ?`)){const i=this.filterForm.get("instance").value;this.yamcs.yamcsClient.startService(i,a).then(()=>this.refresh())}}stopService(a){if(confirm(`Are you sure you want to stop ${a} ?`)){const i=this.filterForm.get("instance").value;this.yamcs.yamcsClient.stopService(i,a).then(()=>this.refresh())}}refresh(){this.updateURL();const a=this.filterForm.get("instance").value;this.yamcs.yamcsClient.getServices(a).then(i=>{this.dataSource.data=i})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(u.F0),t.Y36(u.gz),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:12,vars:5,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],[3,"dataSource","startService","stopService"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Services \xa0\xa0\xa0 "),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t.TgZ(8,"div",3),t._UZ(9,"app-select",4),t.ALo(10,"async"),t.qZA(),t.qZA(),t.TgZ(11,"app-services-table",5),t.NdJ("startService",function(r){return i.startService(r)})("stopService",function(r){return i.stopService(r)}),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(7),t.Q6J("formGroup",i.filterForm),t.xp6(2),t.Q6J("options",t.lcZ(10,3,i.instanceOptions$)),t.xp6(2),t.Q6J("dataSource",i.dataSource))},directives:[A,x,U.lW,D.gM,y.Hw,l._Y,l.JL,l.sg,it.P,l.JJ,l.u,Kr],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();var tc=_(160);function ec(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Id"),t.qZA())}function ac(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.id)}}function nc(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"User"),t.qZA())}function ic(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.username||"-")}}function oc(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"IP address"),t.qZA())}function sc(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.ipAddress||"-")}}function rc(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Hostname"),t.qZA())}function cc(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.hostname||"-")}}function lc(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Started"),t.qZA())}function pc(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.startTime)||"-")}}function mc(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Last renewed"),t.qZA())}function uc(e,n){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("time",a.lastAccessTime)("useMissionTime",!1)}}function _c(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Expires in"),t.qZA())}function dc(e,n){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("time",a.expirationTime)("useMissionTime",!1)}}function gc(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Client"),t.qZA())}function fc(e,n){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function hc(e,n){if(1&e&&(t.ynx(0),t.YNc(1,fc,2,0,"ng-container",21),t._uU(2),t.BQk()),2&e){const a=n.$implicit,i=n.first;t.xp6(1),t.Q6J("ngIf",!i),t.xp6(1),t.hij("",a," ")}}function Tc(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}const Zc=function(){return[]};function bc(e,n){if(1&e&&(t.TgZ(0,"td",17),t.YNc(1,hc,3,2,"ng-container",20),t.YNc(2,Tc,2,0,"ng-container",21),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.clients||t.DdM(2,Zc)),t.xp6(1),t.Q6J("ngIf",!a.clients)}}function Ac(e,n){1&e&&t._UZ(0,"tr",22)}function xc(e,n){1&e&&t._UZ(0,"tr",23)}let zt=(()=>{class e{constructor(a,i,o){this.yamcs=a,this.displayedColumns=["id","user","ipAddress","hostname","started","lastAccessTime","expirationTime","clients"],this.tableTrackerFn=(r,c)=>c.id,this.dataSource=new s.by,i.setTitle("Sessions"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getSessions().then(a=>{this.dataSource.data=a||[]})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(J.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(a,i){if(1&a&&(t.Gf(g.YE,5),t.Gf(Q.NW,5)),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first),t.iGM(o=t.CRH())&&(i.paginator=o.first)}},decls:32,vars:7,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","started","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","ipAddress"],["matColumnDef","hostname"],["matColumnDef","started"],["matColumnDef","lastAccessTime"],["matColumnDef","expirationTime"],["matColumnDef","clients"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"time","useMissionTime"],["mat-header-cell","",1,"expand"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Sessions "),t.qZA(),t.TgZ(3,"div",0),t.TgZ(4,"table",1),t.ynx(5,2),t.YNc(6,ec,2,0,"th",3),t.YNc(7,ac,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,nc,2,0,"th",3),t.YNc(10,ic,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,oc,2,0,"th",3),t.YNc(13,sc,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,rc,2,0,"th",3),t.YNc(16,cc,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,lc,2,0,"th",3),t.YNc(19,pc,3,3,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,mc,2,0,"th",3),t.YNc(22,uc,2,2,"td",4),t.BQk(),t.ynx(23,10),t.YNc(24,_c,2,0,"th",3),t.YNc(25,dc,2,2,"td",4),t.BQk(),t.ynx(26,11),t.YNc(27,gc,2,0,"th",12),t.YNc(28,bc,3,3,"td",4),t.BQk(),t.YNc(29,Ac,1,0,"tr",13),t.YNc(30,xc,1,0,"tr",14),t.qZA(),t._UZ(31,"mat-paginator",15),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.Q6J("dataSource",i.dataSource)("trackBy",i.tableTrackerFn),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},directives:[A,x,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,tc.E,p.sg,p.O5,s.as,s.XQ,s.nj,s.Gk,Q.NW],pipes:[W.i],encapsulation:2,changeDetection:0}),e})();var yc=_(3272),K=_(2638),Uc=_(4623),vc=_(2015),qc=_(4346);let Vt=(()=>{class e{constructor(a,i,o,r,c){this.userManagementActive=!1,this.userManagementExpanded=!1,this.rocksDbActive=!1,this.rocksDbExpanded=!1,this.sidebar$=a.sidebar$;const h=o.bypassSecurityTrustResourceUrl(`${c}static/rocksdb.svg`);i.addSvgIcon("rocksdb",h),this.routerSubscription=r.events.pipe((0,st.h)(f=>f instanceof u.m2)).subscribe(f=>{const S=f.url;this.collapseAllGroups(),this.userManagementActive=!1,this.rocksDbActive=!1,S.match(/\/iam.*/)?(this.userManagementActive=!0,this.userManagementExpanded=!0):S.match(/\/rocksdb.*/)&&(this.rocksDbActive=!0,this.rocksDbExpanded=!0)})}collapseAllGroups(){this.userManagementExpanded=!1,this.rocksDbExpanded=!1}toggleUserManagementGroup(){const a=this.userManagementExpanded;this.collapseAllGroups(),this.userManagementExpanded=!a}toggleRocksDbGroup(){const a=this.rocksDbExpanded;this.collapseAllGroups(),this.rocksDbExpanded=!a}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(nt.V),t.Y36(y.jv),t.Y36(b.H7),t.Y36(u.F0),t.Y36(p.mr))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:70,vars:18,consts:[["messageBar",""],[1,"mat-typography"],["mode","side",3,"opened","disableClose"],[1,"top","module-title"],[1,"icon32",2,"margin-right","16px"],["dense",""],["routerLink","/admin",3,"exact"],[1,"item-icon"],["label","Access control","icon","supervised_user_circle",3,"active","expanded","toggle"],["routerLink","/admin/iam/users",3,"subitem"],["routerLink","/admin/iam/service-accounts",3,"subitem"],["routerLink","/admin/iam/groups",3,"subitem"],["routerLink","/admin/iam/roles",3,"subitem"],["routerLink","/admin/sessions"],["routerLink","/admin/services"],["routerLink","/admin/processor-types"],["routerLink","/admin/databases"],["routerLink","/admin/replication"],["label","RocksDB","svgIcon","rocksdb",3,"active","expanded","toggle"],["routerLink","/admin/rocksdb/databases",3,"subitem"],["routerLink","/admin/http-traffic"],["routerLink","/admin/routes"],["routerLink","/admin/leap-seconds"],["routerLink","/admin/threads"],["routerLink","/admin/system"]],template:function(a,i){if(1&a&&(t._UZ(0,"app-message-bar",null,0),t.TgZ(2,"mat-sidenav-container",1),t.ALo(3,"async"),t.TgZ(4,"mat-sidenav",2),t.ALo(5,"async"),t.TgZ(6,"mat-toolbar",3),t.TgZ(7,"mat-toolbar-row"),t.TgZ(8,"mat-icon",4),t._uU(9,"security"),t.qZA(),t._uU(10," Admin Area "),t.qZA(),t.qZA(),t.TgZ(11,"mat-nav-list",5),t.TgZ(12,"app-sidebar-nav-item",6),t.TgZ(13,"mat-icon",7),t._uU(14,"recent_actors"),t.qZA(),t._uU(15," Activity "),t.qZA(),t.TgZ(16,"app-sidebar-nav-group",8),t.NdJ("toggle",function(){return i.toggleUserManagementGroup()}),t.TgZ(17,"app-sidebar-nav-item",9),t._uU(18," Users "),t.qZA(),t.TgZ(19,"app-sidebar-nav-item",10),t._uU(20," Service accounts "),t.qZA(),t.TgZ(21,"app-sidebar-nav-item",11),t._uU(22," Groups "),t.qZA(),t.TgZ(23,"app-sidebar-nav-item",12),t._uU(24," Roles "),t.qZA(),t.qZA(),t.TgZ(25,"app-sidebar-nav-item",13),t.TgZ(26,"mat-icon",7),t._uU(27,"devices"),t.qZA(),t._uU(28," Sessions "),t.qZA(),t.TgZ(29,"app-sidebar-nav-item",14),t.TgZ(30,"mat-icon",7),t._uU(31,"attractions"),t.qZA(),t._uU(32," Services "),t.qZA(),t.TgZ(33,"app-sidebar-nav-item",15),t.TgZ(34,"mat-icon",7),t._uU(35,"flip_camera_android"),t.qZA(),t._uU(36," Processor types "),t.qZA(),t.TgZ(37,"app-sidebar-nav-item",16),t.TgZ(38,"mat-icon",7),t._uU(39,"dns"),t.qZA(),t._uU(40," Databases "),t.qZA(),t.TgZ(41,"app-sidebar-nav-item",17),t.TgZ(42,"mat-icon",7),t._uU(43,"share"),t.qZA(),t._uU(44," Replication "),t.qZA(),t.TgZ(45,"app-sidebar-nav-group",18),t.NdJ("toggle",function(){return i.toggleRocksDbGroup()}),t.TgZ(46,"app-sidebar-nav-item",19),t._uU(47," Open databases "),t.qZA(),t.qZA(),t.TgZ(48,"app-sidebar-nav-item",20),t.TgZ(49,"mat-icon",7),t._uU(50,"traffic"),t.qZA(),t._uU(51," HTTP traffic "),t.qZA(),t.TgZ(52,"app-sidebar-nav-item",21),t.TgZ(53,"mat-icon",7),t._uU(54,"api"),t.qZA(),t._uU(55," API routes "),t.qZA(),t.TgZ(56,"app-sidebar-nav-item",22),t.TgZ(57,"mat-icon",7),t._uU(58,"access_time"),t.qZA(),t._uU(59," Leap seconds "),t.qZA(),t.TgZ(60,"app-sidebar-nav-item",23),t.TgZ(61,"mat-icon",7),t._uU(62,"receipt"),t.qZA(),t._uU(63," Threads "),t.qZA(),t.TgZ(64,"app-sidebar-nav-item",24),t.TgZ(65,"mat-icon",7),t._uU(66,"memory"),t.qZA(),t._uU(67," System "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"mat-sidenav-content"),t._UZ(69,"router-outlet"),t.qZA(),t.qZA()),2&a){const o=t.MAs(1);t.xp6(2),t.ekj("message-bar-visible",t.lcZ(3,14,o.show$)),t.xp6(2),t.Q6J("opened",t.lcZ(5,16,i.sidebar$))("disableClose",!0),t.xp6(8),t.Q6J("exact",!0),t.xp6(4),t.Q6J("active",i.userManagementActive)("expanded",i.userManagementExpanded),t.xp6(1),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(22),t.Q6J("active",i.rocksDbActive)("expanded",i.rocksDbExpanded),t.xp6(1),t.Q6J("subitem",!0)}},directives:[yc.c,K.TM,K.JX,L.Ye,L.rD,y.Hw,Uc.Hk,vc.y,u.rH,qc.y,K.Rh,u.lC],pipes:[p.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:#f7f7f7}mat-sidenav-container.message-bar-visible[_ngcontent-%COMP%]{top:112px}mat-sidenav[_ngcontent-%COMP%]{width:250px;background-color:#181818}mat-toolbar[_ngcontent-%COMP%]{background-color:#181818;border-bottom:1px solid rgba(255,255,255,.1);box-sizing:content-box;color:#d3d3d3;font-weight:300;font-size:14px}"],changeDetection:0}),e})();var Cc=_(4953);function wc(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",8),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t._UZ(9,"td"),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.description||"-"),t.xp6(2),t.Oqu(a.version||"-"),t.xp6(2),t.Oqu(a.vendor||"-")}}function Dc(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2,"Plugins"),t.qZA(),t.TgZ(3,"table",5),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Description"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Version"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Maintainer"),t.qZA(),t._UZ(13,"th",6),t.qZA(),t.YNc(14,wc,10,4,"tr",7),t.qZA(),t._UZ(15,"br"),t.BQk()),2&e){const a=n.ngIf;t.xp6(14),t.Q6J("ngForOf",a)}}function Sc(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"formatBytes"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"formatBytes"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"formatBytes"),t.qZA(),t._UZ(14,"td"),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Oqu(a.directory),t.xp6(2),t.Oqu(a.type||"-"),t.xp6(2),t.Oqu(t.lcZ(7,5,a.totalSpace)),t.xp6(3),t.Oqu(t.lcZ(10,7,a.unallocatedSpace)),t.xp6(3),t.Oqu(t.lcZ(13,9,a.usableSpace))}}function Pc(e,n){if(1&e&&(t.TgZ(0,"div",1),t.TgZ(1,"dl",2),t.TgZ(2,"dt"),t._uU(3,"Yamcs version"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Build"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.TgZ(10,"dt"),t._uU(11,"Server ID"),t.qZA(),t.TgZ(12,"dd"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"dl",3),t.TgZ(15,"dt"),t._uU(16,"OS"),t.qZA(),t.TgZ(17,"dd"),t._uU(18),t.qZA(),t.TgZ(19,"dt"),t._uU(20,"Architecture"),t.qZA(),t.TgZ(21,"dd"),t._uU(22),t.qZA(),t.TgZ(23,"dt"),t._uU(24,"JVM"),t.qZA(),t.TgZ(25,"dd"),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"dl",3),t.TgZ(28,"dt"),t._uU(29,"Working directory"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.qZA(),t.TgZ(32,"dt"),t._uU(33,"Config directory"),t.qZA(),t.TgZ(34,"dd"),t._uU(35),t.qZA(),t.TgZ(36,"dt"),t._uU(37,"Cache directory"),t.qZA(),t.TgZ(38,"dd"),t._uU(39),t.qZA(),t.TgZ(40,"dt"),t._uU(41,"Data directory"),t.qZA(),t.TgZ(42,"dd"),t._uU(43),t.qZA(),t.qZA(),t.TgZ(44,"dl",3),t.TgZ(45,"dt"),t._uU(46,"Uptime"),t.qZA(),t.TgZ(47,"dd"),t._uU(48),t.ALo(49,"duration"),t.qZA(),t.TgZ(50,"dt"),t._uU(51,"Load average"),t.qZA(),t.TgZ(52,"dd"),t._uU(53),t.ALo(54,"number"),t.qZA(),t.TgZ(55,"dt"),t._uU(56,"Available processors"),t.qZA(),t.TgZ(57,"dd"),t._uU(58),t.qZA(),t.TgZ(59,"dt"),t._uU(60,"Heap memory"),t.qZA(),t.TgZ(61,"dd"),t._uU(62),t.ALo(63,"formatBytes"),t.ALo(64,"formatBytes"),t.ALo(65,"formatBytes"),t.qZA(),t.TgZ(66,"dt"),t._uU(67,"Non-heap memory"),t.qZA(),t.TgZ(68,"dd"),t._uU(69),t.ALo(70,"formatBytes"),t.ALo(71,"formatBytes"),t.ALo(72,"formatBytes"),t.qZA(),t.TgZ(73,"dt"),t._uU(74,"Thread count"),t.qZA(),t.TgZ(75,"dd"),t._uU(76),t.qZA(),t.qZA(),t.YNc(77,Dc,16,1,"ng-container",4),t.ALo(78,"async"),t.TgZ(79,"h4"),t._uU(80,"Root directories"),t.qZA(),t.TgZ(81,"table",5),t.TgZ(82,"tr"),t.TgZ(83,"th"),t._uU(84,"Directory"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Type"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Total space"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Unallocated space"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Usable space"),t.qZA(),t._UZ(93,"th",6),t.qZA(),t.YNc(94,Sc,15,11,"tr",7),t.qZA(),t.qZA()),2&e){const a=n.ngIf,i=t.oxw();t.xp6(5),t.Oqu(a.yamcsVersion),t.xp6(4),t.Oqu(a.revision),t.xp6(4),t.Oqu(a.serverId),t.xp6(5),t.Oqu(a.os),t.xp6(4),t.Oqu(a.arch),t.xp6(4),t.Oqu(a.jvm),t.xp6(5),t.Oqu(a.workingDirectory),t.xp6(4),t.Oqu(a.configDirectory),t.xp6(4),t.Oqu(a.cacheDirectory),t.xp6(4),t.Oqu(a.dataDirectory),t.xp6(5),t.Oqu(t.lcZ(49,22,a.uptime)),t.xp6(5),t.Oqu(t.xi3(54,24,a.loadAverage,"1.2-2")),t.xp6(5),t.Oqu(a.availableProcessors),t.xp6(4),t.lnq(" ",t.lcZ(63,27,a.heapMemory)," (used: ",t.lcZ(64,29,a.heapMemory-a.usedHeapMemory),", limit: ",t.lcZ(65,31,a.maxHeapMemory)||"n/a",")"),t.xp6(7),t.lnq(" ",t.lcZ(70,33,a.nonHeapMemory)," (used: ",t.lcZ(71,35,a.nonHeapMemory-a.usedNonHeapMemory),", limit: ",t.lcZ(72,37,a.maxNonHeapMemory)||"n/a",")"),t.xp6(7),t.Oqu(a.jvmThreadCount),t.xp6(1),t.Q6J("ngIf",t.lcZ(78,39,i.plugins$)),t.xp6(17),t.Q6J("ngForOf",a.rootDirectories)}}let Xt=(()=>{class e{constructor(a,i,o){this.yamcs=a,this.info$=new Z.X(null),this.plugins$=new Z.X([]),i.setTitle("System"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getGeneralInfo().then(a=>this.plugins$.next(a.plugins||[])),this.yamcs.yamcsClient.getSystemInfo().then(a=>this.info$.next(a))}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(J.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:5,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],[1,"dl-horizontal",2,"margin-top","0"],[1,"dl-horizontal"],[4,"ngIf"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngFor","ngForOf"],[1,"wrap200"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," System "),t.qZA(),t.YNc(3,Pc,95,41,"div",0),t.ALo(4,"async"),t.qZA()),2&a&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,i.info$)))},directives:[A,x,p.O5,w.O,p.sg],pipes:[p.Ov,Cc.u,p.JJ,Ct.b],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}"],changeDetection:0}),e})();var Nc=_(8713);function Yc(e,n){if(1&e&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij("(line: ",a.element.lineNumber,")")}}let Wt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-trace-element"]],inputs:{element:"element"},decls:4,vars:5,consts:[[3,"innerHTML"],[4,"ngIf"]],template:function(a,i){1&a&&(t._UZ(0,"span",0),t.ALo(1,"classNameHtml"),t._uU(2),t.YNc(3,Yc,2,1,"small",1)),2&a&&(t.Q6J("innerHTML",t.lcZ(1,3,i.element.className),t.oJD),t.xp6(2),t.hij(".",i.element.methodName,"\n"),t.xp6(1),t.Q6J("ngIf",i.element.lineNumber))},directives:[p.O5],pipes:[Nc.f],encapsulation:2,changeDetection:0}),e})();function kc(e,n){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function Qc(e,n){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function Ic(e,n){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function Oc(e,n){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function Rc(e,n){if(1&e&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._UZ(2,"app-trace-element",10),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(2),t.Q6J("element",a)}}function Jc(e,n){if(1&e&&(t.TgZ(0,"table",8),t.YNc(1,Rc,3,1,"tr",9),t.qZA()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.trace)}}function $c(e,n){1&e&&(t.ynx(0),t._uU(1,"Information not available"),t.BQk())}function Lc(e,n){if(1&e&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t.TgZ(2,"a",1),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA(),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"div",2),t.TgZ(7,"dl",3),t.TgZ(8,"dt"),t._uU(9,"ID"),t.qZA(),t.TgZ(10,"dd"),t._uU(11),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"Native"),t.qZA(),t.TgZ(18,"dd"),t.YNc(19,kc,2,0,"mat-icon",4),t.YNc(20,Qc,2,0,"mat-icon",4),t.qZA(),t.TgZ(21,"dt"),t._uU(22,"Suspended"),t.qZA(),t.TgZ(23,"dd"),t.YNc(24,Ic,2,0,"mat-icon",4),t.YNc(25,Oc,2,0,"mat-icon",4),t.qZA(),t.TgZ(26,"dt"),t._uU(27,"Group"),t.qZA(),t.TgZ(28,"dd"),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"div",5),t._UZ(31,"mat-divider"),t.qZA(),t.TgZ(32,"h4"),t._uU(33,"Stack trace"),t.qZA(),t.YNc(34,Jc,2,1,"table",6),t.YNc(35,$c,2,0,"ng-container",0),t.qZA(),t.qZA()),2&e){const a=n.ngIf;t.xp6(5),t.hij(" ",a.name," "),t.xp6(6),t.Oqu(a.id),t.xp6(4),t.Oqu(a.name),t.xp6(4),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native),t.xp6(4),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended),t.xp6(4),t.Oqu((null==a.group?null:a.group.name)||"-"),t.xp6(5),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}let Kt=(()=>{class e{constructor(a,i,o){this.yamcs=i,this.title=o,this.thread$=new Z.X(null),a.paramMap.subscribe(r=>{const c=r.get("id");this.changeThread(Number(c))})}changeThread(a){this.yamcs.yamcsClient.getThread(a).then(i=>{this.thread$.next(i),this.title.setTitle(i.name)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.gz),t.Y36(d.C),t.Y36(b.Dx))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],["class","icon14",4,"ngIf"],[1,"section-divider"],["yaDataTable","",4,"ngIf"],[1,"icon14"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"element"]],template:function(a,i){1&a&&(t.YNc(0,Lc,36,10,"app-admin-page",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,i.thread$))},directives:[p.O5,A,x,U.zs,u.yS,y.Hw,I.d,w.O,p.sg,Wt],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})();var Mc=_(7579);function Bc(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1,"ID"),t.qZA())}function Hc(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Oqu(a.id)}}function Fc(e,n){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Name"),t.qZA())}function Ec(e,n){if(1&e&&(t.TgZ(0,"td",19),t.TgZ(1,"a",20),t._uU(2),t.qZA(),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("routerLink",a.id),t.xp6(1),t.hij(" ",a.name," ")}}function Gc(e,n){1&e&&t._UZ(0,"th",21)}function jc(e,n){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"playlist_play"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function zc(e,n){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"timer"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function Vc(e,n){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"pause"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function Xc(e,n){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"block"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function Wc(e,n){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,jc,2,1,"mat-icon",23),t.YNc(2,zc,2,1,"mat-icon",23),t.YNc(3,Vc,2,1,"mat-icon",23),t.YNc(4,Xc,2,1,"mat-icon",23),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf","RUNNABLE"===a.state),t.xp6(1),t.Q6J("ngIf","TIMED_WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","BLOCKED"===a.state)}}function Kc(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Native"),t.qZA())}function tl(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function el(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function al(e,n){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,tl,2,0,"mat-icon",26),t.YNc(2,el,2,0,"ng-container",26),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native)}}function nl(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Suspended"),t.qZA())}function il(e,n){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function ol(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function sl(e,n){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,il,2,0,"mat-icon",26),t.YNc(2,ol,2,0,"ng-container",26),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended)}}function rl(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Group"),t.qZA())}function cl(e,n){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.hij(" ",(null==a.group?null:a.group.name)||"-"," ")}}function ll(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Frame"),t.qZA())}function pl(e,n){if(1&e&&t._UZ(0,"app-trace-element",28),2&e){const a=t.oxw().$implicit;t.Q6J("element",a.trace[0])}}function ml(e,n){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function ul(e,n){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,pl,1,1,"app-trace-element",27),t.YNc(2,ml,2,0,"ng-container",26),t.qZA()),2&e){const a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}function _l(e,n){1&e&&t._UZ(0,"th",29)}function dl(e,n){1&e&&t._UZ(0,"td",19)}function gl(e,n){1&e&&t._UZ(0,"tr",30)}function fl(e,n){1&e&&t._UZ(0,"tr",31)}function hl(e,n){if(1&e&&(t.TgZ(0,"table",1),t.ynx(1,2),t.YNc(2,Bc,2,0,"th",3),t.YNc(3,Hc,2,1,"td",4),t.BQk(),t.ynx(4,5),t.YNc(5,Fc,2,0,"th",3),t.YNc(6,Ec,3,2,"td",4),t.BQk(),t.ynx(7,6),t.YNc(8,Gc,1,0,"th",7),t.YNc(9,Wc,5,4,"td",8),t.BQk(),t.ynx(10,9),t.YNc(11,Kc,2,0,"th",10),t.YNc(12,al,3,2,"td",4),t.BQk(),t.ynx(13,11),t.YNc(14,nl,2,0,"th",10),t.YNc(15,sl,3,2,"td",4),t.BQk(),t.ynx(16,12),t.YNc(17,rl,2,0,"th",10),t.YNc(18,cl,2,1,"td",4),t.BQk(),t.ynx(19,13),t.YNc(20,ll,2,0,"th",10),t.YNc(21,ul,3,2,"td",4),t.BQk(),t.ynx(22,14),t.YNc(23,_l,1,0,"th",15),t.YNc(24,dl,1,0,"td",4),t.BQk(),t.YNc(25,gl,1,0,"tr",16),t.YNc(26,fl,1,0,"tr",17),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}let Tl=(()=>{class e{constructor(){this.displayedColumns=["id","state","name","trace","native","suspended","group","actions"],this.dataSource=new s.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,i)=>a.name.toLowerCase().indexOf(i)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.threads||[],this.dataSource.filter=this.filter}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-threads-table"]],viewQuery:function(a,i){if(1&a&&t.Gf(g.YE,5),2&a){let o;t.iGM(o=t.CRH())&&(i.sort=o.first)}},inputs:{threads:"threads",filter:"filter"},features:[t.TTD],decls:1,vars:1,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",3,"dataSource",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","native"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","suspended"],["matColumnDef","group"],["matColumnDef","trace"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],["mat-header-cell",""],[4,"ngIf"],[3,"element",4,"ngIf"],[3,"element"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,i){1&a&&t.YNc(0,hl,27,3,"table",0),2&a&&t.Q6J("ngIf",i.dataSource)},directives:[p.O5,s.BZ,g.YE,s.w1,s.fO,s.ge,g.nU,s.Dz,s.ev,u.yS,y.Hw,D.gM,Wt,s.as,s.XQ,s.nj,s.Gk],encapsulation:2,changeDetection:0}),e})();function Zl(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ALL (",t.lcZ(1,1,a.allThreadCount$),") ")}}function bl(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" RUNNABLE (",t.lcZ(1,1,a.runnableThreadCount$),") ")}}function Al(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" TIMED WAITING (",t.lcZ(1,1,a.timedWaitingThreadCount$),") ")}}function xl(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" WAITING (",t.lcZ(1,1,a.waitingThreadCount$),") ")}}function yl(e,n){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedThreadCount$),") ")}}const Ul=[{path:"",canActivate:[at.a,ee.U,ae.t],canActivateChild:[at.a],runGuardsAndResolvers:"always",component:Vt,children:[{path:"",pathMatch:"full",component:ot},{path:"http-traffic",component:wt},{path:"sessions",component:zt},{path:"routes",component:Gt},{path:"leap-seconds",component:Mt},{path:"processor-types",component:Bt},{path:"replication",component:Ht},{path:"services",component:jt},{path:"databases",children:[{path:"",pathMatch:"full",component:qt},{path:":database",component:lt,children:[{path:"",pathMatch:"full",redirectTo:"tables"},{path:"tables",pathMatch:"full",component:vt},{path:"tables/:table",component:yt,children:[{path:"",pathMatch:"full",redirectTo:"info"},{path:"info",component:xt},{path:"data",component:At},{path:"script",component:Ut}]},{path:"shell",pathMatch:"full",component:ut},{path:"streams",pathMatch:"full",component:bt},{path:"streams/:stream",component:ft,children:[{path:"",pathMatch:"full",redirectTo:"columns"},{path:"columns",component:_t},{path:"data",component:gt},{path:"script",component:Zt}]}]}]},{path:"rocksdb",runGuardsAndResolvers:"always",children:[{path:"",pathMatch:"full",redirectTo:"databases"},{path:"databases",pathMatch:"full",component:Et},{path:"databases/:tablespace",children:[{path:"**",component:Ft}]}]},{path:"iam/service-accounts",pathMatch:"full",component:Jt},{path:"iam/service-accounts/create",pathMatch:"full",component:Pt},{path:"iam/users",pathMatch:"full",component:Lt},{path:"iam/users/create",pathMatch:"full",component:Nt},{path:"iam/users/:username",pathMatch:"full",component:$t},{path:"iam/users/:username/edit",pathMatch:"full",component:kt},{path:"iam/groups",pathMatch:"full",component:It},{path:"iam/groups/create",pathMatch:"full",component:St},{path:"iam/groups/:name",pathMatch:"full",component:Qt},{path:"iam/groups/:name/edit",pathMatch:"full",component:Yt},{path:"iam/roles",pathMatch:"full",component:Rt},{path:"iam/roles/:name",pathMatch:"full",component:Ot},{path:"threads",pathMatch:"full",component:(()=>{class e{constructor(a,i,o,r,c){this.yamcs=a,this.route=o,this.router=r,this.filterControl=new l.NI,this.filterValue$=new Z.X(null),this.allThreads$=new Mc.x,this.allThreadCount$=this.allThreads$.pipe((0,v.U)(m=>m.length)),this.runnableThreads$=this.allThreads$.pipe((0,v.U)(m=>m.filter(h=>"RUNNABLE"===h.state))),this.runnableThreadCount$=this.runnableThreads$.pipe((0,v.U)(m=>m.length)),this.timedWaitingThreads$=this.allThreads$.pipe((0,v.U)(m=>m.filter(h=>"TIMED_WAITING"===h.state))),this.timedWaitingThreadCount$=this.timedWaitingThreads$.pipe((0,v.U)(m=>m.length)),this.waitingThreads$=this.allThreads$.pipe((0,v.U)(m=>m.filter(h=>"WAITING"===h.state))),this.waitingThreadCount$=this.waitingThreads$.pipe((0,v.U)(m=>m.length)),this.blockedThreads$=this.allThreads$.pipe((0,v.U)(m=>m.filter(h=>"BLOCKED"===h.state))),this.blockedThreadCount$=this.blockedThreads$.pipe((0,v.U)(m=>m.length)),i.setTitle("Threads"),this.threadDumpURL=a.yamcsClient.getThreadDumpURL(),this.refresh(),this.syncSubscription=c.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getThreads().then(a=>{this.allThreads$.next(a.threads||[])})}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.C),t.Y36(b.Dx),t.Y36(u.gz),t.Y36(u.F0),t.Y36(J.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:41,vars:32,consts:[["mat-button","","color","primary",3,"href"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter threads",3,"formControl"],["animationDuration","0ms",1,"secondary"],["mat-tab-label",""],[3,"threads","filter"]],template:function(a,i){1&a&&(t.TgZ(0,"app-admin-page"),t.TgZ(1,"app-admin-toolbar"),t._uU(2," Threads \xa0\xa0\xa0 "),t.TgZ(3,"a",0),t.TgZ(4,"mat-icon"),t._uU(5,"notes"),t.qZA(),t._uU(6," TEXT DUMP "),t.qZA(),t.qZA(),t.TgZ(7,"div",1),t.TgZ(8,"div",2),t._UZ(9,"app-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4),t.TgZ(11,"mat-tab"),t.YNc(12,Zl,2,3,"ng-template",5),t._UZ(13,"br"),t._UZ(14,"app-threads-table",6),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA(),t.TgZ(17,"mat-tab"),t.YNc(18,bl,2,3,"ng-template",5),t._UZ(19,"br"),t._UZ(20,"app-threads-table",6),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA(),t.TgZ(23,"mat-tab"),t.YNc(24,Al,2,3,"ng-template",5),t._UZ(25,"br"),t._UZ(26,"app-threads-table",6),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA(),t.TgZ(29,"mat-tab"),t.YNc(30,xl,2,3,"ng-template",5),t._UZ(31,"br"),t._UZ(32,"app-threads-table",6),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA(),t.TgZ(35,"mat-tab"),t.YNc(36,yl,2,3,"ng-template",5),t._UZ(37,"br"),t._UZ(38,"app-threads-table",6),t.ALo(39,"async"),t.ALo(40,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(3),t.Q6J("href",i.threadDumpURL,t.LSH),t.xp6(6),t.Q6J("formControl",i.filterControl),t.xp6(5),t.Q6J("threads",t.lcZ(15,12,i.allThreads$))("filter",t.lcZ(16,14,i.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(21,16,i.runnableThreads$))("filter",t.lcZ(22,18,i.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(27,20,i.timedWaitingThreads$))("filter",t.lcZ(28,22,i.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(33,24,i.waitingThreads$))("filter",t.lcZ(34,26,i.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(39,28,i.blockedThreads$))("filter",t.lcZ(40,30,i.filterValue$)))},directives:[A,x,U.zs,y.Hw,P.a,l.JJ,l.oH,k.SP,k.uX,k.uD,Tl],pipes:[p.Ov],encapsulation:2,changeDetection:0}),e})()},{path:"threads/:id",component:Kt},{path:"system",pathMatch:"full",component:Xt}]}];let vl=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Ul)],u.Bz]}),e})(),Cl=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[et.m]]}),e})(),wl=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[et.m,Cl,vl]]}),e})()}}]);