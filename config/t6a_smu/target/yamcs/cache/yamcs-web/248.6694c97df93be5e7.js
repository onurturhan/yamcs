"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[248],{2248:(nt,u,c)=>{c.r(u),c.d(u,{InstanceHomeModule:()=>st});var _=c(7573),m=c(1083),g=c(7309),p=c(4375),b=c(9326),r=c(1135),S=c(1731),T=c(480),h=c(381),t=c(5e3),y=c(2313),Z=c(8928),v=c(9140),f=c(9808),d=c(4847),o=c(8279),D=c(2768),N=c(119),R=c(3329);function A(a,s){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Packet"),t.qZA())}const C=function(a,s){return{c:a,name:s}};function Y(a,s){if(1&a&&(t.TgZ(0,"a",22),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("queryParams",t.WLB(2,C,n.yamcs.context,e.packetName)),t.xp6(1),t.hij(" ",e.packetName," ")}}function P(a,s){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.packetName)}}function k(a,s){if(1&a&&(t.TgZ(0,"td",19),t.YNc(1,Y,2,5,"a",20),t.YNc(2,P,2,1,"ng-container",21),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.config.tmArchive),t.xp6(1),t.Q6J("ngIf",!e.config.tmArchive)}}function U(a,s){1&a&&t._UZ(0,"td",23)}function I(a,s){1&a&&(t.TgZ(0,"th",24),t._uU(1,"Received"),t.qZA())}function Q(a,s){if(1&a&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"deltaWith"),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.lastReceived,e.lastPacketTime)||"-"," ")}}function $(a,s){1&a&&t._UZ(0,"td",23)}function B(a,s){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Packet Time"),t.qZA())}function H(a,s){if(1&a&&(t.TgZ(0,"td",19),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.lastPacketTime)||"-"," ")}}function w(a,s){1&a&&t._UZ(0,"td",23)}function j(a,s){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Packet Rate"),t.qZA())}function J(a,s){if(1&a&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e.packetRate," p/s ")}}function M(a,s){if(1&a&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"async"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,e.totalPacketRate$)," p/s ")}}function O(a,s){1&a&&(t.TgZ(0,"th",18),t._uU(1,"Data Rate "),t.qZA())}function L(a,s){if(1&a&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.dataRate)," ")}}function F(a,s){if(1&a&&(t.TgZ(0,"td",26),t._uU(1),t.ALo(2,"dataRate"),t.ALo(3,"async"),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,e.totalDataRate$))," ")}}function G(a,s){1&a&&t._UZ(0,"th",27)}function X(a,s){1&a&&t._UZ(0,"td",19)}function z(a,s){1&a&&t._UZ(0,"td",23)}function E(a,s){1&a&&t._UZ(0,"tr",28)}function W(a,s){1&a&&t._UZ(0,"tr",29)}function K(a,s){1&a&&t._UZ(0,"tr",30)}function q(a,s){if(1&a&&(t.TgZ(0,"table",1),t.ynx(1,2),t.YNc(2,A,2,0,"th",3),t.YNc(3,k,3,2,"td",4),t.YNc(4,U,1,0,"td",5),t.BQk(),t.ynx(5,6),t.YNc(6,I,2,0,"th",7),t.YNc(7,Q,3,4,"td",8),t.YNc(8,$,1,0,"td",5),t.BQk(),t.ynx(9,9),t.YNc(10,B,2,0,"th",3),t.YNc(11,H,3,3,"td",4),t.YNc(12,w,1,0,"td",5),t.BQk(),t.ynx(13,10),t.YNc(14,j,2,0,"th",3),t.YNc(15,J,2,1,"td",8),t.YNc(16,M,3,3,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,O,2,0,"th",3),t.YNc(19,L,3,3,"td",8),t.YNc(20,F,4,5,"td",11),t.BQk(),t.ynx(21,13),t.YNc(22,G,1,0,"th",14),t.YNc(23,X,1,0,"td",4),t.YNc(24,z,1,0,"td",5),t.BQk(),t.YNc(25,E,1,0,"tr",15),t.YNc(26,W,1,0,"tr",16),t.YNc(27,K,1,0,"tr",17),t.qZA()),2&a){const e=t.oxw();t.Q6J("dataSource",e.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",e.displayedColumns)}}let V=(()=>{class a{constructor(e,n){this.yamcs=e,this.statsByName={},this.dataSource=new o.by,this.totalPacketRate$=new r.X(0),this.totalDataRate$=new r.X(0),this.displayedColumns=["packetName","lastPacketTime","lastReceived","packetRate","dataRate","actions"],this.config=n.getConfig()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.tmstats$&&!this.tmstatsSubscription&&this.yamcs.yamcsClient.getPacketNames(this.yamcs.instance).then(e=>{for(const n of e||[])this.statsByName[n]={packetName:n,packetRate:0,dataRate:0};this.updateData(),this.tmstatsSubscription=this.tmstats$.subscribe(n=>{for(const i of n||[])this.statsByName[i.packetName]=i;this.updateData()})})}updateData(){const e=Object.values(this.statsByName);let n=0,i=0;for(const l of e)n+=Number(l.packetRate),i+=Number(l.dataRate);this.totalPacketRate$.next(n),this.totalDataRate$.next(i),this.dataSource.data=e}ngOnDestroy(){this.tmstatsSubscription&&this.tmstatsSubscription.unsubscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.C),t.Y36(T.E))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tmstats-table"]],viewQuery:function(e,n){if(1&e&&t.Gf(d.YE,5),2&e){let i;t.iGM(i=t.CRH())&&(n.sort=i.first)}},inputs:{tmstats$:"tmstats$"},decls:1,vars:1,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","packetName","matSortDirection","asc","matSortDisableClear","",3,"dataSource",4,"ngIf"],["mat-table","","matSort","","matSortActive","packetName","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","packetName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","lastReceived"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","lastPacketTime"],["matColumnDef","packetRate"],["mat-footer-cell","","style","text-align: right",4,"matFooterCellDef"],["matColumnDef","dataRate"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["routerLink","/telemetry/packets",3,"queryParams",4,"ngIf"],[4,"ngIf"],["routerLink","/telemetry/packets",3,"queryParams"],["mat-footer-cell",""],["mat-header-cell",""],["mat-cell","",2,"text-align","right"],["mat-footer-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(e,n){1&e&&t.YNc(0,q,28,4,"table",0),2&e&&t.Q6J("ngIf",n.dataSource)},directives:[f.O5,o.BZ,d.YE,o.w1,o.fO,o.ge,d.nU,o.Dz,o.ev,m.yS,o.mD,o.yh,o.as,o.XQ,o.nj,o.Gk,o.Ke,o.Q2],pipes:[D.m,N.i,f.Ov,R.z],encapsulation:2,changeDetection:0}),a})();function tt(a,s){if(1&a&&(t.ynx(0),t._UZ(1,"app-tmstats-table",2),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("tmstats$",e.tmstats$)}}const at=[{path:"",canActivate:[p.a,g.z],canActivateChild:[p.a],runGuardsAndResolvers:"always",component:b.K,children:[{path:"",pathMatch:"full",component:(()=>{class a{constructor(e,n,i,l){this.yamcs=e,this.authService=n,this.tmstats$=new r.X([]),this.config=l.getConfig(),this.user=n.getUser(),i.setTitle(this.yamcs.instance),this.yamcs.processor&&(this.tmstatsSubscription=e.yamcsClient.createTMStatisticsSubscription({instance:this.yamcs.instance,processor:this.yamcs.processor},ct=>this.tmstats$.next(ct.tmstats||[])))}showPackets(){return this.user.hasAnyObjectPrivilegeOfType("ReadPacket")}ngOnDestroy(){this.tmstatsSubscription&&this.tmstatsSubscription.cancel()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.C),t.Y36(S.e),t.Y36(y.Dx),t.Y36(T.E))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],decls:5,vars:1,consts:[[1,"panel-content"],[4,"ngIf"],[3,"tmstats$"]],template:function(e,n){1&e&&(t.TgZ(0,"app-instance-page"),t.TgZ(1,"app-instance-toolbar"),t._uU(2,"Home"),t.qZA(),t.TgZ(3,"div",0),t.YNc(4,tt,2,1,"ng-container",1),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Q6J("ngIf",n.showPackets()))},directives:[Z.a,v.k,f.O5,V],encapsulation:2,changeDetection:0}),a})()}]}];let et=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.Bz.forChild(at)],m.Bz]}),a})(),st=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.m,et]]}),a})()}}]);