"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7],{3007:(ut,C,r)=>{r.r(C),r.d(C,{StorageModule:()=>lt});var F=r(7573),f=r(1083),y=r(4375),I=r(9322),w=r(449),g=r(8279),Z=r(1135),Q=r(9300),x=r(381),M=r(3043),l=r(3075),d=r(8966),e=r(5e3);let j=(()=>{class n{constructor(t,a,o,c){this.dialogRef=t,this.data=c,this.storageClient=o.createStorageClient(),this.form=a.group({name:["",l.kI.required]})}save(){let{path:t,bucketInstance:a,bucket:o}=this.data;t.startsWith("/")&&(t=t.substring(1));const c=this.form.value.name;this.storageClient.uploadObject(a,o,t?`${t}/${c}/`:`${c}/`,new Blob).then(()=>this.dialogRef.close(!0))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.so),e.Y36(l.qu),e.Y36(x.C),e.Y36(d.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name","pattern","\\w[\\w\\s\\.\\-\\(\\)\\[\\]]*"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Create folder"),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.TgZ(3,"form",2),e.TgZ(4,"label"),e._uU(5," Folder name "),e._UZ(6,"input",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-actions",4),e.TgZ(8,"button",5),e._uU(9,"CANCEL"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return a.save()}),e._uU(11,"CREATE"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("disabled",!a.form.valid))},directives:[d.uh,d.xY,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.c5,d.H8,d.ZT],encapsulation:2,changeDetection:0}),n})();var B=r(7365);let L=(()=>{class n{constructor(t,a,o,c,s){this.dialogRef=t,this.data=s,this.storageClient=o.createStorageClient(),this.bucketInstance=this.data.bucketInstance;const u=c.transform(this.data.name);this.filenameForm=a.group({name:[u,[l.kI.required]]})}rename(){return function(n,i,t,a){return new(t||(t=Promise))(function(c,s){function u(m){try{h(a.next(m))}catch(k){s(k)}}function p(m){try{h(a.throw(m))}catch(k){s(k)}}function h(m){m.done?c(m.value):function o(c){return c instanceof t?c:new t(function(s){s(c)})}(m.value).then(u,p)}h((a=a.apply(n,i||[])).next())})}(this,void 0,void 0,function*(){let t;const a=this.data.name.lastIndexOf("/");-1!==a&&(t=this.data.name.substring(0,a+1));const c=yield(yield this.storageClient.getObject(this.bucketInstance,this.data.bucket,this.data.name)).blob(),s=(t||"")+this.filenameForm.get("name").value;yield this.storageClient.uploadObject(this.bucketInstance,this.data.bucket,s,c),yield this.storageClient.deleteObject(this.bucketInstance,this.data.bucket,this.data.name),this.dialogRef.close(s)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.so),e.Y36(l.qu),e.Y36(x.C),e.Y36(B.X),e.Y36(d.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-rename-object-dialog"]],decls:13,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["filename",""],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Rename file"),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.TgZ(3,"form",2),e.TgZ(4,"label"),e._uU(5," Name "),e._UZ(6,"input",3,4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions",5),e.TgZ(9,"button",6),e._uU(10,"CANCEL"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return a.rename()}),e._uU(12,"RENAME"),e.qZA(),e.qZA()),2&t){let o;e.xp6(3),e.Q6J("formGroup",a.filenameForm),e.xp6(1),e.ekj("invalid",null==(o=a.filenameForm.get("name"))?null:o.invalid),e.xp6(7),e.Q6J("disabled",!a.filenameForm.valid)}},directives:[d.uh,d.xY,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,d.H8,d.ZT],encapsulation:2}),n})();var R=r(8372),T=r(7423),P=r(3874),_=r(9808),H=r(7238),z=r(5899);const W=["tableWrapper"];function X(n,i){1&n&&(e.ynx(0),e._uU(1," Finished "),e.BQk())}function G(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon",11),e._uU(2,"error"),e.qZA(),e._uU(3," Failed "),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("matTooltip",t.err)}}function V(n,i){1&n&&e._UZ(0,"mat-progress-bar",12)}function K(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",8),e.YNc(4,X,2,0,"ng-container",9),e.YNc(5,G,4,1,"ng-container",9),e.YNc(6,V,1,0,"mat-progress-bar",10),e.qZA(),e.qZA()),2&n){const t=i.$implicit;e.ekj("failed",t.err),e.xp6(2),e.Oqu(t.filename),e.xp6(2),e.Q6J("ngIf",t.complete&&!t.err),e.xp6(1),e.Q6J("ngIf",t.complete&&t.err),e.xp6(1),e.Q6J("ngIf",!t.complete)}}let ee=(()=>{class n{constructor(t,a){this.data=a,this.uploads$=a.uploads$.pipe((0,R.b)(500))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.so),e.Y36(d.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-upload-progress-dialog"]],viewQuery:function(t,a){if(1&t&&e.Gf(W,7),2&t){let o;e.iGM(o=e.CRH())&&(a.tableWrapper=o.first)}},decls:12,vars:3,consts:[["mat-dialog-title",""],[2,"float","right"],["mat-icon-button","","mat-dialog-close",""],[1,"mat-typography"],[1,"table-wrapper"],["tableWrapper",""],[2,"font-size","small","width","100%"],[3,"failed",4,"ngFor","ngForOf"],[2,"width","100px","text-align","center"],[4,"ngIf"],["mode","buffer",4,"ngIf"],[1,"icon14",2,"vertical-align","middle",3,"matTooltip"],["mode","buffer"]],template:function(t,a){1&t&&(e.TgZ(0,"h3",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.TgZ(3,"mat-icon"),e._uU(4,"close"),e.qZA(),e.qZA(),e.qZA(),e._uU(5," Uploads\n"),e.qZA(),e.TgZ(6,"mat-dialog-content",3),e.TgZ(7,"div",4,5),e.TgZ(9,"table",6),e.YNc(10,K,7,6,"tr",7),e.ALo(11,"async"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(10),e.Q6J("ngForOf",e.lcZ(11,1,a.uploads$)))},directives:[d.uh,T.lW,d.ZT,P.Hw,d.xY,_.sg,_.O5,H.gM,z.pW],pipes:[_.Ov],styles:["tr.failed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:red}h3.mat-dialog-title[_ngcontent-%COMP%]{background-color:#24292e;color:#fff;margin:0;padding-left:5px;font-size:16px;line-height:40px}table[_ngcontent-%COMP%]{border-collapse:collapse}.table-wrapper[_ngcontent-%COMP%]{height:150px;overflow-y:scroll;overflow-x:hidden;padding:5px}"],changeDetection:0}),n})();var D=r(2313);const te=[[["app-storage-toolbar"]],[["app-detail-pane"]],"*"],ne=["app-storage-toolbar","app-detail-pane","*"];let U=(()=>{class n{constructor(){this.noscroll=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-storage-page"]],inputs:{noscroll:"noscroll"},ngContentSelectors:ne,decls:4,vars:2,consts:[[1,"page-content"]],template:function(t,a){1&t&&(e.F$t(te),e.Hsn(0),e.TgZ(1,"div",0),e.Hsn(2,1),e.Hsn(3,2),e.qZA()),2&t&&(e.xp6(1),e.Udp("overflow",a.noscroll?"hidden":"auto"))},styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto}"],changeDetection:0}),n})();var S=r(8991),O=r(4594);function ae(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showDetailPane(!0)}),e._uU(1," SHOW INFO PANEL "),e.qZA()}}function oe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showDetailPane(!1)}),e._uU(1," HIDE INFO PANEL "),e.qZA()}}function ie(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ae,2,0,"button",3),e.ALo(2,"async"),e.YNc(3,oe,2,0,"button",3),e.ALo(4,"async"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!e.lcZ(2,2,t.showDetailPane$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,t.showDetailPane$))}}const ce=["*"];let N=(()=>{class n{constructor(t){this.preferenceStore=t,this.hasDetailPane=!1,this.showDetailPane$=t.detailPane$}showDetailPane(t){this.preferenceStore.setShowDetailPane(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-storage-toolbar"]],inputs:{hasDetailPane:"hasDetailPane"},ngContentSelectors:ce,decls:5,vars:1,consts:[[1,"top"],[2,"flex","1 1 auto"],[4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"]],template:function(t,a){1&t&&(e.F$t(),e.TgZ(0,"mat-toolbar",0),e.TgZ(1,"mat-toolbar-row"),e.Hsn(2),e._UZ(3,"span",1),e.YNc(4,ie,5,6,"ng-container",2),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",a.hasDetailPane))},directives:[O.Ye,O.rD,_.O5,T.lW],pipes:[_.Ov],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#f7f7f7;box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0}),n})();var v=r(2638),se=r(4298),re=r(1821),b=r(7587),le=r(8493),ue=r(2181),de=r(4834),ge=r(5632),me=r(119),J=r(5682);const he=["droparea"],fe=["uploader"];function _e(n,i){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"image_not_supported"),e.qZA())}function be(n,i){1&n&&(e.TgZ(0,"mat-icon"),e._uU(1,"image"),e.qZA())}function ke(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"img",17),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.selection.selected[0].objectUrl,e.LSH)}}function Ze(n,i){1&n&&(e.TgZ(0,"div",18),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA(),e.TgZ(3,"p"),e._uU(4," Select an image to make it appear here "),e.qZA(),e.qZA())}function xe(n,i){if(1&n&&e._UZ(0,"app-breadcrumb",22),2&n){const t=i.$implicit;e.Q6J("link",t.route)("label",t.name)}}const Te=function(){return["/storage"]},Pe=function(n){return{instance:n}},ve=function(n,i){return["/storage",n,i]};function Ae(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"app-breadcrumb-trail"),e._UZ(2,"app-breadcrumb",19),e._UZ(3,"app-breadcrumb",20),e.YNc(4,xe,1,2,"app-breadcrumb",21),e.qZA(),e.BQk()),2&n){const t=i.ngIf,a=e.oxw();e.xp6(2),e.Q6J("link",e.DdM(5,Te))("queryParams",e.VKq(6,Pe,a.bucketInstance)),e.xp6(1),e.Q6J("link",e.WLB(8,ve,a.bucketInstance,a.name))("label",a.name),e.xp6(1),e.Q6J("ngForOf",t)}}function Ce(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"th",37),e.TgZ(1,"input",38),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw(2);return o?c.masterToggle():null}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())}}function ye(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",39),e.TgZ(1,"input",40),e.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const s=e.CHM(t).$implicit,u=e.oxw(2);return o?u.selection.toggle(s):null}),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("checked",a.selection.isSelected(t))}}function we(n,i){1&n&&(e.TgZ(0,"th",41),e._uU(1,"Name"),e.qZA())}function Be(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon",43),e._uU(2,"folder"),e.qZA(),e.TgZ(3,"a",44),e.NdJ("click",function(a){return a.stopPropagation()}),e._uU(4),e.ALo(5,"filename"),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit,a=e.oxw(2);e.xp6(3),e.Q6J("routerLink","/storage/"+a.bucketInstance+"/"+a.name+"/"+t.name),e.xp6(1),e.hij(" ",e.lcZ(5,2,t.name)," ")}}function De(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon",43),e._uU(2,"description"),e.qZA(),e.TgZ(3,"a",45),e.NdJ("click",function(a){return a.stopPropagation()}),e._uU(4),e.ALo(5,"filename"),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("href",t.objectUrl,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(5,2,t.name)," ")}}function Ue(n,i){if(1&n&&(e.TgZ(0,"td",42),e.YNc(1,Be,6,4,"ng-container",5),e.YNc(2,De,6,4,"ng-container",5),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.folder),e.xp6(1),e.Q6J("ngIf",!t.folder)}}function Se(n,i){1&n&&(e.TgZ(0,"th",41),e._uU(1,"Date modified"),e.qZA())}function Oe(n,i){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.ALo(2,"datetime"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.modified)||"-"," ")}}function Ne(n,i){1&n&&(e.TgZ(0,"th",41),e._uU(1,"Size"),e.qZA())}function Je(n,i){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.ALo(2,"formatBytes"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.size)||"-"," ")}}function qe(n,i){1&n&&e._UZ(0,"th",46)}function Ye(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-more"),e.TgZ(1,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).renameFile(o)}),e._uU(2," Rename "),e.qZA(),e.TgZ(3,"a",48),e._uU(4," Download "),e.qZA(),e._UZ(5,"mat-divider"),e.TgZ(6,"button",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).deleteFile(o)}),e._uU(7," Delete "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("href",t.objectUrl,e.LSH)}}function $e(n,i){if(1&n&&(e.TgZ(0,"td",42),e.YNc(1,Ye,8,1,"app-more",5),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",!t.folder)}}function Fe(n,i){1&n&&e._UZ(0,"tr",49)}function Ie(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",50),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).toggleOne(c)}),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw(2);e.ekj("selected",a.selection.isSelected(t))}}function Qe(n,i){if(1&n&&(e.TgZ(0,"table",23),e.ynx(1,24),e.YNc(2,Ce,2,1,"th",25),e.YNc(3,ye,2,1,"td",26),e.BQk(),e.ynx(4,27),e.YNc(5,we,2,0,"th",28),e.YNc(6,Ue,3,2,"td",29),e.BQk(),e.ynx(7,30),e.YNc(8,Se,2,0,"th",28),e.YNc(9,Oe,3,3,"td",29),e.BQk(),e.ynx(10,31),e.YNc(11,Ne,2,0,"th",28),e.YNc(12,Je,3,3,"td",29),e.BQk(),e.ynx(13,32),e.YNc(14,qe,1,0,"th",33),e.YNc(15,$e,2,1,"td",34),e.BQk(),e.YNc(16,Fe,1,0,"tr",35),e.YNc(17,Ie,1,2,"tr",36),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("cdkHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("cdkRowDefColumns",t.displayedColumns)}}function Me(n,i){1&n&&(e.TgZ(0,"app-empty-message"),e._uU(1,"Empty directory."),e.qZA())}let q=(()=>{class n{constructor(t,a,o,c,s){this.dialog=t,this.route=o,this.breadcrumb$=new Z.X([]),this.dragActive$=new Z.X(!1),this.showPreview$=new Z.X(!1),this.previewWidth$=new Z.X(600),this.displayedColumns=["select","name","size","modified","actions"],this.dataSource=new g.by([]),this.selection=new w.Ov(!0,[]),this.uploads$=new Z.X([]),this.progressDialogOpen=!1,this.bucketInstance=o.snapshot.parent.paramMap.get("instance"),this.name=o.snapshot.parent.paramMap.get("name"),s.setTitle(this.name),this.storageClient=c.createStorageClient(),this.loadCurrentFolder(),this.routerSubscription=a.events.pipe((0,Q.h)(u=>u instanceof f.m2)).subscribe(()=>{this.loadCurrentFolder()})}loadCurrentFolder(){const t={delimiter:"/"},a=this.route.snapshot.url;a.length&&(t.prefix=a.map(o=>o.path).join("/")+"/"),this.storageClient.listObjects(this.bucketInstance,this.name,t).then(o=>{this.updateBrowsePath(),this.changedir(o)})}changedir(t){this.selection.clear();const a=[];for(const o of t.prefixes||[])a.push({folder:!0,name:o});for(const o of t.objects||[])o.name.endsWith("/")||a.push({folder:!1,name:o.name,modified:o.created,size:o.size,objectUrl:this.storageClient.getObjectURL(this.bucketInstance,this.name,o.name)});this.dataSource.data=a}isAllSelected(){const a=this.dataSource.data.length;return this.selection.selected.length===a&&a>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createFolder(){this.dialog.open(j,{width:"400px",data:{bucketInstance:this.bucketInstance,bucket:this.name,path:this.getCurrentPath()}}).afterClosed().subscribe({next:()=>this.loadCurrentFolder()})}uploadObjects(){let t=this.getCurrentPath();t.startsWith("/")&&(t=t.substring(1));const a=this.uploaderEl.nativeElement.files,o=[];for(const c in a)if(!isNaN(parseInt(c,10))){const s=a[c],m=this.storageClient.uploadObject(this.bucketInstance,this.name,t?t+"/"+s.name:s.name,s);o.push({filename:s.name,promise:m})}o.length&&this.showUploadProgress().then(()=>{for(const c of o)this.trackUpload(c);this.settlePromises(o.map(c=>c.promise)).then(()=>{this.loadCurrentFolder()})})}settlePromises(t){return Promise.all(t.map(a=>a.then(o=>({state:"fullfilled",value:o}),o=>({state:"rejected",value:o}))))}trackUpload(t){t.promise.then(()=>{t.complete=!0,this.uploads$.next([...this.uploads$.value])}).catch(a=>{a.response.json().then(o=>{t.complete=!0,t.err=o.msg,this.uploads$.next([...this.uploads$.value])}).catch(()=>{t.complete=!0,t.err=a.statusText,this.uploads$.next([...this.uploads$.value])})}),this.uploads$.next([...this.uploads$.value,t])}getCurrentPath(){let t="";for(const a of this.route.snapshot.url)t+="/"+a.path;return t||"/"}togglePreview(){this.showPreview$.next(!this.showPreview$.value)}deleteSelectedObjects(){const t=[],a=[];for(const o of this.selection.selected)o.folder?a.push(this.storageClient.listObjects(this.bucketInstance,this.name,{prefix:o.name}).then(c=>{t.push(...(c.objects||[]).map(u=>u.name))})):t.push(o.name);Promise.all(a).then(()=>{if(confirm(`You are about to delete ${t.length} files. Are you sure you want to continue?`)){const o=[];for(const c of t)o.push(this.storageClient.deleteObject(this.bucketInstance,this.name,c));Promise.all(o).then(()=>{this.loadCurrentFolder()})}})}renameFile(t){this.dialog.open(L,{data:{bucketInstance:this.bucketInstance,bucket:this.name,name:t.name},width:"400px"}).afterClosed().subscribe(o=>{o&&this.loadCurrentFolder()})}deleteFile(t){confirm(`Are you sure you want to delete ${t.name}?`)&&this.storageClient.deleteObject(this.bucketInstance,this.name,t.name).then(()=>{this.loadCurrentFolder()})}dragEnter(t){return this.dragActive$.next(!0),t.preventDefault(),t.stopPropagation(),!1}dragOver(t){return t.preventDefault(),t.stopPropagation(),!1}dragLeave(t){return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}drop(t){const a=t.dataTransfer||{};if(a){let o=this.getCurrentPath().substring(1);""!==o&&(o+="/"),M.v(a).then(c=>{if(c.length){const s=[];this.showUploadProgress().then(()=>{for(const u of c){const h=this.storageClient.uploadObject(this.bucketInstance,this.name,o+u._fullPath,u);this.trackUpload({filename:u._fullPath,promise:h}),s.push(h)}this.settlePromises(s).then(()=>{this.loadCurrentFolder()})})}})}return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}updateBrowsePath(){const t=[];let a="";for(const o of this.route.snapshot.url)a+="/"+o.path,t.push({name:o.path,route:`/storage/${this.bucketInstance}/${this.name}`+a});return this.breadcrumb$.next(t),a||"/"}isImage(t){if(t.folder)return!1;const a=t.name.toLocaleLowerCase();return a.endsWith(".png")||a.endsWith(".gif")||a.endsWith(".jpg")||a.endsWith("jpeg")||a.endsWith("bmp")||a.endsWith("svg")||a.endsWith("ico")}showUploadProgress(){return function(n,i,t,a){return new(t||(t=Promise))(function(c,s){function u(m){try{h(a.next(m))}catch(k){s(k)}}function p(m){try{h(a.throw(m))}catch(k){s(k)}}function h(m){m.done?c(m.value):function o(c){return c instanceof t?c:new t(function(s){s(c)})}(m.value).then(u,p)}h((a=a.apply(n,i||[])).next())})}(this,void 0,void 0,function*(){if(!this.progressDialogOpen)return this.dialogRef=this.dialog.open(ee,{position:{bottom:"10px",right:"10px"},width:"500px",data:{uploads$:this.uploads$},hasBackdrop:!1,autoFocus:!1,panelClass:["progress-dialog","mat-elevation-z2"]}),this.dialogRef.afterOpened().subscribe(()=>this.progressDialogOpen=!0),this.dialogRef.afterClosed().subscribe(()=>{this.uploads$.next([]),this.progressDialogOpen=!1}),new Promise((t,a)=>{this.dialogRef.afterOpened().subscribe(()=>{t(!0)},o=>{a(o)})})})}resizeMouseDown(t){let a=t.clientX;const o=this.previewWidth$.value,c=u=>{null!==a&&this.previewWidth$.next(Math.max(400,o-(u.clientX-a)))},s=u=>{a=null,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",s)}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe(),this.dialogRef&&this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.uw),e.Y36(f.F0),e.Y36(f.gz),e.Y36(x.C),e.Y36(D.Dx))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,a){if(1&t&&(e.Gf(he,7),e.Gf(fe,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.dropArea=o.first),e.iGM(o=e.CRH())&&(a.uploaderEl=o.first)}},decls:46,vars:32,consts:[["mat-icon-button","","routerLink","/storage","color","primary"],["mat-button","","color","primary",3,"click"],["type","file","hidden","","multiple","",3,"change"],["uploader",""],["mat-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[1,"droparea",3,"dragenter"],["droparea",""],[1,"droparea-overlay",3,"dragover","dragleave","drop"],[3,"autosize"],["mode","side","position","end",2,"text-align","center",3,"opened","disableClose"],[1,"resize-handle",3,"mousedown"],[4,"ngIf","ngIfElse"],["placeholder",""],[1,"panel-content"],["mat-table","","class","ya-data-table expand",3,"dataSource",4,"ngIf","ngIfElse"],["empty",""],[3,"src"],[2,"margin-top","4em","color","#fff"],["icon","account_tree",3,"link","queryParams"],["icon","shopping_basket",3,"link","label"],["icon","folder",3,"link","label",4,"ngFor","ngForOf"],["icon","folder",3,"link","label"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","modified"],["cdkColumnDef","size"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"routerLink","click"],["download","",3,"href","click"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-menu-item","","download","",3,"href"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"app-storage-page"),e.TgZ(1,"app-storage-toolbar"),e.TgZ(2,"a",0),e.TgZ(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA(),e.qZA(),e._uU(5),e.TgZ(6,"button",1),e.NdJ("click",function(){return e.CHM(o),e.MAs(11).click()}),e.TgZ(7,"mat-icon"),e._uU(8,"file_upload"),e.qZA(),e._uU(9," UPLOAD FILES "),e.TgZ(10,"input",2,3),e.NdJ("change",function(){return a.uploadObjects()}),e.qZA(),e.qZA(),e.TgZ(12,"button",1),e.NdJ("click",function(){return a.createFolder()}),e.TgZ(13,"mat-icon"),e._uU(14,"create_new_folder"),e.qZA(),e._uU(15," CREATE FOLDER "),e.qZA(),e.TgZ(16,"button",4),e.NdJ("click",function(){return a.deleteSelectedObjects()}),e.TgZ(17,"mat-icon"),e._uU(18,"delete"),e.qZA(),e._uU(19," DELETE "),e.qZA(),e.TgZ(20,"button",1),e.NdJ("click",function(){return a.togglePreview()}),e.YNc(21,_e,2,0,"mat-icon",5),e.ALo(22,"async"),e.YNc(23,be,2,0,"mat-icon",5),e.ALo(24,"async"),e._uU(25," PREVIEW PANEL "),e.qZA(),e.qZA(),e.TgZ(26,"div",6,7),e.NdJ("dragenter",function(s){return a.dragEnter(s)}),e.ALo(28,"async"),e.TgZ(29,"div",8),e.NdJ("dragover",function(s){return a.dragOver(s)})("dragleave",function(s){return a.dragLeave(s)})("drop",function(s){return a.drop(s)}),e.ALo(30,"async"),e.qZA(),e.TgZ(31,"mat-sidenav-container",9),e.TgZ(32,"mat-sidenav",10),e.ALo(33,"async"),e.ALo(34,"async"),e.TgZ(35,"div",11),e.NdJ("mousedown",function(s){return a.resizeMouseDown(s)}),e.qZA(),e.YNc(36,ke,2,1,"ng-container",12),e.YNc(37,Ze,5,0,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(39,"mat-sidenav-content"),e.TgZ(40,"div",14),e.YNc(41,Ae,5,11,"ng-container",5),e.ALo(42,"async"),e.YNc(43,Qe,18,3,"table",15),e.YNc(44,Me,2,0,"ng-template",null,16,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const o=e.MAs(38),c=e.MAs(45);e.xp6(5),e.hij(" ",a.name," \xa0\xa0\xa0 "),e.xp6(11),e.Q6J("disabled",!a.selection.hasValue()),e.xp6(5),e.Q6J("ngIf",e.lcZ(22,18,a.showPreview$)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(24,20,a.showPreview$)),e.xp6(3),e.ekj("active",e.lcZ(28,22,a.dragActive$)),e.xp6(3),e.ekj("hide",!e.lcZ(30,24,a.dragActive$)),e.xp6(2),e.Q6J("autosize",!0),e.xp6(1),e.Udp("width",e.lcZ(33,26,a.previewWidth$)+"px"),e.Q6J("opened",e.lcZ(34,28,a.showPreview$))("disableClose",!1),e.xp6(4),e.Q6J("ngIf",1===a.selection.selected.length&&a.isImage(a.selection.selected[0]))("ngIfElse",o),e.xp6(5),e.Q6J("ngIf",e.lcZ(42,30,a.breadcrumb$)),e.xp6(2),e.Q6J("ngIf",a.dataSource&&a.dataSource.data.length)("ngIfElse",c)}},directives:[U,N,T.zs,f.yS,P.Hw,T.lW,_.O5,v.TM,v.JX,v.Rh,se.w,re.a,_.sg,g.BZ,b.fo,b.D5,g.ge,b.O_,g.ev,g.w1,g.fO,g.Dz,le.T,ue.OP,de.d,b.s$,g.XQ,b.Sq,g.Gk,ge.M],pipes:[_.Ov,B.X,me.i,J.b],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;box-sizing:content-box;color:#000000a7}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.droparea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.droparea-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;background:rgba(27,97,185,.1);border:1px solid rgba(27,97,185,1);z-index:10;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}  .progress-dialog .mat-dialog-container{box-shadow:none;padding:0;overflow:hidden}  .progress-dialog .mat-dialog-content{overflow:hidden}.mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:inherit}.mat-sidenav-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{background-color:#000}.mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow:hidden!important}.resize-handle[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;width:20px;bottom:0;cursor:ew-resize;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.mat-sidenav-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:2em;max-width:calc(100% - 5em);max-height:calc(100% - 5em)}"],changeDetection:0}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"router-outlet")},directives:[f.lC],encapsulation:2,changeDetection:0}),n})();var A=r(4847);let je=(()=>{class n{constructor(t,a,o,c){this.dialogRef=t,this.data=c,this.storageClient=o.createStorageClient(),this.form=a.group({name:["",l.kI.required]})}save(){this.storageClient.createBucket(this.data.bucketInstance,{name:this.form.value.name}).then(()=>this.dialogRef.close(!0))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.so),e.Y36(l.qu),e.Y36(x.C),e.Y36(d.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-bucket-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Create bucket"),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e.TgZ(3,"form",2),e.TgZ(4,"label"),e._uU(5," Bucket name "),e._UZ(6,"input",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-actions",4),e.TgZ(8,"button",5),e._uU(9,"CANCEL"),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return a.save()}),e._uU(11,"SAVE"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(7),e.Q6J("disabled",!a.form.valid))},directives:[d.uh,d.xY,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,d.H8,d.ZT],encapsulation:2}),n})();var Ee=r(141),Le=r(1204);function Re(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"th",21),e.TgZ(1,"input",22),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw();return o?c.masterToggle():null}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())}}function He(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",23),e.TgZ(1,"input",24),e.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const s=e.CHM(t).$implicit,u=e.oxw();return o?u.selection.toggle(s):null}),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw();e.xp6(1),e.Q6J("checked",a.selection.isSelected(t))}}function ze(n,i){1&n&&(e.TgZ(0,"th",25),e._uU(1,"Name"),e.qZA())}const We=function(n,i){return[n,i]};function Xe(n,i){if(1&n&&(e.TgZ(0,"td",26),e.TgZ(1,"mat-icon",27),e._uU(2,"shopping_basket"),e.qZA(),e.TgZ(3,"a",28),e.NdJ("click",function(a){return a.stopPropagation()}),e._uU(4),e.qZA(),e.qZA()),2&n){const t=i.$implicit,a=e.oxw();e.xp6(3),e.Q6J("routerLink",e.WLB(2,We,a.instance,t.name)),e.xp6(1),e.Oqu(t.name)}}function Ge(n,i){1&n&&(e.TgZ(0,"th",29),e._uU(1,"Size"),e.qZA())}function Ve(n,i){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.ALo(2,"nvl"),e.ALo(3,"formatBytes"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,e.lcZ(3,4,t.size),"-"))}}function Ke(n,i){1&n&&(e.TgZ(0,"th",29),e._uU(1,"Object count"),e.qZA())}function et(n,i){if(1&n&&(e.TgZ(0,"td",30),e._uU(1),e.ALo(2,"nvl"),e.ALo(3,"number"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,e.lcZ(3,4,t.numObjects),"-"))}}function tt(n,i){1&n&&e._UZ(0,"th",31)}function nt(n,i){1&n&&e._UZ(0,"td",26)}function at(n,i){1&n&&e._UZ(0,"tr",32)}function ot(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",33),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().toggleOne(c)}),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw();e.ekj("selected",a.selection.isSelected(t))}}let $=(()=>{class n{constructor(t,a,o,c,s){this.yamcs=t,this.dialog=a,this.router=o,this.route=c,this.instance="_global",this.displayedColumns=["select","name","size","numObjects","actions"],this.filterForm=new l.cw({instance:new l.NI("_global")}),this.instanceOptions$=new Z.X([{id:"_global",label:"_global"}]),this.dataSource=new g.by,this.selection=new w.Ov(!0,[]),s.setTitle("Buckets"),this.storageClient=this.yamcs.createStorageClient(),t.yamcsClient.getInstances({filter:"state=RUNNING"}).then(u=>{for(const p of u)this.instanceOptions$.next([...this.instanceOptions$.value,{id:p.name,label:p.name}])}),this.initializeOptions(),this.refreshDataSources(),this.filterForm.get("instance").valueChanges.forEach(u=>{this.instance=u,this.refreshDataSources()})}initializeOptions(){const t=this.route.snapshot.queryParamMap;t.has("instance")&&(this.instance=t.get("instance"),this.filterForm.get("instance").setValue(this.instance))}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createBucket(){this.dialog.open(je,{width:"400px",data:{bucketInstance:this.instance}}).afterClosed().subscribe(a=>{a&&this.refreshDataSources()})}deleteSelectedBuckets(){if(confirm("Are you sure you want to delete the selected buckets?")){const t=[];for(const a of this.selection.selected){const o=this.storageClient.deleteBucket(this.instance,a.name);t.push(o)}Promise.all(t).then(()=>{this.selection.clear(),this.refreshDataSources()})}}refreshDataSources(){this.updateURL(),this.storageClient.getBuckets(this.instance).then(t=>{this.dataSource.data=t})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.C),e.Y36(d.uw),e.Y36(f.F0),e.Y36(f.gz),e.Y36(D.Dx))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,a){if(1&t&&e.Gf(A.YE,7),2&t){let o;e.iGM(o=e.CRH())&&(a.sort=o.first)}},decls:34,vars:8,consts:[["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","size"],["mat-header-cell","","mat-sort-header","","style","text-align: right",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","numObjects"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"routerLink","click"],["mat-header-cell","","mat-sort-header","",2,"text-align","right"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"app-storage-page"),e.TgZ(1,"app-storage-toolbar"),e._uU(2," Storage \xa0\xa0\xa0 "),e.TgZ(3,"button",0),e.NdJ("click",function(){return a.createBucket()}),e.TgZ(4,"mat-icon"),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," CREATE BUCKET "),e.qZA(),e.TgZ(7,"button",1),e.NdJ("click",function(){return a.deleteSelectedBuckets()}),e.TgZ(8,"mat-icon"),e._uU(9,"delete"),e.qZA(),e._uU(10," DELETE "),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"form",3),e.TgZ(13,"div",4),e._UZ(14,"app-select",5),e.ALo(15,"async"),e.qZA(),e.qZA(),e.TgZ(16,"table",6),e.ynx(17,7),e.YNc(18,Re,2,1,"th",8),e.YNc(19,He,2,1,"td",9),e.BQk(),e.ynx(20,10),e.YNc(21,ze,2,0,"th",11),e.YNc(22,Xe,5,5,"td",12),e.BQk(),e.ynx(23,13),e.YNc(24,Ge,2,0,"th",14),e.YNc(25,Ve,4,6,"td",15),e.BQk(),e.ynx(26,16),e.YNc(27,Ke,2,0,"th",14),e.YNc(28,et,4,6,"td",15),e.BQk(),e.ynx(29,17),e.YNc(30,tt,1,0,"th",18),e.YNc(31,nt,1,0,"td",12),e.BQk(),e.YNc(32,at,1,0,"tr",19),e.YNc(33,ot,1,2,"tr",20),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("disabled",!a.selection.hasValue()),e.xp6(5),e.Q6J("formGroup",a.filterForm),e.xp6(2),e.Q6J("options",e.lcZ(15,6,a.instanceOptions$)),e.xp6(2),e.Q6J("dataSource",a.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns))},directives:[U,N,T.lW,P.Hw,l._Y,l.JL,l.sg,Ee.P,l.JJ,l.u,g.BZ,A.YE,b.fo,b.D5,g.ge,b.O_,g.ev,g.w1,g.fO,A.nU,g.Dz,f.yS,g.as,g.XQ,g.nj,g.Gk],pipes:[_.Ov,Le.m,J.b,_.JJ],encapsulation:2,changeDetection:0}),n})();var it=r(3272);const st=[{path:"",canActivate:[y.a,I.U],canActivateChild:[y.a],runGuardsAndResolvers:"always",component:(()=>{class n{constructor(t){this.sidebar$=t.sidebar$}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:4,consts:[["messageBar",""],[1,"mat-typography","storage-page-content"]],template:function(t,a){if(1&t&&(e._UZ(0,"app-message-bar",null,0),e.TgZ(2,"div",1),e.ALo(3,"async"),e._UZ(4,"router-outlet"),e.qZA()),2&t){const o=e.MAs(1);e.xp6(2),e.ekj("message-bar-visible",e.lcZ(3,2,o.show$))}},directives:[it.c,f.lC],pipes:[_.Ov],styles:[".storage-page-content[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:#f7f7f7}.storage-page-content.message-bar-visible[_ngcontent-%COMP%]{top:112px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fcfcfc;border-bottom:1px solid #d3d3d3;box-sizing:content-box;color:#000000a7}"],changeDetection:0}),n})(),children:[{path:"",pathMatch:"full",component:$,data:{hasSidebar:!1}},{path:":instance/:name",component:Y,children:[{path:"**",component:q,data:{hasSidebar:!1}}]}]}];let rt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(st)],f.Bz]}),n})(),lt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[F.m,rt]]}),n})()}}]);