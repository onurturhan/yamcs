<form [formGroup]="form"
      class="ya-form"
      [class.showAll]="showAll$ | async">

  <ng-container *ngFor="let argument of arguments; let first = first">
    <br *ngIf="!first">
    <app-command-form-argument [argument]="argument" [formGroup]="form"></app-command-form-argument>
  </ng-container>

  <ng-container *ngFor="let argument of argumentsWithInitial; let first = first">
    <br class="hasInitial" *ngIf="!first || arguments.length">
    <app-command-form-argument [argument]="argument" [formGroup]="form" class="hasInitial">
    </app-command-form-argument>
  </ng-container>

  <ng-container *ngIf="config.collapseInitializedArguments">
    <ng-container *ngIf="argumentsWithInitial.length && !(showAll$ | async)">
      <br *ngIf="arguments.length">
      <app-text-action (click)="showAll$.next(true)"
                       icon="double_arrow">
        Show {{ argumentsWithInitial.length }}
        argument<ng-container *ngIf="argumentsWithInitial.length !== 1">s</ng-container> with defaults
      </app-text-action>
    </ng-container>
  </ng-container>

  <p>&nbsp;</p>
  <h3>Options</h3>
  <ng-container *ngIf="showCommandOptions()">
    <ng-container *ngFor="let extra of commandOptions">
      <ng-container [ngSwitch]="extra.type">
        <label *ngSwitchCase="'BOOLEAN'">
          {{ extra.verboseName || extra.id }}
          <app-help [dialogTitle]="extra.verboseName || extra.id" *ngIf="extra.help">
            <div [innerHTML]="extra.help"></div>
          </app-help>
          <br>
          <input type="radio" [formControlName]="'extra__' + extra.id" value="true"> true
          <input type="radio" [formControlName]="'extra__' + extra.id" value="false"> false
        </label>

        <label *ngSwitchDefault>
          {{ extra.verboseName || extra.id }}
          <app-help [dialogTitle]="extra.verboseName || extra.id" *ngIf="extra.help">
            <div [innerHTML]="extra.help"></div>
          </app-help>
          <input type="text" [formControlName]="'extra__' + extra.id">
        </label>
      </ng-container>
      <br>
    </ng-container>
  </ng-container>
  <label>
    Comment <span class="hint">(optional)</span>
    <textarea formControlName="extra__comment" rows="3" style="width: 100%; resize: none"></textarea>
  </label>
</form>
